{"version":3,"file":"xnsk-admin-ui.js","sources":["../src/components/Dialog/index.vue","../src/assets/img/copy.png","../src/utils/index.js","../src/components/DialogMsg/index.vue","../src/components/BlueTitle/index.vue","../src/components/Drawer/index.vue","../src/icon/SearchOutline.js","../src/icon/ReloadOutline.js","../src/components/ListPage/index.vue","../src/components/Form/index.vue","../src/components/Info/index.vue","../src/components/MarkDown/index.vue","../src/components/LoginAgreement/index.vue","../src/components/TreeSync/index.vue","../src/http/js/index.js","../src/http/index.js","../src/components/UploadFileList/index.vue","../index.js"],"sourcesContent":["<!--\n  弹窗模板 \n  v-model:show 是否显示\n  title 标题（如果不传，头部左侧蓝色竖条也不显示）\n  width 宽\n  height 高 （默认auto，如果内容太多需要需要滚动条，请设置具体高度）\n  footBtns 底部按钮（默认确定+取消，不需要按钮时传空数组），默认第一个按钮实心，第二个空心。特殊情况直接使用#footBtn的slot自定义\n  callback 按钮点击事件（参数function,和footBtns顺序一一对应） \n  loading 提交按钮的loading\n  @beforeClose 关闭拦截 参数：function，执行该function即执行关闭。不监听则点击取消或叉号直接关闭\n  lock 是否锁定？默认为true，不支持点击蒙层和ESC关闭\n  其他参数参考n-modal（部分参数已固定，不支持定制，如：preset、close-on-esc、mask-closable、trap-focus）\n\n  ……其他参数/功能持续维护\n\n  样例：\n  <xn-dialog\n    title=\"标题\"\n    v-model:show=\"true\"\n    width=\"600\"\n    height=\"auto\"\n    :footBtns=\"['确定', '取消']\"\n    :callback=\"[submitHandler,cancelHandler]\"\n    @beforeClose=\"beforeClose\"\n  >\n    /* 弹窗主体内容 */\n  </xn-dialog>\n<script setup>\n  import { useDialog } from 'naive-ui'\n  const dialog = useDialog()\n  /* 关闭拦截 */\n  function beforeClose(done){\n      dialog.warning({\n          title: '警告',\n          content: '确定关闭？',\n          positiveText: '确定',\n          negativeText: '取消',\n          onPositiveClick: () => {\n            done()\n          },\n          onNegativeClick: () => {\n          }\n        })\n  }\n</script>\n \n-->\n<template>\n  <n-modal\n    v-model:show=\"isShow\"\n    :trap-focus=\"false\"\n    preset=\"card\"\n    :close-on-esc=\"!lock\"\n    :mask-closable=\"!lock\"\n    class=\"dialog-templete\"\n    :style=\"{\n      width: width + 'px',\n      height: height + 'px',\n    }\"\n  >\n    <template #header>\n      <BlueTitle v-if=\"title\" :title=\"title\" />\n    </template>\n    <template #default>\n      <slot></slot>\n    </template>\n    <template #footer>\n      <slot v-if=\"slot.footBtn\" name=\"footBtn\"></slot>\n      <div v-else class=\"dialog-templete-btns\">\n        <n-button v-if=\"footBtns.length > 0\" type=\"info\" @click=\"submitClick\">\n          {{ footBtns[0] }}\n        </n-button>\n        <n-button\n          v-if=\"footBtns.length > 1\"\n          type=\"info\"\n          ghost\n          @click=\"cancelClick\"\n        >\n          {{ footBtns[1] }}\n        </n-button>\n      </div>\n    </template>\n  </n-modal>\n</template>\n<script>\n/* import { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"XnDialog\",\n}); */\n</script>\n<script setup>\nimport { useDialog, NModal, NButton } from \"naive-ui\";\nimport { watch, ref, computed, reactive, useSlots, useAttrs } from \"vue\";\nimport { BlueTitle } from \"../index\";\n\nconst emit = defineEmits([\"update:show\"]);\nconst attrs = useAttrs();\nconst slot = useSlots();\n\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false,\n  },\n  title: {\n    type: String,\n    default: \"\",\n  },\n  width: {\n    type: [Number, String],\n    default: \"600\",\n  },\n  height: {\n    type: [Number, String],\n    default: \"auto\",\n  },\n  footBtns: {\n    type: Array,\n    default: [\"确定\", \"取消\"],\n  },\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n  callback: {\n    type: Array,\n    default: [],\n  },\n  //是否锁定\n  lock: {\n    type: Boolean,\n    defualt: false,\n  },\n});\n/* 是否显示弹窗 */\nlet isShow = computed({\n  get() {\n    return props.show;\n  },\n  set(val) {\n    if (!val) {\n      cancelClick();\n    }\n  },\n});\n\n/* 提交 */\nfunction submitClick() {\n  props.callback[0] && props.callback[0]();\n}\n/* 取消 */\nfunction cancelClick() {\n  if (attrs.onBeforeClose) {\n    emit(\"beforeClose\", () => {\n      if (props.callback[1]) {\n        emit(\"update:show\", false);\n        props.callback[1] && props.callback[1]();\n      }\n    });\n  } else {\n    emit(\"update:show\", false);\n    props.callback[1] && props.callback[1]();\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dialog-templete-btns {\n  text-align: center;\n  .n-button {\n    margin: 10px 10px 0 10px;\n  }\n}\n</style>\n<style lang=\"scss\">\n.n-modal.dialog-templete {\n  border-radius: 10px;\n  box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.11);\n  max-height: 95vh;\n  max-width: 95vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  .n-card__content {\n    flex: 1;\n    overflow: auto;\n  }\n}\n</style>\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACPklEQVRYR+2XT4hPURTHP19/M9GMlFK2NlZqkiz8WymKUqRJZJIiTRYWylZKoRBlxcbWikgkRUnIhtmQ8qekjBFFSl+d6b3p9fJ+v3ffm9+Uclav+84953POvffcc0UXsb0LOAgMAnO66Zf+G3gHXAOOS/pcnq9OBm1fAfYkOq1SfwlskPSpqFAJYHs/cGmKnOdmXgDripnoBHAHWN8QIOzOqJh7QdKh/F/HJWjoHNvhfG22d7aX7PwClkl6G+M9ASg6tD0CnC1BnJZ0ZBLA9lzgJLADWNI08mzeG+A2cFTSeIzZvg5sLth9IGnNBECWrrst1ruK9zWwKjac7U3AjYLiN6BfkgPgAHCxZdRV0y9LGrbdD4yVNmafpB8BcK8H0edAEelCSb9tx/f8AukkQFSqpT3KQJhdJGnsP0CTDETBSJGqiyp5CR4CQ3mlqktgewA4D8TtWZRkgJWSntR1XKp6fcBXYFZhPBkgisfjhgBxzL60BYjoh4FXiRCLgTPAtrZLkOi3q3ryEnS1mKjw7wJ8T4w0TsDfuqDkDNwHdkr6mAJgO07AOWBv2004KOlZivNc1/a8rA7MblMHVkt61BBgQVYHZrYBeA7sA6KjiYdFXYk6cArYUmMJRiUtD71oSKa7H/gJbJUUfeO0AsTL6ClwQtJonqXIwC1gY908J+rFUR6IlqxqXgAMAVcTDddVvykpOuJKmXiY2I6uOLrjqZS4FeNIxzuhM0AGsRs4DKxo+WL6AMQ745ik990i+gN2mEgw/3nqggAAAABJRU5ErkJggg==\"","//写入内容到剪切板中\nexport function writeToClipBoard (content) {\n  let writeStr = \"\"\n  if (Object.prototype.toString.call(content) === \"[object String]\") {\n    writeStr = JSON.stringify(content)\n  } else {\n    writeStr = content\n  }\n  return new Promise((resolve, reject) => {\n    if (navigator.clipboard) {\n      // clipboard api 复制\n      navigator.clipboard.writeText(writeStr)\n    } else {\n      let textarea = document.createElement(\"textarea\")\n      document.body.appendChild(textarea)\n      textarea.style.position = \"fixed\"\n      textarea.style.clip = \"rect(0 0 0 0)\"\n      textarea.style.top = \"10px\"\n      textarea.value = writeStr\n      textarea.select()\n      document.execCommand(\"copy\", true)\n      document.body.removeChild(textarea)\n    }\n    resolve()\n  })\n}\n\n//获取真实类型\nexport function realType (val) {\n  let _type = Object.prototype.toString.call(val)\n  return _type.slice(8, _type.length - 1).toLowerCase()\n}\n\n//获取真实值\nexport function realValue (val) {\n  return Object.prototype.toString.call(val) === \"[object Function]\"\n    ? val()\n    : val\n}\n//原型加方法 \nObject.defineProperty(Object.prototype, \"xnsk_admin_ui_realType\", {\n  get () {\n    let _type = Object.prototype.toString.call(this)\n    return _type.slice(8, _type.length - 1).toLowerCase()\n  },\n})\nObject.defineProperty(Object.prototype, \"xnsk_admin_ui_realValue\", {\n  get () {\n    return Object.prototype.toString.call(this) === \"[object Function]\"\n      ? this()\n      : this\n  },\n})\n\n//随机数\nexport function getRandomId (len = 20, bTime = true) {\n  let strId = \"\"\n  if (bTime) strId = new Date().getTime() + \"\"\n  const iLen = len - strId.length\n  for (let i = 0; i < iLen; i++) {\n    strId += getRandomKeys(1)\n  }\n  return strId.substr(0, len)\n}\nexport function getRandomKeys (iLen = 10) {\n  let strRandomKeys = \"\"\n  const str = \"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n  for (let i = 0; i < iLen; i++) {\n    strRandomKeys += str.substr(Math.floor(Math.random() * str.length), 1)\n  }\n  return strRandomKeys\n}\nexport const childrenEmptyToNull = (arr = [], childrenKey = \"children\") => {\n  let data = arr\n  function setNullForEmptyChildren (node) {\n    if (node?.[childrenKey]?.length === 0) {\n      node[childrenKey] = null\n    } else if (node?.[childrenKey]) {\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child))\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i))\n  setNullForEmptyChildren(data)\n  return data\n}\n\nexport const deleteEmptyChildren = (arr = [], childrenKey = \"children\") => {\n  let data = arr\n  function setNullForEmptyChildren (node) {\n    if (node?.[childrenKey]?.length === 0 || node?.[childrenKey] === null) {\n      delete node[childrenKey]\n      node.isLeaf = true\n    } else if (node?.[childrenKey]) {\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child))\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i))\n  setNullForEmptyChildren(data)\n  return data\n}\n//给数据添加一个随机ID\nexport const addRandomID = (arr = [], childrenKey = \"children\") => {\n  let data = arr\n  function setNullForEmptyChildren (node) {\n    if (node?.[childrenKey]?.length === 0 || node?.[childrenKey] === null) {\n      delete node[childrenKey]\n      node.randomId = getRandomId()\n    } else if (node?.[childrenKey]) {\n      node.randomId = getRandomId()\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child))\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i))\n  setNullForEmptyChildren(data)\n  return data\n}\n\n/**\n * 根据文件地址获取文件内容\n * @param {String} url 文件地址\n */\nexport function getFileContentByUrl (url) {\n  return new Promise((resolve, reject) => {\n    let xmlhttp\n    if (window.XMLHttpRequest) {\n      xmlhttp = new XMLHttpRequest()\n    } else {\n      xmlhttp = new ActiveXObject(\"Microsoft.XMLHttp\")\n    }\n    xmlhttp.onreadystatechange = () => {\n      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n        resolve(xmlhttp.responseText)\n      }\n    }\n    xmlhttp.onerror = () => {\n      reject(false)\n    }\n    // 向服务器发送请求\n    xmlhttp.open(\"GET\", url, true)\n    xmlhttp.send()\n  })\n}\n\n/* 根据地址获取文件名 */\nexport function getFileNameByUrl (_url = \"\") {\n  return decodeURIComponent(_url).substring(\n    decodeURIComponent(_url).lastIndexOf(\"/\") + 1\n  )\n}\n/**\n * 根据name获取文件后缀名\n * @param {*} _name\n * @param {*} _mark 标记  默认返回不带.，如果需要，第二个参数可以传入点\n * @returns\n */\nexport function getSuffixName (_name = \"\", _mark = \"\") {\n  return _mark + _name.slice(_name.lastIndexOf(\".\") + 1)\n}\n\n/**\n * 根据className找到上级dom（反向querySelector）\n * @param {Element} el 源dom\n * @param {String} className 要查询的className\n * @returns Element || undefined\n */\nexport function getParentNode (el, className = \"\") {\n  let find = el\n  while (find.parentNode.className.split(\" \").indexOf(className) === -1 && find.parentNode.tagName !== \"BODY\") {\n    find = find.parentNode\n  }\n  return find.parentNode.className.split(\" \").indexOf(className) === -1 ? undefined : find.parentNode\n}\n","<!--\n  案例：\n  <xn-dialog-msg\n      v-model:show=\"\"\n      data=\"我是日志的内容\"\n    />\n-->\n<template>\n  <Dialog\n    :title=\"title\"\n    v-model:show=\"isShow\"\n    width=\"800\"\n    :callback=\"[]\"\n  >\n    <div class=\"break-all\">\n      {{ data }}\n    </div>\n    <template #footBtn>\n      <div class=\"text-center\">\n        <n-button type=\"primary\" @click=\"copyLog\">\n          <template #icon>\n            <img\n              class=\"mt-px\"\n              src=\"../../assets/img/copy.png\"\n              style=\"width: 16px; height: 16px\"\n            /> </template\n          >复制日志\n        </n-button>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport { Dialog } from \"../index\";\nimport { computed, useSlots } from \"vue\";\nimport { writeToClipBoard } from \"../../utils\";\nimport { NButton } from \"naive-ui\";\nconst emit = defineEmits([\"update:show\"]);\n\nconst slot = useSlots();\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false,\n  },\n  title: {\n    type: String,\n    default: \"日志\",\n  },\n  data: {\n    type: String,\n    default: \"\",\n  },\n});\n/* 是否显示弹窗 */\nlet isShow = computed({\n  get() {\n    return props.show;\n  },\n  set(val) {\n    if (!val) {\n      emit(\"update:show\", false);\n    }\n  },\n});\n/* 点击复制 */\nfunction copyLog() {\n  writeToClipBoard(props.data).then(() => {\n    try {\n      $message.success(\"复制成功\");\n      emit(\"success\");\n    } catch (err) {\n      console.log(\"$message未定义\");\n      emit(\"success\");\n    }\n  });\n}\n</script>\n\n<style lang=\"scss\" scoped></style>\n","<!--\n  左侧带蓝条的title bar\n-->\n<template>\n  <div class=\"flex justify-between items-center\">\n    <div class=\"flex justify-start items-center gap-3\">\n      <div\n        class=\"blue-bar\"\n        v-if=\"showTitleBar\"\n        style=\"width: 3px; border-radius: 2px\"\n        :style=\"{ height: fontSize }\"\n      ></div>\n      <b :style=\"{ fontSize: fontSize }\">{{ title }}</b>\n    </div>\n    <div class=\"flex justify-center items-center\">\n      <slot></slot>\n    </div>\n     \n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  title: String,\n  size: {\n    type: String,\n    default: 'small',\n  },\n  showTitleBar: {\n    type: Boolean,\n    default: true,\n  },\n})\nconst fontSize = computed(() => {\n  switch (props.size) {\n    case 'small':\n      return '14px'\n    case 'big':\n      return '18px'\n    default:\n      return props.size\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.blue-bar {\n  background-color: rgba(37, 127, 247, 1);\n}\n</style>\n","<template>\n  <n-drawer\n    :close-on-esc=\"outClosable\"\n    :mask-closable=\"outClosable\"\n    :auto-focus=\"false\"\n    v-bind=\"attrs\"\n  >\n    <n-drawer-content :title=\"attrs.title\" closable>\n      <slot></slot>\n    </n-drawer-content>\n  </n-drawer>\n</template>\n\n<script setup>\nimport { onMounted, useAttrs } from 'vue'\nimport { NDrawer, NDrawerContent } from 'naive-ui'\n\nconst attrs = useAttrs()\nconst props = defineProps({\n  outClosable: {\n    type: Boolean,\n    default: () => false,\n  },\n})\nonMounted(() => {})\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    d: 'M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32',\n    d: 'M338.29 338.29L448 448'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nexport default defineComponent({\n  name: 'SearchOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createBlock('svg', _hoisted_1, [_hoisted_2, _hoisted_3])\n  }\n})\n","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    d: 'M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    d: 'M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nexport default defineComponent({\n  name: 'ReloadOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createBlock('svg', _hoisted_1, [_hoisted_2, _hoisted_3])\n  }\n})\n","<!--\n    列表页组件\n    <ListPage :config=\"config\" />\n    参数说明：\n    config：\n      expand [Function]: 行展开事件，不写就是不可展开\n      isTree [Boolean]: 是否树形\n      apiName [Function]: 接口方法\n      data [Array]: 本地数据，如果使用本地数据，将忽略apiName\n      params [Object]: 搜索参数\n        columns [Array]: 搜索项\n          说明：\n            label [String]: 文案\n            type [String]: 类型，目前支持input、select，持续开发中\n            propName [String]: 参数名\n            defaultValue [] : 默认值\n            width [Number]:  自定义宽度（开发中……）\n        change [Function]: 搜索项发生变化时回调\n            返回params: 1. 完整搜索结果 2. 发生变化的那一项\n        hidden 是否显示 页面不需要筛选项但接口需要默认参数时使用\n      table [Object]: 表格内容\n        title [String]: 标题\n        headBtns [Array]: 头部按钮\n          说明：\n            label [String] 按钮名\n            click: [Function] 按钮回调\n            icon: [Component] 按钮图标\n            loading: [Proxy(Boolean) | Function] 是否显示loading\n              案例：\n                const _loading = ref(false)\n              支持的写法：\n                1. loading : _loading\n                2. loading : () => _loading\n                3. loading : () => _loading.value\n              不支持将原始值直接赋值，原因都懂的~\n        actions [Array]: 右侧操作按钮\n          说明：\n              label: [String] 按钮名\n              click: [Function] 按钮回调\n              icon: [Component] 按钮图标\n              show: [Function | Boolean] 是否显示\n              disabled: [Function | Boolean] 是否禁用\n        columns [Array] 表格列\n          说明：\n            title [String] 标题\n            key [String] 参数名\n            width [Number] 列宽\n            slot [String] 自定义显示内容，以slot形式\n            unEllipsis:不适用溢出省略号（默认溢出显示省略号，鼠标滑过显示内容）\n            customValue [Function] 自定义显示内容\n              例如：customValue: (row) => moment(row.updateTime).format(\"yyyy-MM-DD hh:mm:ss\")\n          注意：操作栏key统一为actions \n    组件slot\n      top 搜索栏上面部分\n      center 搜索栏和表格中间部分\n      footer 底部\n\n    事件：\n      search 搜索或重置时触发，已使用场景：列表页的统计需要单独获取\n    实例方法：\n      getTableData 主动更新列表数据，用于右侧操作区更改数据后的刷新\n    实例属性：\n      pageData 页面数据\n      loading table上的loading，右侧操作区异步操作时可以设为true防止频繁点击\n      params 当前筛选项值，用本页面的筛选项查其他接口时使用\n\n-->\n<template>\n  <div\n    class=\"list-page\"\n    :class=\"{ noPadding: props?.config?.noPadding }\"\n    :style=\"{ height: props?.config?.height ?? '100%' }\"\n  >\n    <div class=\"list-page-content\">\n      <!-- 顶部插槽 -->\n      <slot name=\"top\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n      <!-- 搜索部分 -->\n      <div\n        class=\"list-page-search marB20\"\n        v-if=\"searchItems.length > 0 && !config.params.hidden\"\n      >\n        <n-grid x-gap=\"12\" cols=\"3 s:3 m:4 l:5 xl:6\" responsive=\"screen\">\n          <template v-for=\"(item, index) in searchItems\">\n            <n-gi v-if=\"!item.hidden\" :key=\"item?.did || index\">\n              <!-- 输入框 -->\n              <n-input\n                v-if=\"item.type === 'input'\"\n                v-model:value=\"params[item.propName]\"\n                :placeholder=\"item.placeholder || '请输入' + item.label\"\n                clearable\n                :disabled=\"item.disabled === true || false\"\n                :maxlength=\"item.maxlength || 20\"\n                @update:value=\"paramsChange(item)\"\n                @keyup.enter=\"searchClick\"\n              >\n              </n-input>\n              <!-- 下拉框 -->\n              <n-select\n                v-if=\"item.type === 'select'\"\n                v-model:value=\"params[item.propName]\"\n                :options=\"getSelection(item.selection)\"\n                :placeholder=\"item.placeholder || '请选择' + item.label\"\n                clearable\n                :disabled=\"item.disabled === true || false\"\n                @update:value=\"paramsChange(item)\"\n              >\n              </n-select>\n            </n-gi>\n          </template>\n\n          <n-gi :suffix=\"true\">\n            <div class=\"flex-1 justify-end flex\">\n              <n-button type=\"primary\" @click=\"searchClick\">\n                <template #icon>\n                  <n-icon>\n                    <SearchOutline />\n                  </n-icon>\n                </template>\n                查询</n-button\n              >\n              <n-button class=\"ml-3\" @click=\"searchReset\">\n                <template #icon>\n                  <n-icon>\n                    <ReloadOutline />\n                  </n-icon> </template\n                >重置</n-button\n              >\n            </div>\n          </n-gi>\n        </n-grid>\n      </div>\n      <!-- 中间插槽 -->\n      <slot name=\"center\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n      <!-- 标题 + 按钮  -->\n      <div\n        v-if=\"props?.config?.table?.title || props?.config?.table?.headBtns\"\n        class=\"overflow-hidden flex items-center justify-between\"\n        style=\"margin-bottom: 24px\"\n      >\n        <blue-title\n          size=\"16px\"\n          v-if=\"props?.config?.table?.title\"\n          :title=\"getTitle\"\n        />\n        <p style=\"display: flex\">\n          <template\n            v-for=\"(item, index) in props?.config?.table?.headBtns || []\"\n          >\n            <n-button\n              :type=\"item.type || 'primary'\"\n              class=\"marL15\"\n              v-if=\"getHeadBtnShow(item)\"\n              :key=\"index\"\n              :loading=\"getButtonLoading(item.loading)\"\n              :disabled=\"getHeadBtnDisabled(item)\"\n              @click=\"item.click\"\n            >\n              <n-icon\n                v-if=\"item.icon\"\n                :component=\"item.icon\"\n                style=\"margin-right: 8px\"\n              />\n              <span> {{ item.label }}</span>\n            </n-button>\n          </template>\n        </p>\n      </div>\n      <slot name=\"tableHeader\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n      <!-- table部分 -->\n      <div class=\"list-page-table\">\n        <n-data-table\n          :columns=\"tableColumns\"\n          :data=\"dataList\"\n          :scroll-x=\"tableWidth\"\n          striped\n          :loading=\"loading\"\n          :row-key=\"(row) => row.did ?? row.id ?? row.randomId ?? ''\"\n          :pagination=\"\n            props?.config?.data &&\n            !props?.config?.unPagination && {\n              page: pagination.page,\n              pageSize: pagination.pageSize,\n              showSizePicker: true,\n              pageSizes: pagination.pageSizeOptions,\n              itemCount: pagination.itemCount,\n              showQuickJumper: true,\n            }\n          \"\n          :on-update:page-size=\"handleSizeChange\"\n          :on-update:page=\"pageChange\"\n          :on-update:checked-row-keys=\"handleCheckedRowKeys\"\n          :children-key=\"\n            props?.config?.isTree\n              ? props?.config?.childrenKey || 'children'\n              : null\n          \"\n          :default-expanded-row-keys=\"[getExpandedRow]\"\n          @load=\"onLoad\"\n          v-bind=\"attrs\"\n        />\n      </div>\n      <!-- 底部插槽 -->\n      <slot name=\"footer\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n    </div>\n    <n-pagination\n      v-if=\"!props?.config?.data\"\n      class=\"list-page-table-pagination\"\n      v-model:page=\"pagination.page\"\n      v-model:page-size=\"pagination.pageSize\"\n      :page-sizes=\"pagination.pageSizeOptions\"\n      :item-count=\"pagination.itemCount\"\n      :on-update:page-size=\"handleSizeChange\"\n      :on-update:page=\"pageChange\"\n      show-size-picker\n      show-quick-jumper\n    />\n  </div>\n</template>\n\n<script setup>\nimport { getRandomId, addRandomID } from \"../../utils\";\nimport { BlueTitle, Dialog } from \"../index\";\nimport {\n  NButton,\n  NIcon,\n  NDataTable,\n  NInput,\n  NSelect,\n  NCheckbox,\n  NGrid,\n  NGi,\n  useDialog,\n  NPagination,\n} from \"naive-ui\";\nimport {\n  computed,\n  onMounted,\n  ref,\n  useAttrs,\n  useSlots,\n  h,\n  unref,\n  watchEffect,\n  watch,\n} from \"vue\";\nimport { SearchOutline, ReloadOutline } from \"../../icon\";\nconst loading = ref(false);\nconst slots = useSlots();\nconst attrs = useAttrs();\nconst dialog = useDialog();\nconst emit = defineEmits([\n  \"search\",\n  \"success\",\n  \"finally\",\n  \"rowLoad\",\n  \"rowExpand\",\n  \"onUpdateChecked\",\n]);\nconst props = defineProps({\n  config: {\n    type: [Object, Function],\n    default: () => {},\n  },\n});\n/* 搜索项 */\nconst searchItems = computed(() => {\n  return props?.config?.params?.columns?.length > 0\n    ? props?.config?.params?.columns\n    : [];\n});\n/* 标题 */\nconst getTitle = computed(() => {\n  let titleValue = props?.config?.table?.title || \"\";\n  if (Object.prototype.toString.call(titleValue) === \"[object Function]\") {\n    return titleValue();\n  } else {\n    return titleValue;\n  }\n});\n/* 请求参数 */\nconst params = ref({});\n/* 表格列 */\nconst tableColumns = ref([]);\n/* 计算表格宽度 */\nlet tableWidth = ref(0);\n/* 页码 */\nconst pagination = ref({\n  page: 1,\n  pageSize: 10,\n  pageSizeOptions: [1, 5, 10, 20, 50],\n  itemCount: 0,\n  isDel: 0,\n});\n/* pageSize改变 */\nfunction handleSizeChange(val) {\n  pagination.value.pageSize = val;\n  getTableData();\n}\n/* page发生变化 */\nfunction pageChange(n) {\n  pagination.value.page = n;\n  getTableData();\n}\n/* 搜索内容发生变化 */\nfunction paramsChange(item) {\n  props?.config?.params?.change?.(params.value, item);\n}\n\nlet dataList = ref([]);\nlet pageData = ref({});\n\n/* 初始化参数 */\nfunction initParams() {\n  if (searchItems.value.length) {\n    searchItems.value.forEach((item) => {\n      if (item.type === \"input\") {\n        params.value[item.propName] =\n          item?.defaultValue?.xnsk_admin_ui_realValue || \"\";\n      } else if (item.type === \"select\") {\n        params.value[item.propName] =\n          item.defaultValue === \"\" || item.defaultValue === undefined\n            ? null\n            : item.defaultValue?.xnsk_admin_ui_realValue;\n      }\n    });\n  }\n}\n/* 初始化列 */\nfunction initTableColumns() {\n  let _columns = props?.config?.table?.columns || [];\n  tableColumns.value = _columns.map((item, index) => {\n    let obj = {\n      ellipsis: !item.unEllipsis\n        ? {\n            tooltip: true,\n          }\n        : false,\n      align:\n        props?.config?.isTree && index === 0 ? \"left\" : item.align || \"center\",\n      titleAlign: \"center\",\n      resizable: false,\n      /* ...item, */\n    };\n    /* 自定义内容，支持String和slot */\n    if (item.customValue) {\n      obj.render = (row) => {\n        return item.customValue(row);\n      };\n    } else if (item.slot) {\n      obj.render = (row) => {\n        return h(slots[item.slot], row);\n      };\n    } else {\n      obj.render = (row) => {\n        return row[item.key] === null ||\n          row[item.key] === undefined ||\n          row[item.key] === \"\"\n          ? \"—\"\n          : row[item.key];\n      };\n    }\n    /* 操作栏统一固定右侧 */\n    if (item.key === \"actions\") {\n      obj.fixed = \"right\";\n      obj.render = (row) => {\n        let btns = [];\n        if (props?.config?.table?.actions?.length > 0) {\n          props.config.table.actions.forEach((item) => {\n            /* 判断是否显示、禁用 */\n            let _show, _disabled;\n            if (item.show?.xnsk_admin_ui_realType === \"function\") {\n              _show = item.show(row);\n            } else {\n              _show = item.show;\n            }\n            if (item.disabled?.xnsk_admin_ui_realType === \"function\") {\n              _disabled = item.disabled(row);\n            } else {\n              _disabled = item.disabled ?? false;\n            }\n\n            /* 生成按钮 */\n            let _icon;\n            let _iconType = Object.prototype.toString.call(item.icon);\n            if (_iconType === \"[object String]\") {\n              //图片icon\n              _icon = h(\n                \"img\",\n                {\n                  src: item.icon,\n                },\n                { default: () => \"\" },\n              );\n            } else if (_iconType === \"[object Object]\") {\n              //组件icon\n              _icon = item.icon;\n            }\n            /* 判断loading */\n            /*  let _loading;\n            if (\n              Object.prototype.toString.call(item.loading) ===\n              \"[object Function]\"\n            ) {\n              _loading = unref(item.loading());\n            } else {\n              _loading = unref(item.loading);\n            } */\n            (_show || _show === undefined) &&\n              btns.push(\n                h(\n                  NButton,\n                  {\n                    size: \"small\",\n                    /* loading: _loading, */\n                    quaternary: true,\n                    type: item.type || \"primary\",\n                    disabled: _disabled,\n                    onClick: () => {\n                      if (item?.autoWarn) {\n                        dialog.warning({\n                          title: `确定${item.label}`,\n                          content: \"\",\n                          positiveText: \"确定\",\n                          negativeText: \"取消\",\n                          onPositiveClick: () => {\n                            item.click(row) || null;\n                          },\n                          onNegativeClick: () => {},\n                        });\n                      } else {\n                        item.click(row) || null;\n                      }\n                    },\n                    style: \"--n-opacity-disabled: 0;\",\n                  },\n                  {\n                    default: () => [\n                      _icon &&\n                        h(NIcon, {\n                          component: _icon,\n                        }),\n                      h(\n                        \"div\",\n                        {\n                          style: `margin-left:${_icon ? 5 : 0}px;`,\n                        },\n                        {\n                          default: () => item.label,\n                        },\n                      ),\n                    ],\n                  },\n                ),\n              );\n          });\n        }\n        return h(\n          \"div\",\n          {\n            class: \"flex\",\n          },\n          {\n            default: () => [...btns],\n          },\n        );\n      };\n    }\n    return { ...obj, ...item };\n  });\n  /* 行是否可展开 */\n  if (props?.config?.expand) {\n    tableColumns.value.unshift({\n      type: \"expand\",\n      align: \"right\",\n      expandable: (rowData) => true,\n      renderExpand: props?.config?.expand,\n    });\n  }\n}\n/* 获取下拉项 */\nfunction getSelection(_arr = []) {\n  let _type = Object.prototype.toString.call(_arr);\n  if (_type === \"[object Array]\") {\n    return _arr;\n  } else if (_type === \"[object Object]\") {\n    let _keys = Object.keys(_arr);\n    let res = _keys.map((key) => {\n      return {\n        label: _arr[key],\n        value: key,\n      };\n    });\n    return res;\n  }\n}\n\n/* 获取页面数据 */\nfunction getTableData(newParams = {}, callback = null) {\n  /* newParams合并到当前搜索条件中 */\n  params.value = { ...params.value, ...newParams };\n\n  if (props?.config?.data?.xnsk_admin_ui_realValue?.length > 0) {\n    if (props?.config?.isTree) {\n      let data_ = props.config.data.xnsk_admin_ui_realValue.map((i) => {\n        return { ...i, randomId: getRandomId() };\n      });\n      dataList.value = addRandomID(data_);\n    } else {\n      dataList.value = props.config.data.xnsk_admin_ui_realValue;\n    }\n    pagination.value.itemCount =\n      props.config.data.xnsk_admin_ui_realValue.length;\n    return;\n  }\n  if (!props.config.apiName) return;\n  loading.value = true;\n  props.config\n    .apiName({\n      ...params.value,\n      pageNum: pagination.value.page,\n      pageSize: pagination.value.pageSize,\n    })\n    .then((res) => {\n      callback && callback(res);\n      if (res.status === 200) {\n        let list_ = res?.list || res?.data?.list || [];\n        if (props?.config?.isTree) {\n          dataList.value = list_.map((i) => {\n            return { ...i, getRandomId: getRandomId() };\n          });\n        } else {\n          dataList.value = list_;\n        }\n        pageData.value = res || {};\n        pagination.value.itemCount = res.total || res.data.total;\n        pagination.value.page = res.pageNum || res.data.pageNum;\n        emit(\"success\", pageData.value);\n      } else {\n        props?.config?.showErrMsg && $message.error(res.message);\n      }\n    })\n    /*    .catch((err) => {\n      err.message && $message.error(err.message);\n    }) */\n    .finally(() => {\n      loading.value = false;\n      emit(\"finally\");\n    });\n}\n/* onload事件 */\nfunction onLoad(row) {\n  return new Promise((resolve, reject) => {\n    emit(\"rowLoad\", row, (data = []) => {\n      row.children = data.map((i) => {\n        return { ...i };\n      });\n      resolve();\n    });\n  });\n}\n/* 树形，默认展开的行 */\nconst getExpandedRow = computed(() => {\n  if (props?.config?.expandedIndex !== undefined) {\n    return (\n      dataList.value[props.config?.expandedIndex]?.did ??\n      dataList.value[props.config?.expandedIndex]?.id ??\n      dataList.value[props.config?.expandedIndex]?.randomId ??\n      \"\"\n    );\n  } else {\n    return null;\n  }\n});\n/* function getExpandedRow() {\n  if (props?.config?.expandedIndex !== undefined) {\n    return dataList.value[props.config?.expandedIndex]?.getRandomId;\n  }\n} */\n\n/* 搜索 */\nfunction searchClick() {\n  pagination.value.page = 1;\n  getTableData();\n  emit(\"search\");\n}\n/* 重置查询条件 */\nasync function searchReset() {\n  for (let p in params.value) {\n    let findItem = searchItems.value.find((i) => i.propName === p);\n    if (findItem) {\n      if (!findItem?.readOnly?.realValue && !findItem?.hidden?.realValue) {\n        params.value[p] = findItem?.defaultValue?.realValue ?? null;\n      }\n    }\n  }\n  searchClick();\n  emit(\"search\");\n}\n\n/* 表格头部按钮是否显示 */\nfunction getHeadBtnShow(item) {\n  if (!item?.show) {\n    return true;\n  } else {\n    if (item.show?.xnsk_admin_ui_realType === \"function\") {\n      return unref(item.show());\n    } else {\n      return unref(item.show);\n    }\n  }\n}\n\n/* 表格头部按钮是否禁用 */\nfunction getHeadBtnDisabled(item) {\n  if (!item?.disabled) {\n    return false;\n  } else {\n    if (item.disabled?.xnsk_admin_ui_realType === \"function\") {\n      return unref(item.disabled());\n    } else {\n      return unref(item.disabled);\n    }\n  }\n}\n\n/* 获取按钮loading */\nfunction getButtonLoading(_value) {\n  if (_value?.xnsk_admin_ui_realType === \"function\") {\n    return unref(_value());\n  } else {\n    return unref(_value);\n  }\n}\n\n/* 可勾选时，勾选更新 */\nfunction handleCheckedRowKeys(keys) {\n  if (props.config?.onUpdateChecked?.xnsk_admin_ui_realType === \"function\") {\n    props.config.onUpdateChecked(keys);\n  } else {\n    emit(\"onUpdateChecked\", keys);\n  }\n}\n\nonMounted(() => {\n  initParams();\n  initTableColumns();\n  !props.config?.unLoad && getTableData();\n  tableWidth.value = tableColumns.value.reduce((a, b) => {\n    return a + (b.minWidth || b.width || 0);\n  }, 0);\n});\nwatchEffect(() => {\n  if (props.config?.data?.xnsk_admin_ui_realType === \"asyncfunction\") {\n    props.config?.data?.().then((res) => {\n      dataList.value = res;\n    });\n  } else if (props.config?.data !== undefined) {\n    getTableData();\n  }\n});\ndefineExpose({\n  getTableData,\n  refresh: getTableData,\n  pageData,\n  loading,\n  params,\n});\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.text-left) {\n  text-align: left !important;\n}\n:deep(.text-right) {\n  text-align: right !important;\n}\n\n:deep(.text-red) {\n  color: #d03050;\n}\n:deep(.text-blue) {\n  color: #257ff7;\n}\n:deep(.text-green) {\n  color: #18a058;\n}\n:deep(.text-grey) {\n  color: #999999;\n}\n:deep(.n-data-table__pagination) {\n  position: sticky;\n  bottom: -20px;\n  padding: 20px 20px;\n  background-color: #fff;\n  z-index: 99;\n}\n.list-page {\n  position: relative;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  &.noPadding {\n    .list-page-content {\n      padding: 0;\n    }\n  }\n  .list-page-content {\n    flex: 1;\n    overflow: auto;\n    padding: 20px 24px;\n  }\n\n  .list-page-table-pagination {\n    padding: 20px 20px;\n    justify-content: flex-end;\n    position: sticky;\n    bottom: 0;\n    z-index: 1;\n    background-color: #fff;\n  }\n}\n</style>\n","<!--\n  form表单组件\n\n <xnsk-form :config=\"formConfig\" :defaultValue=\"defaultValue\" />\n\ndefaultValue [Object] 默认值 \n\n config说明\n\n  labelWidth [Number]  文案宽度（px)\n  trigger [String] 校验触发方式\n  submitBtn [Ojbect] 提交按钮\n    {\n      label [String] 按钮文案\n      loading [Proxy(Boolean)] 按钮loading ，响应式Boolean\n      click [Function] 表单校验成功后的回调\n    }\n  columns [Array] 表单项\n    {\n      label [String] 文案\n      type [String] 类型（input,textarea,select,radio,checkBox）\n      propName [String] 属性名\n      required [Boolean] 是否必填\n      maxlength [Number] 最大长度\n      //defaultValue 默认值 \n      show [Function | Boolean] 是否显示\n      disabled [Function | Boolean] 是否禁用\n      readonly [Function | Boolean] 是否只读\n      rows [Number] textarea默认行数\n      selection [Array] select,radio,checkBox的备选项\n      validator 自定义校验规则\n    }\n\n  slot:\n    btns  自定义底部按钮\n\n-->\n<template>\n  <div>\n    <n-form\n      :model=\"formResult\"\n      :rules=\"rules\"\n      :ref=\"\n        (el) => {\n          formId = el;\n        }\n      \"\n      label-placement=\"left\"\n      :label-width=\"config.labelWidth || 'auto'\"\n      require-mark-placement=\"right\"\n    >\n      <n-grid x-gap=\"12\" :cols=\"24\">\n        <n-gi\n          v-for=\"item in getItems\"\n          :class=\"{ 'is-slot': item.type === 'slot' && !item.useFormItem }\"\n          :key=\"item.propName\"\n          :span=\"item.span\"\n          :offset=\"item.offset\"\n        >\n          <n-form-item\n            :label=\"\n              item.type === 'slot' && !item.useFormItem ? null : item.label\n            \"\n            :path=\"item.propName\"\n          >\n            <!-- 单行输入框 -->\n            <n-input\n              v-trim\n              v-if=\"item.type === 'input'\"\n              v-model:value=\"formResult[item.propName]\"\n              :placeholder=\"getPlaceholder(item)\"\n              :maxlength=\"item.maxlength || 20\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              @update:value=\"(e) => changePropName(e, item)\"\n            />\n            <!-- 可输入，可选择 -->\n            <n-select\n              v-if=\"item.type === 'input-select'\"\n              class=\"input-select-select\"\n              :value=\"formResult[item.propName]\"\n              :options=\"getSelection(item)\"\n              :placeholder=\"getPlaceholder(item)\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              show-on-focus\n              filterable\n              tag\n              :ignore-composition=\"false\"\n              @input=\"\n                (e) => {\n                  formResult[item.propName] = e.target.value;\n                }\n              \"\n              @update:value=\"\n                (e) => {\n                  formResult[item.propName] = e;\n                }\n              \"\n            />\n            <!-- 多行输入 -->\n            <n-input\n              v-trim\n              v-if=\"item.type === 'textarea'\"\n              v-model:value=\"formResult[item.propName]\"\n              type=\"textarea\"\n              :placeholder=\"getPlaceholder(item)\"\n              :maxlength=\"item.maxlength || 200\"\n              :rows=\"item.rows || 9\"\n              show-count\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              @update:value=\"(e) => changePropName(e, item)\"\n            />\n            <!-- 选择框 -->\n            <n-select\n              v-if=\"item.type === 'select'\"\n              v-model:value=\"formResult[item.propName]\"\n              :options=\"getSelection(item)\"\n              :placeholder=\"getPlaceholder(item)\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              @update:value=\"(e) => changePropName(e, item)\"\n            />\n            <!-- 单选框 -->\n            <n-radio-group\n              v-if=\"item.type === 'radio'\"\n              v-model:value=\"formResult[item.propName]\"\n              @update:value=\"(e) => changePropName(e, item)\"\n              :name=\"item.propName\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n            >\n              <n-space>\n                <n-radio\n                  v-for=\"selectionItem in getSelection(item)\"\n                  :key=\"selectionItem.value\"\n                  :value=\"selectionItem.value\"\n                >\n                  {{ selectionItem.label }}\n                </n-radio>\n              </n-space>\n            </n-radio-group>\n            <!-- 复选框 -->\n            <n-checkbox-group\n              v-if=\"item.type === 'checkbox'\"\n              v-model:value=\"formResult[item.propName]\"\n            >\n              {{ formResult[item.propName] }}\n              <n-space item-style=\"display: flex;\">\n                <n-checkbox\n                  v-for=\"item in getSelection(item)\"\n                  :key=\"item.value\"\n                  :value=\"item.value\"\n                  :label=\"item.label\"\n                />\n              </n-space>\n            </n-checkbox-group>\n            <!-- 提示文字 -->\n            <span v-if=\"item.type === 'text'\" :style=\"item.style\">\n              {{\n                item.text?.xnsk_admin_ui_realType === \"function\"\n                  ? item.text()\n                  : item.text\n              }}\n            </span>\n            <slot\n              v-if=\"item.type === 'slot'\"\n              :name=\"item.propName\"\n              :data=\"formResult\"\n              :item=\"item\"\n            ></slot>\n          </n-form-item>\n        </n-gi>\n      </n-grid>\n    </n-form>\n    <div v-if=\"!slot.btns\" class=\"form-btns\">\n      <n-button\n        v-if=\"config?.submitBtn\"\n        class=\"btn\"\n        type=\"primary\"\n        :loading=\"submitLoading\"\n        @click=\"submitClick\"\n      >\n        {{ config?.submitBtn?.label || \"确定\" }}\n      </n-button>\n      <n-button v-if=\"config?.submitBtn\" @click=\"cancelClick\"> 取消 </n-button>\n    </div>\n    <slot v-if=\"slot.btns\" name=\"btns\"></slot>\n  </div>\n</template>\n\n<script setup>\nimport {\n  NForm,\n  NFormItem,\n  NGrid,\n  NGi,\n  NCheckboxGroup,\n  NCheckbox,\n  NRadioGroup,\n  NRadio,\n  NButton,\n  NSelect,\n  NInput,\n  NMention,\n} from \"naive-ui\";\nimport {\n  computed,\n  onMounted,\n  ref,\n  unref,\n  useAttrs,\n  useSlots,\n  watchEffect,\n  watch,\n} from \"vue\";\nimport { getRandomId, getParentNode } from \"../../utils\";\n\nconst errMsgPrefix = {\n  \"input-select\": \"请输入\",\n  input: \"请输入\",\n  textarea: \"请输入\",\n  select: \"请选择\",\n  radio: \"请选择\",\n  checkbox: \"请选择\",\n  slot: \"缺少\",\n};\nconst formId = ref(\"from_\" + getRandomId());\n\nconst slot = useSlots();\nconst emit = defineEmits([\"submit\", \"cancel\", \"change\"]);\nconst attrs = useAttrs();\nconst props = defineProps({\n  config: {\n    type: Object,\n    default: {},\n  },\n  defaultValue: {\n    type: Object,\n    default: {},\n  },\n});\n/* form结果 */\nconst formResult = ref({});\n/* 校验 */\nconst rules = ref({});\n/* loading */\nconst submitLoading = computed(() => {\n  if (props.config?.submitBtn?.loading) {\n    return props.config.submitBtn.loading?.xnsk_admin_ui_realType === \"function\"\n      ? unref(props.config.submitBtn.loading())\n      : unref(props.config.submitBtn.loading);\n  } else {\n    return false;\n  }\n});\n/* 表单项 */\nconst getItems = computed(() => {\n  let arr = [];\n  if (props.config?.columns?.length > 0) {\n    props.config.columns.forEach((item) => {\n      let obj = {};\n      obj.label = item.label;\n      obj.type = item.type;\n      obj.useFormItem = item.useFormItem || false;\n      obj.propName = item.propName;\n      obj.required = item.required;\n      obj.maxlength = item.maxlength;\n      obj.rows = item.rows || 9;\n      obj.validator = item.validator || null;\n      obj.trigger = item.trigger || props.config?.trigger || \"blur\";\n      obj.selection = item.selection || [];\n      obj.span = item.span || 24;\n      obj.offset = item.offset || 0;\n      obj.onInput = item.onInput || null;\n\n      obj.text = item.text || \"\";\n      obj.style = item.style || \"\";\n\n      /* 备选项 */\n      //注释掉，不能在这里写，如果备选项是异步获取并且网速极慢，会在填写表单时重置表单，因为计算属性重新执行了\n      /* if (item.type === \"select\") {\n        obj.selection =\n          item.selection.xnsk_admin_ui_realType === \"function\"\n            ? unref(item.selection())\n            : unref(item.selection);\n      } */\n\n      /* 如果必填，加入校验 */\n      let ruleObject = {\n        required: obj?.required,\n        trigger: obj.trigger,\n        key: obj?.propName,\n        validator(rule, value) {\n          if (obj?.validator?.xnsk_admin_ui_realType === \"function\") {\n            //如果传函数\n            return obj?.validator(value);\n          } else if (obj?.validator?.xnsk_admin_ui_realType === undefined) {\n            //如果不传\n            if (obj?.required && [null, undefined, \"\"].includes(value)) {\n              //不传校验规则，但设置了必填，则只判断空值\n              return new Error(`${errMsgPrefix[obj.type]}${obj.label}`);\n            } else if (\n              value?.xnsk_admin_ui_realType === \"array\" &&\n              value.length === 0\n            ) {\n              //如果是数组，长度为0也报异常\n              return new Error(`${errMsgPrefix[obj.type]}${obj.label}`);\n            } else {\n              //不传校验规则，没有设置必填，或当前有值，则为true\n              return true;\n            }\n          }\n        },\n      };\n      rules.value[obj.propName] = ruleObject;\n\n      /* 是否禁用 */\n      if (item.disabled !== undefined) {\n        let isDisabled =\n          item.disabled?.xnsk_admin_ui_realType === \"function\"\n            ? item.disabled()\n            : item.disabled;\n        isDisabled && (obj.disabled = true);\n      }\n      /* 是否只读 */\n      if (item.readonly !== undefined) {\n        let isReadonly =\n          item.readonly?.xnsk_admin_ui_realType === \"function\"\n            ? item.readonly()\n            : item.readonly;\n        isReadonly && (obj.readonly = true);\n      }\n\n      /* 是否显示 */\n      let isShow =\n        item.show === undefined ||\n        (item.show?.xnsk_admin_ui_realType === \"function\"\n          ? item.show(formResult.value)\n          : item.show);\n      isShow && arr.push(obj);\n    });\n    return arr;\n  }\n});\n\n/* 初始化字段 */\ninitForm();\nwatchEffect(() => {\n  let keys = Object.keys(props.defaultValue);\n  keys.forEach((key) => {\n    let findItem = props.config?.columns.find((item) => item.propName === key);\n    findItem && (formResult.value[key] = getDefaultValue(findItem));\n  });\n});\n/* watch(\n  () => JSON.stringify(props.defaultValue),\n  () => {\n    let keys = Object.keys(props.defaultValue);\n    keys.forEach((key) => {\n      let findItem = props.config?.columns.find(\n        (item) => item.propName === key\n      );\n      findItem && (formResult.value[key] = getDefaultValue(findItem));\n    });\n  },\n  {\n    deep: true,\n  }\n); */\nfunction initForm() {\n  let items = props.config?.columns || [];\n  items.forEach((item) => {\n    switch (item.type) {\n      case \"input\":\n      case \"textarea\":\n        item.propName && (formResult.value[item.propName] = \"\");\n        break;\n      case \"select\":\n        item.propName && (formResult.value[item.propName] = null);\n        break;\n    }\n  });\n}\n/* 处理提示语 */\nfunction getPlaceholder(item) {\n  /* 如果未传入placeholder */\n  if (!item.placeholder) {\n    if (item.type === \"select\") {\n      return `请选择${item.label}`;\n    } else {\n      return `请输入${item.label}`;\n    }\n  } else {\n    return item.placeholder;\n  }\n}\n/* 处理备选项 */\nfunction getSelection(item) {\n  let res =\n    item.selection?.xnsk_admin_ui_realType === \"function\"\n      ? unref(item.selection())\n      : unref(item.selection);\n  if (res.xnsk_admin_ui_realType === \"array\") {\n    return res;\n  } else {\n    let keys = Object.keys(res);\n    return keys.map((key) => {\n      return {\n        label: res[key],\n        value: key,\n      };\n    });\n  }\n}\n/* 获取默认值 */\nfunction getDefaultValue(item) {\n  return (\n    props.defaultValue?.[item.propName] ?? (item.type === \"select\" ? null : \"\")\n  );\n}\n\n/* 点击取消 */\nfunction cancelClick() {\n  if (props?.config?.cancelBtn?.click) {\n    props.config.cancelBtn.click();\n  } else {\n    emit(\"cancel\");\n  }\n}\n\n//监听change\nfunction changePropName(val, item) {\n  if (item?.onInput?.xnsk_admin_ui_realType === \"function\") {\n    let res = item?.onInput?.(val);\n    if (res !== undefined) {\n      formResult.value[item.propName] = res;\n    }\n  }\n  //通知更新，返回最终结果\n  if (props.config?.change) {\n    props.config?.change(unref(formResult.value), item, val);\n  } else {\n    emit(\"change\", unref(formResult.value), item, val);\n  }\n  //通知更新，返回修改项\n}\n/* 点击提交 */\nfunction submitClick() {\n  formId.value?.validate((errors) => {\n    if (!errors) {\n      if (props.config?.submitBtn?.click) {\n        $dialog.warning({\n          title: \"确定提交？\",\n          content: \"\",\n          positiveText: \"确定\",\n          negativeText: \"取消\",\n          onPositiveClick: () => {\n            props.config?.submitBtn?.click(unref(formResult.value));\n          },\n          onNegativeClick: () => {},\n        });\n      } else {\n        $dialog.warning({\n          title: \"确定提交？\",\n          content: \"\",\n          positiveText: \"确定\",\n          negativeText: \"取消\",\n          onPositiveClick: () => {\n            emit(\"submit\", unref(formResult.value));\n          },\n          onNegativeClick: () => {},\n        });\n      }\n    } else {\n      /* 不通过 */\n    }\n  });\n}\n/* 外部使用，校验方法 */\nfunction validate(fn, key) {\n  if (key?.xnsk_admin_ui_realType === undefined) {\n    formId.value?.validate((errors) => fn && fn(errors));\n  } else {\n    let keys = key.xnsk_admin_ui_realType === \"string\" ? [key] : key;\n    formId.value?.validate(\n      (errors) => {\n        fn && fn(errors);\n      },\n      (rule) => {\n        return keys.includes(rule?.key);\n      },\n    );\n  }\n}\n/* 外部使用，获取表单数据*/\nfunction getValue() {\n  return formResult.value;\n}\n/* 外部使用，手动改变组件内部值 */\nfunction setValue(val = {}) {\n  let keys = Object.keys(val);\n  keys.forEach((key) => {\n    formResult.value[key] = val[key];\n  });\n}\ndefineExpose({\n  validate,\n  getValue,\n  setValue,\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.form-btns {\n  display: flex;\n  justify-content: center;\n  position: sticky;\n  bottom: -20px;\n  background-color: #fff;\n  z-index: 100;\n  padding: 20px;\n  .btn {\n    margin: 0 30px;\n  }\n}\n\n.is-slot {\n  :deep(.n-form-item-feedback-wrapper) {\n    display: none;\n  }\n}\n</style>\n","<!--\n    详情页组件\n    //使用24宫格布局，默认3列，每列8格\n      config\n        title [String]: 标题\n        data [Object]: 数据\n        labelWidth [Number]://label宽度px（如果需要label右对齐，该值必传）\n        labelAlign [String]: //label对齐方式，left | center | right,\n        border [Boolean]: 是否有border\n        column [Array]: 展示的字段\n          label [String]:文案\n          value [String | Function]:字段名\n          span [Number]:所占的单元格数\n          slot [Component]:插槽\n          注意：value只支持String和Function类型。String表示data中的字段名，Function表示自定义值\n        \n\n-->\n<template>\n  <div>\n    <BlueTitle\n      class=\"marT5 marB15\"\n      v-if=\"config.title\"\n      :title=\"config.title || ''\"\n    />\n    <n-grid :class=\"{ 'has-border': config?.border }\">\n      <n-gi\n        class=\"info-page-item flex items-baseline\"\n        v-for=\"(item, index) in config?.column || []\"\n        :key=\"item?.did || index\"\n        :span=\"item.span ?? 8\"\n      >\n        <!-- laben -->\n        <template v-if=\"item.labelSlot\">\n          <slot :name=\"item.labelSlot\"></slot>\n        </template>\n        <span\n          class=\"info-page-label inline-block padT10 padB10 padR10\"\n          else\n          :style=\"{\n            minWidth: config.labelWidth ? config.labelWidth + 'px' : 'auto',\n            'text-align': config.labelAlign ?? 'left',\n          }\"\n        >\n          {{ item.label }}{{ config?.useColon ? \":\" : \"\" }}\n        </span>\n        <!-- 值 -->\n        <template v-if=\"item.slot\">\n          <slot :name=\"item.slot\"></slot>\n        </template>\n        <span class=\"info-page-value inline-block marL5 padR10 break-all\" else>\n          {{ getItemValue(item.value) }}\n        </span>\n      </n-gi>\n    </n-grid>\n  </div>\n</template>\n\n<script setup>\nimport { useAttrs } from \"vue\";\nimport { BlueTitle } from \"../index\";\nimport { NGrid, NGi } from \"naive-ui\";\nconst attrs = useAttrs();\nconst props = defineProps({\n  config: {\n    type: Object,\n    defualt: () => {},\n  },\n  data: {\n    type: Object,\n    defualt: () => {},\n  },\n});\n/* 处理值 */\nfunction getItemValue(_value) {\n  if (typeof _value === \"string\") {\n    if (props.data) {\n      return props?.data[_value] || \"-\";\n    } else {\n      return props.config?.data[_value] || \"-\";\n    }\n  } else if (Object.prototype.toString.call(_value) === \"[object Function]\") {\n    return _value();\n  } else {\n    return \"\";\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.has-border) {\n  border-top: 1px solid #efeff5;\n  border-right: 1px solid #efeff5;\n  .info-page-item {\n    border-bottom: 1px solid #efeff5;\n    .info-page-label {\n      background-color: #f9f9f9;\n    }\n  }\n}\n</style>\n","<!--\n  .md文件解析\n  value 值\n  type 解析类型。url: 地址解析，组件加载资源并解析。value: 内容解析，组件只解析内容\n-->\n<template>\n  <div class=\"markdown-view overflow-hidden html-default-css\">\n    <n-spin class=\"loading\" v-show=\"!done\" size=\"large\" />\n    <div\n      v-if=\"value\"\n      v-html=\"valueResult\"\n      style=\"padding: 20px; border-radius: 6px\"\n    ></div>\n    <n-empty v-else description=\"无数据\" style=\"margin-top: 60px\"></n-empty>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"XnskMdPreview\",\n};\n</script>\n<script setup>\nimport { getFileContentByUrl } from \"../../utils\";\nimport { ref, watchEffect } from \"vue\";\nimport { NSpin, NEmpty } from \"naive-ui\";\n/* md解析器 */\n// const MarkdownIt = require(\"markdown-it\");\nimport MarkdownIt from \"markdown-it\";\nconst md = new MarkdownIt();\n/* 参数 */\nconst props = defineProps({\n  value: {\n    type: String,\n    default: \"\",\n  },\n  type: {\n    type: String,\n    default: \"url\",\n  },\n});\n/* 是否解析完 */\nlet done = ref(true);\n/* md文档解析结果 */\nlet valueResult = ref(\"\");\n/* 根据地址获取md文档内容，并解析 */\nasync function getFilel() {\n  done.value = false;\n  valueResult.value = \"\";\n  let data = await getFileContentByUrl(props.value);\n  data && (valueResult.value = md.render(data));\n  done.value = true;\n}\n\n/* 判断type是否为url */\nwatchEffect(() => {\n  if (props.value) {\n    if (props.type === \"url\") {\n      getFilel();\n    } else {\n      valueResult.value = md.render(props.value);\n    }\n  } else {\n    valueResult.value = \"\";\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../css/htmlDefault.scss\";\n\n.markdown-view {\n  min-height: 200px;\n  background: #fafafa;\n  border-radius: 6px;\n  position: relative;\n  word-break: break-all;\n\n  .loading {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n  }\n\n  :deep(*) {\n    white-space: pre-wrap !important;\n  }\n}\n</style>\n","<template>\n  <div>\n    <n-checkbox\n      :default-checked=\"checked\"\n      @update:checked=\"updateCheck\"\n    ></n-checkbox>\n    请阅读\n    <span\n      class=\"cursor-pointer\"\n      style=\"color: #2d8cf0\"\n      v-for=\"(item, index) in agreementList\"\n      :key=\"item.did || index\"\n      @click=\"openAgreementUrl(item.agreementUrl)\"\n    >\n      《{{ item.agreementName }}》 </span\n    >，并同意\n  </div>\n</template>\n<script setup>\nimport { ref } from \"vue\";\nimport { NCheckbox } from \"naive-ui\";\nimport hp from \"houriprotocol\";\nconst emit = defineEmits([\"update:checked\"]);\nconst props = defineProps({\n  checked: {\n    type: Boolean,\n    default: false,\n  },\n});\n\n// 协议数据\nconst agreementList = ref([]);\nfunction getAgreementData() {\n  hp.init({\n    projectId: \"20230704143829127\",\n    sceneCode: \"scdl\",\n    debug: true,\n    authContext: \"https://xnsk.mapfarm.com\",\n    userId: \"\",\n  })\n    .then((res) => {\n      agreementList.value = res?.agreementList ?? [];\n    })\n    .catch((err) => {\n      console.log(err.message || err.msg || \"系统异常\");\n      $message.error(err.message || err.msg || \"系统异常\");\n    });\n}\ngetAgreementData();\n\n//打开协议\nfunction openAgreementUrl(url) {\n  url && window.open(url);\n}\n\n//更新\nfunction updateCheck(v) {\n  emit(\"update:checked\", v);\n}\n</script>\n","<!--\n    案例：\n    <XnskTreeSync\n        v-model:value=\"treeSelect\"\n        :treeData=\"treeData\"\n        search\n        checkable\n      />\n    说明：\n    v-model:value: 双向绑定选择结果\n    treeData: 树形数据\n    search: 可搜索\n    checkable: 可选\n    key: 指定唯一标识，默认did\n    label: 指定显示文案，默认name\n    childrenKey: 指定children字段，默认children\n\n    @click: 点击树事件\n-->\n<template>\n  <div>\n    <n-input\n      class=\"marB10\"\n      v-model:value=\"pattern\"\n      placeholder=\"搜索\"\n      clearable\n      v-if=\"search\"\n    />\n    <n-tree\n      :ref=\"\n        (el) => {\n          formId = el;\n        }\n      \"\n      block-line\n      :data=\"localTreeData\"\n      :default-checked-keys=\"\n        (value || []).filter((i) => i[1] === 1).map((i) => i[0])\n      \"\n      :indeterminate-keys=\"\n        (value || []).filter((i) => i[1] === 0).map((i) => i[0])\n      \"\n      :key-field=\"dataKey\"\n      :label-field=\"label\"\n      :children-field=\"childrenKey\"\n      :pattern=\"pattern\"\n      :checkable=\"checkable\"\n      :node-props=\"nodeProps\"\n      :cancelable=\"cancelable\"\n      cascade\n      selectable\n      :show-irrelevant-nodes=\"false\"\n      v-bind=\"attrs\"\n      @update:checked-keys=\"upDateChecked\"\n      @update:indeterminate-keys=\"upDateHalfChecked\"\n      @update:selected-keys=\"upDateSelected\"\n    />\n  </div>\n</template>\n<script setup>\nimport { computed, ref, unref, useAttrs } from \"vue\";\nimport { childrenEmptyToNull, getRandomId } from \"../../utils\";\nimport { NInput, NTree } from \"naive-ui\";\nconst formId = ref(\"tree_\" + getRandomId());\nconst props = defineProps({\n  value: {\n    type: Array,\n    default: [],\n  },\n  treeData: {\n    type: Array,\n    default: [],\n  },\n  dataKey: {\n    type: String,\n    default: \"did\",\n  },\n  label: {\n    type: String,\n    default: \"name\",\n  },\n  childrenKey: {\n    type: String,\n    default: \"children\",\n  },\n  checkable: {\n    type: Boolean,\n    default: false,\n  },\n  search: {\n    type: Boolean,\n    default: false,\n  },\n  cancelable: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits([\"click\", \"update:value\", \"select\"]);\nconst attrs = useAttrs();\nconst pattern = ref(\"\"); //筛选\n\n//转为本地数据，处理children为[]的情况\nconst localTreeData = computed(() =>\n  childrenEmptyToNull(props.treeData, props.childrenKey || \"children\"),\n);\n\n/* const localTreeData = computed(() => {\n  let childrenKey = props.childrenKey || \"children\";\n  let data = unref(props.treeData);\n  function setNullForEmptyChildren(node) {\n    if (node?.[childrenKey]?.length === 0) {\n      node[childrenKey] = null;\n    } else if (node?.[childrenKey]) {\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child));\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i));\n  setNullForEmptyChildren(data);\n  return data;\n}); */\n\n//更新全选数据\nfunction upDateChecked(keys, options, meta) {\n  emit(\"update:value\", mergeValue());\n}\n//更新半选数据\nfunction upDateHalfChecked(keys, options, meta) {\n  emit(\"update:value\", mergeValue());\n}\n//合并全选、半选数据\nfunction mergeValue() {\n  let arr1 = formId.value.getCheckedData()?.keys ?? [];\n  let arr2 = formId.value.getIndeterminateData().keys ?? [];\n  let res1 = arr1.map((i) => {\n    return [i, 1];\n  });\n  let res2 = arr2.map((i) => {\n    return [i, 0];\n  });\n  return [...res1, ...res2];\n}\n//更新选中\nfunction upDateSelected(keys, options, meta) {\n  emit(\"select\", keys, options, meta);\n}\n\n/* 自定义标签属性 */\nfunction nodeProps({ option }) {\n  return {\n    onClick() {\n      emit(\"click\", option);\n    },\n  };\n}\n</script>\n<style lang=\"scss\" scoped>\n:deep(.n-tree-node-switcher__icon) {\n  svg {\n    transform: scale(1.5);\n  }\n}\n</style>\n","import axios from \"axios\";\nconst post = (axios_, config_, url = \"\", data = {}, extendsConfig = {}) => {\n  axios_.interceptors.request.use((request) => {\n    if (config_.beforeRequest) {\n      config_.beforeRequest(request, extendsConfig ?? {});\n    }\n    return request;\n  });\n  return new Promise((resolve, reject) => {\n    axios_\n      .post(url, data)\n      .then((request) => {\n        if (request.data?.status !== 200) {\n          config_?.onError?.(request.data, extendsConfig ?? {});\n        }\n        resolve(request.data);\n      })\n      .catch((err) => {\n        config_?.onNetWorkError?.(\n          err?.response ?? {\n            data: {\n              status: 500,\n              data: null,\n              message: err?.message || \"系统异常\",\n            },\n          },\n          extendsConfig ?? {}\n        );\n        resolve(\n          err?.response?.data ?? {\n            status: 500,\n            data: null,\n            message: err.message,\n          }\n        );\n      })\n      .finally(() => {});\n  });\n};\nfunction useMiniHttp(args = null) {\n  let instance = null;\n  //配置项\n  const config = {\n    beforeRequest: null,\n    onNetWorkError: null,\n    onError: null,\n  };\n  const install = (app, config) => {\n    app.config.globalProperties.$miniHttp = create(config);\n  };\n  const create = (args = {}) => {\n    config.beforeRequest = args?.beforeRequest || null;\n    config.onNetWorkError = args?.onNetWorkError || null;\n    config.onError = args?.onError || null;\n    const config_ = {\n      baseURL: args?.baseURL || \"\",\n      timeout: args?.timeout || 60000,\n      headers: (() => {\n        let res = {};\n        let type_ = Object.prototype.toString.call(args?.headers);\n        if (type_ === \"[object Object]\") {\n          res = args.headers;\n        } else if (type_ === \"[object Function]\") {\n          res = args.headers();\n        }\n        return res;\n      })(),\n    };\n    instance = axios.create(config_);\n    /* 去掉统一配置，改为单个处理 */\n    /*  instance.interceptors.request.use((request) => {\n      if (config.beforeRequest) {\n        config.beforeRequest(request);\n      }\n      return request;\n    }); */\n    return miniHttp.bind(this);\n  };\n  // 核心部分\n  const miniHttp = (args = {}, extendsConfig = null) => {\n    let type = Object.prototype.toString.call(args);\n    if (type === \"[object Object]\") {\n      return useObject(args);\n    } else if (type === \"[object String]\") {\n      if (args.includes(\"/\")) {\n        return useString(args, extendsConfig);\n      } else {\n        return useApiCode(args, extendsConfig);\n      }\n    }\n  };\n  /* 传入对象，多个接口配置 */\n  const useObject = (args = {}) => {\n    let res = {};\n    Object.keys(args).forEach((key) => {\n      let type_ = Object.prototype.toString.call(args[key]);\n      if (type_ === \"[object String]\") {\n        if (args[key].includes(\"/\")) {\n          res[key] = useString(args[key]);\n        } else {\n          res[key] = useApiCode(args[key]);\n        }\n      } else if (type_ === \"[object Array]\") {\n        if (args[key][0].includes(\"/\")) {\n          res[key] = useString(args[key][0], args[key]?.[1]);\n        } else {\n          res[key] = useApiCode(args[key][0], args[key]?.[1]);\n        }\n      }\n    });\n    return res;\n  };\n\n  /* 处理单个URL请求 */\n  const useString = (url = \"\", extendsConfig) => {\n    return (data, EC = {}) => {\n      return post(instance, config, url, data, {\n        ...(extendsConfig || {}),\n        ...(EC || {}),\n      });\n    };\n  };\n\n  /* 新版请求方式 */\n  const useApiCode = (code = \"\", extendsConfig = {}) => {\n    return (data = {}, EC = {}) => {\n      return post(\n        instance,\n        config,\n        \"/less/api/auth/common\",\n        {\n          apiCode: code,\n          queryParam: data,\n        },\n        {\n          ...(extendsConfig || {}),\n          ...(EC || {}),\n        }\n      );\n    };\n  };\n\n  const createApiCode = () => {};\n  if (args) {\n    return create(args);\n  } else {\n    return { install, create };\n  }\n}\nexport default useMiniHttp;\n","import useMiniHttp from \"./js/index\"\nconst config = {\n  baseURL: \"\",\n  beforeRequest: (request, extendsConfig) => {\n    console.log('[ extendsConfig ] >', extendsConfig)\n    const { token = \"\" } = extendsConfig\n    request.headers.Authorization = token\n    request.headers.appcode = \"xnsk_admin_ui\"\n    const ct =\n      extendsConfig?.[\"Content-Type\"] ?? \"application/json;charset=UTF-8\"\n    request.headers[\"Content-Type\"] = ct\n  },\n  /* 网络异常 */\n  onNetWorkError: (response, extendsConfig) => {\n    console.log(' 异常 >', response, extendsConfig)\n  },\n  /* 业务异常  */\n  onError: (res, extendsConfig) => {\n    console.log(' 异常 >', res, extendsConfig)\n  },\n}\nconst http = useMiniHttp(config)\nexport default http\n","<!--\n    文件上传\n\n    案例：\n    <XnskUploadFile>\n        <template #uploadBtn>\n            <n-button type=\"primary\">点击上传</n-button>\n        </template>\n    </XnskUploadFile>\n\n    参数：\n      autoUpload: 选择完成后是否自动上传\n\n    事件：\n      change: 文件上传完成回调\n      fileChange: 文件选择回调\n-->\n<template>\n  <div style=\"width: 100%\">\n    <n-upload\n      :ref=\"\n        (el) => {\n          refId = el;\n        }\n      \"\n      v-model:file-list=\"localFileList\"\n      @remove=\"handleRemove\"\n      :multiple=\"multipleUpload\"\n      :default-upload=\"autoUpload\"\n      :custom-request=\"customRequest\"\n      @before-upload=\"beforeUpload\"\n      @change=\"upLoadFileChange\"\n      v-bind=\"attrs\"\n    >\n      <span class=\"inline-block uploadBtn\">\n        <template v-if=\"attrs?.['list-type'] === 'image-card'\">\n          <span style=\"font-size: 40px; line-height: 20px\">+</span>\n        </template>\n        <slot v-else name=\"uploadBtn\" :loading=\"loading\"></slot>\n      </span>\n    </n-upload>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, reactive, ref, useAttrs, watch, computed } from \"vue\";\nimport { getFileNameByUrl, getSuffixName, getRandomKeys } from \"../../utils\";\nimport http from \"../../http\";\nimport { NUpload } from \"naive-ui\";\nconst attrs = useAttrs();\n/* 上传地址 */\n/* 随机数ID，为同时加载多个上传组件准备 , 后期换成 uuid*/\nconst refId = ref(\n  \"ref\" + new Date().getTime() + parseInt(Math.random() * 10000),\n);\n/* loading */\nlet loading = ref(false);\n/* 定义参数 */\nconst props = defineProps({\n  value: {\n    type: String,\n    default: \"\",\n  },\n  /* 是否显示文件列表 */\n  showFileList: {\n    type: Boolean,\n    default: () => true,\n  },\n  /* 选中文件是否直接上传 */\n  autoUpload: {\n    type: Boolean,\n    default: () => true,\n  },\n  // 是否上传多个\n  multipleUpload: {\n    type: Boolean,\n    default: () => false,\n  },\n  // obs 桶\n  bucket: {\n    type: String,\n    default: \"xnsk-base\",\n  },\n  // 存储路径\n  path: {\n    type: String,\n    default: \"base/permission\",\n  },\n  url: {\n    type: String,\n    default: \"\",\n  },\n  params: {\n    type: Object,\n    default: {},\n  },\n  token: {\n    type: String,\n    default: \"\",\n  },\n});\n/* 定义事件 */\nconst emit = defineEmits([\n  \"change\",\n  \"fileChange\",\n  \"update:value\",\n  \"update:fileList\",\n]);\n\n//组件内的文件列表\nconst localFileList = ref([]);\nwatch(\n  () => props.value,\n  (newData) => {\n    if ([null, undefined].includes(newData)) {\n      localFileList.value.splice(0);\n      return;\n    }\n    if (newData) {\n    }\n    let list = newData._split(\",\");\n    list.forEach((url) => {\n      let find_ = localFileList.value.find((file) => {\n        return file.url === url;\n      });\n      if (!find_) {\n        localFileList.value.push({\n          url: url,\n          status: \"finished\",\n        });\n      }\n    });\n  },\n  { deep: true, immediate: true },\n);\n\n/* 自定义上传 */\nconst customRequest = async ({ file, onFinish, onError }) => {\n  let formData = new FormData();\n  formData.append(\"file\", file.file);\n  formData.append(\"bucket\", props.bucket);\n  formData.append(\"pathPrefix\", props.path);\n  //扩展参数\n  let keys = Object.keys(props.params);\n  keys.forEach((key) => {\n    formData.append(key, props.params[key]);\n  });\n  let res = await http(props.url, {\n    \"Content-Type\": \"multipart/form-data;charset=UTF-8\",\n    token: props.token,\n  })(formData);\n  if (res?.status === 200) {\n    const strId = getRandomKeys(10);\n    file.url = res?.data?.url ?? \"\";\n    file.name = strId;\n    onFinish();\n  } else {\n    onError();\n  }\n};\n\n/* 文件移除 */\nfunction handleRemove(data) {}\n\nasync function beforeUpload(file) {\n  //判断格式\n  if (attrs?.accept?.indexOf(getSuffixName(file.file.name, \".\")) === -1) {\n    $message.error(\"格式不正确\");\n    return false;\n  }\n  //判断大小\n  if (file.file.size / 1024 > props.maxSize) {\n    $message.error(\"文件大小超出限制\");\n    return false;\n  }\n  return true;\n}\nfunction upLoadFileChange({ file, fileList }) {\n  let list_ = (fileList || [])\n    .filter((file) => {\n      return file.url;\n    })\n    .map((file) => {\n      return file.url;\n    });\n  emit(\"update:value\", list_.join(\",\"));\n  emit(\"update:fileList\", fileList);\n}\n\ndefineExpose({\n  submitFile: () => {\n    refId.value?.submit();\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.showFileName {\n  display: flex;\n  justify-content: space-between;\n\n  * {\n    display: inline-block;\n  }\n\n  span:first-child {\n    width: 80%;\n    padding: 5px 0;\n  }\n}\n</style>\n","//import * as inherit from \"./inherit.js\"\nimport * as extend from \"./src/components\"\nimport \"./src/css/main.css\"\n\nconst install = function (Vue, opts = {}) {\n  /* 转发naive部分 */\n  // for (let key in inherit) {\n  //   const name = \"Xnsk\" + inherit[key].name\n  //   Vue.component(name, inherit[key])\n  // }\n  /* 自定义部分 */\n  for (let key in extend) {\n    if (key.startsWith('Xnsk')) {\n      Vue.component(key, extend[key])\n    } else {\n      Vue.component('Xnsk' + key, extend[key])\n    }\n  }\n}\nexport default { install, ...extend }\n"],"names":["attrs","useAttrs","slot","useSlots","isShow","computed","props","val","cancelClick","submitClick","emit","_imports_0","writeToClipBoard","content","writeStr","resolve","reject","textarea","_type","getRandomId","len","bTime","strId","iLen","i","getRandomKeys","strRandomKeys","str","childrenEmptyToNull","arr","childrenKey","data","setNullForEmptyChildren","node","_a","child","addRandomID","getFileContentByUrl","url","xmlhttp","getSuffixName","_name","_mark","copyLog","err","fontSize","onMounted","_hoisted_1","_hoisted_2","_createVNode","_hoisted_3","SearchOutline","defineComponent","_ctx","_cache","_openBlock","_createBlock","ReloadOutline","loading","ref","slots","dialog","useDialog","searchItems","_c","_b","_e","_d","getTitle","titleValue","params","tableColumns","tableWidth","pagination","handleSizeChange","getTableData","pageChange","n","paramsChange","item","dataList","pageData","initParams","initTableColumns","_columns","index","obj","row","h","btns","_show","_disabled","_icon","_iconType","NButton","NIcon","__spreadValues","rowData","getSelection","_arr","key","newParams","callback","data_","__spreadProps","res","list_","onLoad","getExpandedRow","_j","_i","_f","_h","_g","searchClick","searchReset","__async","p","findItem","getHeadBtnShow","unref","getHeadBtnDisabled","getButtonLoading","_value","handleCheckedRowKeys","keys","a","b","watchEffect","__expose","errMsgPrefix","formId","formResult","rules","submitLoading","getItems","ruleObject","rule","value","initForm","getDefaultValue","getPlaceholder","changePropName","errors","validate","fn","getValue","setValue","getItemValue","__default__","md","MarkdownIt","done","valueResult","getFilel","agreementList","getAgreementData","hp","openAgreementUrl","updateCheck","v","pattern","localTreeData","upDateChecked","options","meta","mergeValue","upDateHalfChecked","arr1","arr2","res1","res2","upDateSelected","nodeProps","option","post","axios_","config_","extendsConfig","request","useMiniHttp","args","instance","config","install","app","create","type_","axios","miniHttp","type","useObject","useString","useApiCode","EC","code","token","ct","response","http","refId","localFileList","watch","newData","file","customRequest","_0","onFinish","onError","formData","handleRemove","beforeUpload","upLoadFileChange","fileList","Vue","opts","extend"],"mappings":"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"}