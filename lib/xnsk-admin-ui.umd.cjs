(function(e,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i(require("vue"),require("naive-ui"),require("markdown-it"),require("houriprotocol"),require("axios")):typeof define=="function"&&define.amd?define(["vue","naive-ui","markdown-it","houriprotocol","axios"],i):(e=typeof globalThis!="undefined"?globalThis:e||self,e.XnskAdminUI=i(e.vue,e.naiveUi,e.MarkdownIt,e.hp,e.axios))})(this,function(e,i,L,ue,re){"use strict";var ut=Object.defineProperty,pt=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var kt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var _e=(e,i,L)=>i in e?ut(e,i,{enumerable:!0,configurable:!0,writable:!0,value:L}):e[i]=L,P=(e,i)=>{for(var L in i||(i={}))kt.call(i,L)&&_e(e,L,i[L]);if(me)for(var L of me(i))gt.call(i,L)&&_e(e,L,i[L]);return e},fe=(e,i)=>pt(e,ht(i));var oe=(e,i,L)=>new Promise((ue,re)=>{var pe=G=>{try{q(L.next(G))}catch(ce){re(ce)}},he=G=>{try{q(L.throw(G))}catch(ce){re(ce)}},q=G=>G.done?ue(G.value):Promise.resolve(G.value).then(pe,he);q((L=L.apply(e,i)).next())});const pe="",he="",q=(l,n)=>{const o=l.__vccOpts||l;for(const[t,a]of n)o[t]=a;return o},G={key:1,class:"dialog-templete-btns"},ke=q({__name:"index",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:[Number,String],default:"600"},height:{type:[Number,String],default:"auto"},footBtns:{type:Array,default:["确定","取消"]},loading:{type:Boolean,default:!1},callback:{type:Array,default:[]},lock:{type:Boolean,defualt:!1}},emits:["update:show"],setup(l,{emit:n}){const o=l,t=e.useAttrs(),a=e.useSlots();let _=e.computed({get(){return o.show},set(V){V||r()}});function x(){o.callback[0]&&o.callback[0]()}function r(){t.onBeforeClose?n("beforeClose",()=>{o.callback[1]&&(n("update:show",!1),o.callback[1]&&o.callback[1]())}):(n("update:show",!1),o.callback[1]&&o.callback[1]())}return(V,d)=>(e.openBlock(),e.createBlock(e.unref(i.NModal),{show:e.unref(_),"onUpdate:show":d[0]||(d[0]=g=>e.isRef(_)?_.value=g:_=g),"trap-focus":!1,preset:"card","close-on-esc":!l.lock,"mask-closable":!l.lock,class:"dialog-templete",style:e.normalizeStyle({width:l.width+"px",height:l.height+"px"})},{header:e.withCtx(()=>[l.title?(e.openBlock(),e.createBlock(e.unref(se),{key:0,title:l.title},null,8,["title"])):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.renderSlot(V.$slots,"default",{},void 0,!0)]),footer:e.withCtx(()=>[e.unref(a).footBtn?e.renderSlot(V.$slots,"footBtn",{key:0},void 0,!0):(e.openBlock(),e.createElementBlock("div",G,[l.footBtns.length>0?(e.openBlock(),e.createBlock(e.unref(i.NButton),{key:0,type:"info",onClick:x},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.footBtns[0]),1)]),_:1})):e.createCommentVNode("",!0),l.footBtns.length>1?(e.openBlock(),e.createBlock(e.unref(i.NButton),{key:1,type:"info",ghost:"",onClick:r},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.footBtns[1]),1)]),_:1})):e.createCommentVNode("",!0)]))]),_:3},8,["show","close-on-esc","mask-closable","style"]))}},[["__scopeId","data-v-3d1e23e0"]]),be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACPklEQVRYR+2XT4hPURTHP19/M9GMlFK2NlZqkiz8WymKUqRJZJIiTRYWylZKoRBlxcbWikgkRUnIhtmQ8qekjBFFSl+d6b3p9fJ+v3ffm9+Uclav+84953POvffcc0UXsb0LOAgMAnO66Zf+G3gHXAOOS/pcnq9OBm1fAfYkOq1SfwlskPSpqFAJYHs/cGmKnOdmXgDripnoBHAHWN8QIOzOqJh7QdKh/F/HJWjoHNvhfG22d7aX7PwClkl6G+M9ASg6tD0CnC1BnJZ0ZBLA9lzgJLADWNI08mzeG+A2cFTSeIzZvg5sLth9IGnNBECWrrst1ruK9zWwKjac7U3AjYLiN6BfkgPgAHCxZdRV0y9LGrbdD4yVNmafpB8BcK8H0edAEelCSb9tx/f8AukkQFSqpT3KQJhdJGnsP0CTDETBSJGqiyp5CR4CQ3mlqktgewA4D8TtWZRkgJWSntR1XKp6fcBXYFZhPBkgisfjhgBxzL60BYjoh4FXiRCLgTPAtrZLkOi3q3ryEnS1mKjw7wJ8T4w0TsDfuqDkDNwHdkr6mAJgO07AOWBv2004KOlZivNc1/a8rA7MblMHVkt61BBgQVYHZrYBeA7sA6KjiYdFXYk6cArYUmMJRiUtD71oSKa7H/gJbJUUfeO0AsTL6ClwQtJonqXIwC1gY908J+rFUR6IlqxqXgAMAVcTDddVvykpOuJKmXiY2I6uOLrjqZS4FeNIxzuhM0AGsRs4DKxo+WL6AMQ745ik990i+gN2mEgw/3nqggAAAABJRU5ErkJggg==";function xe(l){let n="";return Object.prototype.toString.call(l)==="[object String]"?n=JSON.stringify(l):n=l,new Promise((o,t)=>{if(navigator.clipboard)navigator.clipboard.writeText(n);else{let a=document.createElement("textarea");document.body.appendChild(a),a.style.position="fixed",a.style.clip="rect(0 0 0 0)",a.style.top="10px",a.value=n,a.select(),document.execCommand("copy",!0),document.body.removeChild(a)}o()})}Object.defineProperty(Object.prototype,"xnsk_admin_ui_realType",{get(){let l=Object.prototype.toString.call(this);return l.slice(8,l.length-1).toLowerCase()}}),Object.defineProperty(Object.prototype,"xnsk_admin_ui_realValue",{get(){return Object.prototype.toString.call(this)==="[object Function]"?this():this}});function v(l=20,n=!0){let o="";n&&(o=new Date().getTime()+"");const t=l-o.length;for(let a=0;a<t;a++)o+=ge(1);return o.substr(0,l)}function ge(l=10){let n="";const o="1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<l;t++)n+=o.substr(Math.floor(Math.random()*o.length),1);return n}const Be=(l=[],n="children")=>{let o=l;function t(a){var _;((_=a==null?void 0:a[n])==null?void 0:_.length)===0?a[n]=null:a!=null&&a[n]&&a[n].forEach(x=>t(x))}return(o||[]).forEach(a=>t(a)),t(o),o},Ne=(l=[],n="children")=>{let o=l;function t(a){var _;((_=a==null?void 0:a[n])==null?void 0:_.length)===0||(a==null?void 0:a[n])===null?(delete a[n],a.randomId=v()):a!=null&&a[n]&&(a.randomId=v(),a[n].forEach(x=>t(x)))}return(o||[]).forEach(a=>t(a)),t(o),o};function we(l){return new Promise((n,o)=>{let t;window.XMLHttpRequest?t=new XMLHttpRequest:t=new ActiveXObject("Microsoft.XMLHttp"),t.onreadystatechange=()=>{t.readyState==4&&t.status==200&&n(t.responseText)},t.onerror=()=>{o(!1)},t.open("GET",l,!0),t.send()})}function Ce(l="",n=""){return n+l.slice(l.lastIndexOf(".")+1)}const Se={class:"break-all"},Ve={class:"text-center"},Ee=e.createElementVNode("img",{class:"mt-px",src:be,style:{width:"16px",height:"16px"}},null,-1),Te={__name:"index",props:{show:{type:Boolean,default:!1},title:{type:String,default:"日志"},data:{type:String,default:""}},emits:["update:show"],setup(l,{emit:n}){const o=l;e.useSlots();let t=e.computed({get(){return o.show},set(_){_||n("update:show",!1)}});function a(){xe(o.data).then(()=>{try{$message.success("复制成功"),n("success")}catch(_){console.log("$message未定义"),n("success")}})}return(_,x)=>(e.openBlock(),e.createBlock(e.unref(ke),{title:l.title,show:e.unref(t),"onUpdate:show":x[0]||(x[0]=r=>e.isRef(t)?t.value=r:t=r),width:"800",callback:[]},{footBtn:e.withCtx(()=>[e.createElementVNode("div",Ve,[e.createVNode(e.unref(i.NButton),{type:"primary",onClick:a},{icon:e.withCtx(()=>[Ee]),default:e.withCtx(()=>[e.createTextVNode("复制日志 ")]),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("div",Se,e.toDisplayString(l.data),1)]),_:1},8,["title","show"]))}},yt="",$e={class:"flex justify-between items-center"},Ae={class:"flex justify-start items-center gap-3"},Ie={class:"flex justify-center items-center"},se=q({__name:"index",props:{title:String,size:{type:String,default:"small"},showTitleBar:{type:Boolean,default:!0}},setup(l){const n=l,o=e.computed(()=>{switch(n.size){case"small":return"14px";case"big":return"18px";default:return n.size}});return(t,a)=>(e.openBlock(),e.createElementBlock("div",$e,[e.createElementVNode("div",Ae,[l.showTitleBar?(e.openBlock(),e.createElementBlock("div",{key:0,class:"blue-bar",style:e.normalizeStyle([{width:"3px","border-radius":"2px"},{height:o.value}])},null,4)):e.createCommentVNode("",!0),e.createElementVNode("b",{style:e.normalizeStyle({fontSize:o.value})},e.toDisplayString(l.title),5)]),e.createElementVNode("div",Ie,[e.renderSlot(t.$slots,"default",{},void 0,!0)]),e.createTextVNode("   ")]))}},[["__scopeId","data-v-f4694431"]]),Oe={__name:"index",props:{outClosable:{type:Boolean,default:()=>!1}},setup(l){const n=e.useAttrs();return e.onMounted(()=>{}),(o,t)=>(e.openBlock(),e.createBlock(e.unref(i.NDrawer),e.mergeProps({"close-on-esc":l.outClosable,"mask-closable":l.outClosable,"auto-focus":!1},e.unref(n)),{default:e.withCtx(()=>[e.createVNode(e.unref(i.NDrawerContent),{title:e.unref(n).title,closable:""},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"default")]),_:3},8,["title"])]),_:3},16,["close-on-esc","mask-closable"]))}},je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},De=e.createVNode("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),ze=e.createVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1),Le=e.defineComponent({name:"SearchOutline",render:function(n,o){return e.openBlock(),e.createBlock("svg",je,[De,ze])}}),Re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Fe=e.createVNode("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Pe=e.createVNode("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1),qe=e.defineComponent({name:"ReloadOutline",render:function(n,o){return e.openBlock(),e.createBlock("svg",Re,[Fe,Pe])}}),_t="",Me={class:"list-page-content"},He={key:0,class:"list-page-search marB20"},Ke={class:"flex-1 justify-end flex"},We={key:1,class:"overflow-hidden flex items-center justify-between",style:{"margin-bottom":"24px"}},Je={style:{display:"flex"}},Ge={class:"list-page-table"},Xe=q({__name:"index",props:{config:{type:[Object,Function],default:()=>{}}},emits:["search","success","finally","rowLoad","rowExpand","onUpdateChecked"],setup(l,{expose:n,emit:o}){const t=l,a=e.ref(!1),_=e.useSlots(),x=e.useAttrs(),r=i.useDialog(),V=e.computed(()=>{var c,k,m,E,T;return((m=(k=(c=t==null?void 0:t.config)==null?void 0:c.params)==null?void 0:k.columns)==null?void 0:m.length)>0?(T=(E=t==null?void 0:t.config)==null?void 0:E.params)==null?void 0:T.columns:[]}),d=e.computed(()=>{var k,m;let c=((m=(k=t==null?void 0:t.config)==null?void 0:k.table)==null?void 0:m.title)||"";return Object.prototype.toString.call(c)==="[object Function]"?c():c}),g=e.ref({}),B=e.ref([]);let b=e.ref(0);const h=e.ref({page:1,pageSize:10,pageSizeOptions:[1,5,10,20,50],itemCount:0,isDel:0});function w(c){h.value.pageSize=c,u()}function M(c){h.value.page=c,u()}function D(c){var k,m,E;(E=(m=(k=t==null?void 0:t.config)==null?void 0:k.params)==null?void 0:m.change)==null||E.call(m,g.value,c)}let j=e.ref([]),F=e.ref({});function W(){V.value.length&&V.value.forEach(c=>{var k,m;c.type==="input"?g.value[c.propName]=((k=c==null?void 0:c.defaultValue)==null?void 0:k.xnsk_admin_ui_realValue)||"":c.type==="select"&&(g.value[c.propName]=c.defaultValue===""||c.defaultValue===void 0?null:(m=c.defaultValue)==null?void 0:m.xnsk_admin_ui_realValue)})}function ee(){var k,m,E,T;let c=((m=(k=t==null?void 0:t.config)==null?void 0:k.table)==null?void 0:m.columns)||[];B.value=c.map(($,A)=>{var H;let R={ellipsis:$.unEllipsis?!1:{tooltip:!0},align:(H=t==null?void 0:t.config)!=null&&H.isTree&&A===0?"left":$.align||"center",titleAlign:"center",resizable:!1};return $.customValue?R.render=I=>$.customValue(I):$.slot?R.render=I=>e.h(_[$.slot],I):R.render=I=>I[$.key]===null||I[$.key]===void 0||I[$.key]===""?"—":I[$.key],$.key==="actions"&&(R.fixed="right",R.render=I=>{var Z,le,ne;let U=[];return((ne=(le=(Z=t==null?void 0:t.config)==null?void 0:Z.table)==null?void 0:le.actions)==null?void 0:ne.length)>0&&t.config.table.actions.forEach(O=>{var X,K,ae;let Q,te;((X=O.show)==null?void 0:X.xnsk_admin_ui_realType)==="function"?Q=O.show(I):Q=O.show,((K=O.disabled)==null?void 0:K.xnsk_admin_ui_realType)==="function"?te=O.disabled(I):te=(ae=O.disabled)!=null?ae:!1;let Y,N=Object.prototype.toString.call(O.icon);N==="[object String]"?Y=e.h("img",{src:O.icon},{default:()=>""}):N==="[object Object]"&&(Y=O.icon),(Q||Q===void 0)&&U.push(e.h(i.NButton,{size:"small",quaternary:!0,type:O.type||"primary",disabled:te,onClick:()=>{O!=null&&O.autoWarn?r.warning({title:`确定${O.label}`,content:"",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{O.click(I)},onNegativeClick:()=>{}}):O.click(I)},style:"--n-opacity-disabled: 0;"},{default:()=>[Y&&e.h(i.NIcon,{component:Y}),e.h("div",{style:`margin-left:${Y?5:0}px;`},{default:()=>O.label})]}))}),e.h("div",{class:"flex"},{default:()=>[...U]})}),P(P({},R),$)}),(E=t==null?void 0:t.config)!=null&&E.expand&&B.value.unshift({type:"expand",align:"right",expandable:$=>!0,renderExpand:(T=t==null?void 0:t.config)==null?void 0:T.expand})}function p(c=[]){let k=Object.prototype.toString.call(c);if(k==="[object Array]")return c;if(k==="[object Object]")return Object.keys(c).map(T=>({label:c[T],value:T}))}function u(c={},k=null){var m,E,T,$;if(g.value=P(P({},g.value),c),((T=(E=(m=t==null?void 0:t.config)==null?void 0:m.data)==null?void 0:E.xnsk_admin_ui_realValue)==null?void 0:T.length)>0){if(($=t==null?void 0:t.config)!=null&&$.isTree){let A=t.config.data.xnsk_admin_ui_realValue.map(R=>fe(P({},R),{randomId:v()}));j.value=Ne(A)}else j.value=t.config.data.xnsk_admin_ui_realValue;h.value.itemCount=t.config.data.xnsk_admin_ui_realValue.length;return}t.config.apiName&&(a.value=!0,t.config.apiName(fe(P({},g.value),{pageNum:h.value.page,pageSize:h.value.pageSize})).then(A=>{var R,H,I;if(k&&k(A),A.status===200){let U=(A==null?void 0:A.list)||((R=A==null?void 0:A.data)==null?void 0:R.list)||[];(H=t==null?void 0:t.config)!=null&&H.isTree?j.value=U.map(Z=>fe(P({},Z),{getRandomId:v()})):j.value=U,F.value=A||{},h.value.itemCount=A.total||A.data.total,h.value.page=A.pageNum||A.data.pageNum,o("success",F.value)}else(I=t==null?void 0:t.config)!=null&&I.showErrMsg&&$message.error(A.message)}).finally(()=>{a.value=!1,o("finally")}))}function C(c){return new Promise((k,m)=>{o("rowLoad",c,(E=[])=>{c.children=E.map(T=>P({},T)),k()})})}const y=e.computed(()=>{var c,k,m,E,T,$,A,R,H,I;return((c=t==null?void 0:t.config)==null?void 0:c.expandedIndex)!==void 0?(I=(H=($=(m=j.value[(k=t.config)==null?void 0:k.expandedIndex])==null?void 0:m.did)!=null?$:(T=j.value[(E=t.config)==null?void 0:E.expandedIndex])==null?void 0:T.id)!=null?H:(R=j.value[(A=t.config)==null?void 0:A.expandedIndex])==null?void 0:R.randomId)!=null?I:"":null});function f(){h.value.page=1,u(),o("search")}function z(){return oe(this,null,function*(){for(let c in g.value)g.value[c]=null;f(),o("search")})}function s(c){var k;return c!=null&&c.show?((k=c.show)==null?void 0:k.xnsk_admin_ui_realType)==="function"?e.unref(c.show()):e.unref(c.show):!0}function J(c){var k;return c!=null&&c.disabled?((k=c.disabled)==null?void 0:k.xnsk_admin_ui_realType)==="function"?e.unref(c.disabled()):e.unref(c.disabled):!1}function S(c){return(c==null?void 0:c.xnsk_admin_ui_realType)==="function"?e.unref(c()):e.unref(c)}function ie(c){var k,m;((m=(k=t.config)==null?void 0:k.onUpdateChecked)==null?void 0:m.xnsk_admin_ui_realType)==="function"?t.config.onUpdateChecked(c):o("onUpdateChecked",c)}return e.onMounted(()=>{var c;W(),ee(),!((c=t.config)!=null&&c.unLoad)&&u(),b.value=B.value.reduce((k,m)=>k+(m.minWidth||m.width||0),0)}),e.watchEffect(()=>{var c,k,m,E,T;((k=(c=t.config)==null?void 0:c.data)==null?void 0:k.xnsk_admin_ui_realType)==="asyncfunction"?(E=(m=t.config)==null?void 0:m.data)==null||E.call(m).then($=>{j.value=$}):((T=t.config)==null?void 0:T.data)!==void 0&&u()}),n({getTableData:u,refresh:u,pageData:F,loading:a,params:g}),(c,k)=>{var m,E,T,$,A,R,H,I,U,Z,le,ne,O,Q,te,Y;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["list-page",{noPadding:(m=t==null?void 0:t.config)==null?void 0:m.noPadding}]),style:e.normalizeStyle({height:(T=(E=t==null?void 0:t.config)==null?void 0:E.height)!=null?T:"100%"})},[e.createElementVNode("div",Me,[e.renderSlot(c.$slots,"top",{dataList:e.unref(j),loading:a.value},void 0,!0),V.value.length>0&&!l.config.params.hidden?(e.openBlock(),e.createElementBlock("div",He,[e.createVNode(e.unref(i.NGrid),{"x-gap":"12",cols:"3 s:3 m:4 l:5 xl:6",responsive:"screen"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.value,(N,X)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[N.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(i.NGi),{key:(N==null?void 0:N.did)||X},{default:e.withCtx(()=>[N.type==="input"?(e.openBlock(),e.createBlock(e.unref(i.NInput),{key:0,value:g.value[N.propName],"onUpdate:value":[K=>g.value[N.propName]=K,K=>D(N)],placeholder:N.placeholder||"请输入"+N.label,clearable:"",disabled:N.disabled===!0||!1,maxlength:N.maxlength||20,onKeyup:e.withKeys(f,["enter"])},null,8,["value","onUpdate:value","placeholder","disabled","maxlength","onKeyup"])):e.createCommentVNode("",!0),N.type==="select"?(e.openBlock(),e.createBlock(e.unref(i.NSelect),{key:1,value:g.value[N.propName],"onUpdate:value":[K=>g.value[N.propName]=K,K=>D(N)],options:p(N.selection),placeholder:N.placeholder||"请选择"+N.label,clearable:"",disabled:N.disabled===!0||!1},null,8,["value","onUpdate:value","options","placeholder","disabled"])):e.createCommentVNode("",!0)]),_:2},1024))],64))),256)),e.createVNode(e.unref(i.NGi),{suffix:!0},{default:e.withCtx(()=>[e.createElementVNode("div",Ke,[e.createVNode(e.unref(i.NButton),{type:"primary",onClick:f},{icon:e.withCtx(()=>[e.createVNode(e.unref(i.NIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(Le))]),_:1})]),default:e.withCtx(()=>[e.createTextVNode(" 查询")]),_:1}),e.createVNode(e.unref(i.NButton),{class:"ml-3",onClick:z},{icon:e.withCtx(()=>[e.createVNode(e.unref(i.NIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(qe))]),_:1})]),default:e.withCtx(()=>[e.createTextVNode("重置")]),_:1})])]),_:1})]),_:1})])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"center",{dataList:e.unref(j),loading:a.value},void 0,!0),(A=($=t==null?void 0:t.config)==null?void 0:$.table)!=null&&A.title||(H=(R=t==null?void 0:t.config)==null?void 0:R.table)!=null&&H.headBtns?(e.openBlock(),e.createElementBlock("div",We,[(U=(I=t==null?void 0:t.config)==null?void 0:I.table)!=null&&U.title?(e.openBlock(),e.createBlock(e.unref(se),{key:0,size:"16px",title:d.value},null,8,["title"])):e.createCommentVNode("",!0),e.createElementVNode("p",Je,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(((le=(Z=t==null?void 0:t.config)==null?void 0:Z.table)==null?void 0:le.headBtns)||[],(N,X)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[s(N)?(e.openBlock(),e.createBlock(e.unref(i.NButton),{type:N.type||"primary",class:"marL15",key:X,loading:S(N.loading),disabled:J(N),onClick:N.click},{default:e.withCtx(()=>[N.icon?(e.openBlock(),e.createBlock(e.unref(i.NIcon),{key:0,component:N.icon,style:{"margin-right":"8px"}},null,8,["component"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(N.label),1)]),_:2},1032,["type","loading","disabled","onClick"])):e.createCommentVNode("",!0)],64))),256))])])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"tableHeader",{dataList:e.unref(j),loading:a.value},void 0,!0),e.createElementVNode("div",Ge,[e.createVNode(e.unref(i.NDataTable),e.mergeProps({columns:B.value,data:e.unref(j),"scroll-x":e.unref(b),striped:"",loading:a.value,"row-key":N=>{var X,K,ae;return(ae=(K=(X=N.did)!=null?X:N.id)!=null?K:N.randomId)!=null?ae:""},pagination:((ne=t==null?void 0:t.config)==null?void 0:ne.data)&&!((O=t==null?void 0:t.config)!=null&&O.unPagination)&&{page:h.value.page,pageSize:h.value.pageSize,showSizePicker:!0,pageSizes:h.value.pageSizeOptions,itemCount:h.value.itemCount,showQuickJumper:!0},"on-update:page-size":w,"on-update:page":M,"on-update:checked-row-keys":ie,"children-key":(Q=t==null?void 0:t.config)!=null&&Q.isTree?((te=t==null?void 0:t.config)==null?void 0:te.childrenKey)||"children":null,"default-expanded-row-keys":[y.value],onLoad:C},e.unref(x)),null,16,["columns","data","scroll-x","loading","row-key","pagination","children-key","default-expanded-row-keys"])]),e.renderSlot(c.$slots,"footer",{dataList:e.unref(j),loading:a.value},void 0,!0)]),(Y=t==null?void 0:t.config)!=null&&Y.data?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(i.NPagination),{key:0,class:"list-page-table-pagination",page:h.value.page,"onUpdate:page":k[0]||(k[0]=N=>h.value.page=N),"page-size":h.value.pageSize,"onUpdate:pageSize":k[1]||(k[1]=N=>h.value.pageSize=N),"page-sizes":h.value.pageSizeOptions,"item-count":h.value.itemCount,"on-update:page-size":w,"on-update:page":M,"show-size-picker":"","show-quick-jumper":""},null,8,["page","page-size","page-sizes","item-count"]))],6)}}},[["__scopeId","data-v-3b6ff612"]]),xt="",Ue={key:0,class:"form-btns"},Ye=q({__name:"index",props:{config:{type:Object,default:{}},defaultValue:{type:Object,default:{}}},emits:["submit","cancel","change"],setup(l,{expose:n,emit:o}){const t=l,a={"input-select":"请输入",input:"请输入",textarea:"请输入",select:"请选择",radio:"请选择",checkbox:"请选择",slot:"缺少"},_=e.ref("from_"+v()),x=e.useSlots();e.useAttrs();const r=e.ref({}),V=e.ref({}),d=e.computed(()=>{var p,u,C;return(u=(p=t.config)==null?void 0:p.submitBtn)!=null&&u.loading?((C=t.config.submitBtn.loading)==null?void 0:C.xnsk_admin_ui_realType)==="function"?e.unref(t.config.submitBtn.loading()):e.unref(t.config.submitBtn.loading):!1}),g=e.computed(()=>{var u,C;let p=[];if(((C=(u=t.config)==null?void 0:u.columns)==null?void 0:C.length)>0)return t.config.columns.forEach(y=>{var J,S,ie,c;let f={};f.label=y.label,f.type=y.type,f.useFormItem=y.useFormItem||!1,f.propName=y.propName,f.required=y.required,f.maxlength=y.maxlength,f.rows=y.rows||9,f.validator=y.validator||null,f.trigger=y.trigger||((J=t.config)==null?void 0:J.trigger)||"blur",f.selection=y.selection||[],f.span=y.span||24,f.offset=y.offset||0,f.onInput=y.onInput||null,f.text=y.text||"",f.style=y.style||"";let z={required:f==null?void 0:f.required,trigger:f.trigger,key:f==null?void 0:f.propName,validator(k,m){var E,T;if(((E=f==null?void 0:f.validator)==null?void 0:E.xnsk_admin_ui_realType)==="function")return f==null?void 0:f.validator(m);if(((T=f==null?void 0:f.validator)==null?void 0:T.xnsk_admin_ui_realType)===void 0)return f!=null&&f.required&&[null,void 0,""].includes(m)?new Error(`${a[f.type]}${f.label}`):(m==null?void 0:m.xnsk_admin_ui_realType)==="array"&&m.length===0?new Error(`${a[f.type]}${f.label}`):!0}};V.value[f.propName]=z,y.disabled!==void 0&&(((S=y.disabled)==null?void 0:S.xnsk_admin_ui_realType)==="function"?y.disabled():y.disabled)&&(f.disabled=!0),y.readonly!==void 0&&(((ie=y.readonly)==null?void 0:ie.xnsk_admin_ui_realType)==="function"?y.readonly():y.readonly)&&(f.readonly=!0),(y.show===void 0||(((c=y.show)==null?void 0:c.xnsk_admin_ui_realType)==="function"?y.show(r.value):y.show))&&p.push(f)}),p});B(),e.watchEffect(()=>{Object.keys(t.defaultValue).forEach(u=>{var y;let C=(y=t.config)==null?void 0:y.columns.find(f=>f.propName===u);C&&(r.value[u]=w(C))})});function B(){var u;(((u=t.config)==null?void 0:u.columns)||[]).forEach(C=>{switch(C.type){case"input":case"textarea":C.propName&&(r.value[C.propName]="");break;case"select":C.propName&&(r.value[C.propName]=null);break}})}function b(p){return p.placeholder?p.placeholder:p.type==="select"?`请选择${p.label}`:`请输入${p.label}`}function h(p){var C;let u=((C=p.selection)==null?void 0:C.xnsk_admin_ui_realType)==="function"?e.unref(p.selection()):e.unref(p.selection);return u.xnsk_admin_ui_realType==="array"?u:Object.keys(u).map(f=>({label:u[f],value:f}))}function w(p){var u,C;return(C=(u=t.defaultValue)==null?void 0:u[p.propName])!=null?C:p.type==="select"?null:""}function M(){var p,u;(u=(p=t==null?void 0:t.config)==null?void 0:p.cancelBtn)!=null&&u.click?t.config.cancelBtn.click():o("cancel")}function D(p,u){var C,y,f,z;if(((C=u==null?void 0:u.onInput)==null?void 0:C.xnsk_admin_ui_realType)==="function"){let s=(y=u==null?void 0:u.onInput)==null?void 0:y.call(u,p);s!==void 0&&(r.value[u.propName]=s)}(f=t.config)!=null&&f.change?(z=t.config)==null||z.change(e.unref(r.value),u,p):o("change",e.unref(r.value),u,p)}function j(){var p;(p=_.value)==null||p.validate(u=>{var C,y;u||((y=(C=t.config)==null?void 0:C.submitBtn)!=null&&y.click?$dialog.warning({title:"确定提交？",content:"",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{var f,z;(z=(f=t.config)==null?void 0:f.submitBtn)==null||z.click(e.unref(r.value))},onNegativeClick:()=>{}}):$dialog.warning({title:"确定提交？",content:"",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{o("submit",e.unref(r.value))},onNegativeClick:()=>{}}))})}function F(p,u){var C,y;if((u==null?void 0:u.xnsk_admin_ui_realType)===void 0)(C=_.value)==null||C.validate(f=>p&&p(f));else{let f=u.xnsk_admin_ui_realType==="string"?[u]:u;(y=_.value)==null||y.validate(z=>{p&&p(z)},z=>f.includes(z==null?void 0:z.key))}}function W(){return r.value}function ee(p={}){Object.keys(p).forEach(C=>{r.value[C]=p[C]})}return n({validate:F,getValue:W,setValue:ee}),(p,u)=>{var f,z;const C=e.resolveComponent("n-space"),y=e.resolveDirective("trim");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(e.unref(i.NForm),{model:r.value,rules:V.value,ref:s=>{_.value=s},"label-placement":"left","label-width":l.config.labelWidth||"auto","require-mark-placement":"right"},{default:e.withCtx(()=>[e.createVNode(e.unref(i.NGrid),{"x-gap":"12",cols:24},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,s=>(e.openBlock(),e.createBlock(e.unref(i.NGi),{class:e.normalizeClass({"is-slot":s.type==="slot"&&!s.useFormItem}),key:s.propName,span:s.span,offset:s.offset},{default:e.withCtx(()=>[e.createVNode(e.unref(i.NFormItem),{label:s.type==="slot"&&!s.useFormItem?null:s.label,path:s.propName},{default:e.withCtx(()=>{var J;return[s.type==="input"?e.withDirectives((e.openBlock(),e.createBlock(e.unref(i.NInput),{key:0,value:r.value[s.propName],"onUpdate:value":[S=>r.value[s.propName]=S,S=>D(S,s)],placeholder:b(s),maxlength:s.maxlength||20,disabled:s.disabled,readonly:s.readonly},null,8,["value","onUpdate:value","placeholder","maxlength","disabled","readonly"])),[[y]]):e.createCommentVNode("",!0),s.type==="input-select"?(e.openBlock(),e.createBlock(e.unref(i.NSelect),{key:1,class:"input-select-select",value:r.value[s.propName],options:h(s),placeholder:b(s),disabled:s.disabled,readonly:s.readonly,"show-on-focus":"",filterable:"",tag:"","ignore-composition":!1,onInput:S=>{r.value[s.propName]=S.target.value},"onUpdate:value":S=>{r.value[s.propName]=S}},null,8,["value","options","placeholder","disabled","readonly","onInput","onUpdate:value"])):e.createCommentVNode("",!0),s.type==="textarea"?e.withDirectives((e.openBlock(),e.createBlock(e.unref(i.NInput),{key:2,value:r.value[s.propName],"onUpdate:value":[S=>r.value[s.propName]=S,S=>D(S,s)],type:"textarea",placeholder:b(s),maxlength:s.maxlength||200,rows:s.rows||9,"show-count":"",disabled:s.disabled,readonly:s.readonly},null,8,["value","onUpdate:value","placeholder","maxlength","rows","disabled","readonly"])),[[y]]):e.createCommentVNode("",!0),s.type==="select"?(e.openBlock(),e.createBlock(e.unref(i.NSelect),{key:3,value:r.value[s.propName],"onUpdate:value":[S=>r.value[s.propName]=S,S=>D(S,s)],options:h(s),placeholder:b(s),disabled:s.disabled,readonly:s.readonly},null,8,["value","onUpdate:value","options","placeholder","disabled","readonly"])):e.createCommentVNode("",!0),s.type==="radio"?(e.openBlock(),e.createBlock(e.unref(i.NRadioGroup),{key:4,value:r.value[s.propName],"onUpdate:value":[S=>r.value[s.propName]=S,S=>D(S,s)],name:s.propName,disabled:s.disabled,readonly:s.readonly},{default:e.withCtx(()=>[e.createVNode(C,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h(s),S=>(e.openBlock(),e.createBlock(e.unref(i.NRadio),{key:S.value,value:S.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(S.label),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value","name","disabled","readonly"])):e.createCommentVNode("",!0),s.type==="checkbox"?(e.openBlock(),e.createBlock(e.unref(i.NCheckboxGroup),{key:5,value:r.value[s.propName],"onUpdate:value":S=>r.value[s.propName]=S},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.value[s.propName])+" ",1),e.createVNode(C,{"item-style":"display: flex;"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h(s),S=>(e.openBlock(),e.createBlock(e.unref(i.NCheckbox),{key:S.value,value:S.value,label:S.label},null,8,["value","label"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):e.createCommentVNode("",!0),s.type==="text"?(e.openBlock(),e.createElementBlock("span",{key:6,style:e.normalizeStyle(s.style)},e.toDisplayString(((J=s.text)==null?void 0:J.xnsk_admin_ui_realType)==="function"?s.text():s.text),5)):e.createCommentVNode("",!0),s.type==="slot"?e.renderSlot(p.$slots,s.propName,{key:7,data:r.value,item:s},void 0,!0):e.createCommentVNode("",!0)]}),_:2},1032,["label","path"])]),_:2},1032,["class","span","offset"]))),128))]),_:3})]),_:3},8,["model","rules","label-width"]),e.unref(x).btns?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ue,[(f=l.config)!=null&&f.submitBtn?(e.openBlock(),e.createBlock(e.unref(i.NButton),{key:0,class:"btn",type:"primary",loading:d.value,onClick:j},{default:e.withCtx(()=>{var s,J;return[e.createTextVNode(e.toDisplayString(((J=(s=l.config)==null?void 0:s.submitBtn)==null?void 0:J.label)||"确定"),1)]}),_:1},8,["loading"])):e.createCommentVNode("",!0),(z=l.config)!=null&&z.submitBtn?(e.openBlock(),e.createBlock(e.unref(i.NButton),{key:1,onClick:M},{default:e.withCtx(()=>[e.createTextVNode(" 取消 ")]),_:1})):e.createCommentVNode("",!0)])),e.unref(x).btns?e.renderSlot(p.$slots,"btns",{key:1},void 0,!0):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-c14b9bcf"]]),Nt="",Ze={class:"form-btns flex justify-center sticky marB20 relative",style:{bottom:"0",padding:"20px","background-color":"#fff","z-index":"103"}},Qe=q({__name:"index",setup(l){return(n,o)=>(e.openBlock(),e.createElementBlock("div",Ze,[e.createVNode(e.unref(i.NSpace),{size:[40,20]},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"default",{},void 0,!0)]),_:3})]))}},[["__scopeId","data-v-d8c9c3a7"]]),Ct="",ve={class:"info-page-value inline-block marL5 padR10 break-all",else:""},et=q({__name:"index",props:{config:{type:Object,defualt:()=>{}},data:{type:Object,defualt:()=>{}}},setup(l){const n=l;e.useAttrs();function o(t){var a;return typeof t=="string"?n.data?(n==null?void 0:n.data[t])||"-":((a=n.config)==null?void 0:a.data[t])||"-":Object.prototype.toString.call(t)==="[object Function]"?t():""}return(t,a)=>{var _;return e.openBlock(),e.createElementBlock("div",null,[l.config.title?(e.openBlock(),e.createBlock(e.unref(se),{key:0,class:"marT5 marB15",title:l.config.title||""},null,8,["title"])):e.createCommentVNode("",!0),e.createVNode(e.unref(i.NGrid),{class:e.normalizeClass({"has-border":(_=l.config)==null?void 0:_.border})},{default:e.withCtx(()=>{var x;return[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(((x=l.config)==null?void 0:x.column)||[],(r,V)=>{var d;return e.openBlock(),e.createBlock(e.unref(i.NGi),{class:"info-page-item flex items-baseline",key:(r==null?void 0:r.did)||V,span:(d=r.span)!=null?d:8},{default:e.withCtx(()=>{var g,B;return[r.labelSlot?e.renderSlot(t.$slots,r.labelSlot,{key:0},void 0,!0):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"info-page-label inline-block padT10 padB10 padR10",else:"",style:e.normalizeStyle({minWidth:l.config.labelWidth?l.config.labelWidth+"px":"auto","text-align":(g=l.config.labelAlign)!=null?g:"left"})},e.toDisplayString(r.label)+e.toDisplayString((B=l.config)!=null&&B.useColon?":":""),5),r.slot?e.renderSlot(t.$slots,r.slot,{key:1},void 0,!0):e.createCommentVNode("",!0),e.createElementVNode("span",ve,e.toDisplayString(o(r.value)),1)]}),_:2},1032,["span"])}),128))]}),_:3},8,["class"])])}}},[["__scopeId","data-v-de364537"]]),Vt="",tt={class:"markdown-view overflow-hidden html-default-css"},lt=["innerHTML"],nt=q(Object.assign({name:"XnskMdPreview"},{props:{value:{type:String,default:""},type:{type:String,default:"url"}},setup(l){const n=l,o=new L;let t=e.ref(!0),a=e.ref("");function _(){return oe(this,null,function*(){t.value=!1,a.value="";let x=yield we(n.value);x&&(a.value=o.render(x)),t.value=!0})}return e.watchEffect(()=>{n.value?n.type==="url"?_():a.value=o.render(n.value):a.value=""}),(x,r)=>(e.openBlock(),e.createElementBlock("div",tt,[e.withDirectives(e.createVNode(e.unref(i.NSpin),{class:"loading",size:"large"},null,512),[[e.vShow,!e.unref(t)]]),l.value?(e.openBlock(),e.createElementBlock("div",{key:0,innerHTML:e.unref(a),style:{padding:"20px","border-radius":"6px"}},null,8,lt)):(e.openBlock(),e.createBlock(e.unref(i.NEmpty),{key:1,description:"无数据",style:{"margin-top":"60px"}}))]))}}),[["__scopeId","data-v-cd3c3a52"]]),at=["onClick"],ot={__name:"index",props:{checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(l,{emit:n}){const o=e.ref([]);function t(){ue.init({projectId:"20230704143829127",sceneCode:"scdl",debug:!0,authContext:"https://xnsk.mapfarm.com",userId:""}).then(x=>{var r;o.value=(r=x==null?void 0:x.agreementList)!=null?r:[]}).catch(x=>{console.log(x.message||x.msg||"系统异常"),$message.error(x.message||x.msg||"系统异常")})}t();function a(x){x&&window.open(x)}function _(x){n("update:checked",x)}return(x,r)=>(e.openBlock(),e.createElementBlock("div",null,[e.createVNode(e.unref(i.NCheckbox),{"default-checked":l.checked,"onUpdate:checked":_},null,8,["default-checked"]),e.createTextVNode(" 请阅读 "),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(V,d)=>(e.openBlock(),e.createElementBlock("span",{class:"cursor-pointer",style:{color:"#2d8cf0"},key:V.did||d,onClick:g=>a(V.agreementUrl)}," 《"+e.toDisplayString(V.agreementName)+"》 ",9,at))),128)),e.createTextVNode("，并同意 ")]))}},$t="",rt=q({__name:"index",props:{value:{type:Array,default:[]},treeData:{type:Array,default:[]},dataKey:{type:String,default:"did"},label:{type:String,default:"name"},childrenKey:{type:String,default:"children"},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},cancelable:{type:Boolean,default:!1}},emits:["click","update:value","select"],setup(l,{emit:n}){const o=l,t=e.ref("tree_"+v()),a=e.useAttrs(),_=e.ref(""),x=e.computed(()=>Be(o.treeData,o.childrenKey||"children"));function r(b,h,w){n("update:value",d())}function V(b,h,w){n("update:value",d())}function d(){var D,j,F;let b=(j=(D=t.value.getCheckedData())==null?void 0:D.keys)!=null?j:[],h=(F=t.value.getIndeterminateData().keys)!=null?F:[],w=b.map(W=>[W,1]),M=h.map(W=>[W,0]);return[...w,...M]}function g(b,h,w){n("select",b,h,w)}function B({option:b}){return{onClick(){n("click",b)}}}return(b,h)=>(e.openBlock(),e.createElementBlock("div",null,[l.search?(e.openBlock(),e.createBlock(e.unref(i.NInput),{key:0,class:"marB10",value:_.value,"onUpdate:value":h[0]||(h[0]=w=>_.value=w),placeholder:"搜索",clearable:""},null,8,["value"])):e.createCommentVNode("",!0),e.createVNode(e.unref(i.NTree),e.mergeProps({ref:w=>{t.value=w},"block-line":"",data:x.value,"default-checked-keys":(l.value||[]).filter(w=>w[1]===1).map(w=>w[0]),"indeterminate-keys":(l.value||[]).filter(w=>w[1]===0).map(w=>w[0]),"key-field":l.dataKey,"label-field":l.label,"children-field":l.childrenKey,pattern:_.value,checkable:l.checkable,"node-props":B,cancelable:l.cancelable,cascade:"",selectable:"","show-irrelevant-nodes":!1},e.unref(a),{"onUpdate:checkedKeys":r,"onUpdate:indeterminateKeys":V,"onUpdate:selectedKeys":g}),null,16,["data","default-checked-keys","indeterminate-keys","key-field","label-field","children-field","pattern","checkable","cancelable"])]))}},[["__scopeId","data-v-7cebb098"]]),ye=(l,n,o="",t={},a={})=>(l.interceptors.request.use(_=>(n.beforeRequest&&n.beforeRequest(_,a!=null?a:{}),_)),new Promise((_,x)=>{l.post(o,t).then(r=>{var V,d;((V=r.data)==null?void 0:V.status)!==200&&((d=n==null?void 0:n.onError)==null||d.call(n,r.data,a!=null?a:{})),_(r.data)}).catch(r=>{var V,d,g,B;(d=n==null?void 0:n.onNetWorkError)==null||d.call(n,(V=r==null?void 0:r.response)!=null?V:{data:{status:500,data:null,message:(r==null?void 0:r.message)||"系统异常"}},a!=null?a:{}),_((B=(g=r==null?void 0:r.response)==null?void 0:g.data)!=null?B:{status:500,data:null,message:r.message})}).finally(()=>{})}));function ct(l=null){let n=null;const o={beforeRequest:null,onNetWorkError:null,onError:null},t=(d,g)=>{d.config.globalProperties.$miniHttp=a(g)},a=(d={})=>{o.beforeRequest=(d==null?void 0:d.beforeRequest)||null,o.onNetWorkError=(d==null?void 0:d.onNetWorkError)||null,o.onError=(d==null?void 0:d.onError)||null;const g={baseURL:(d==null?void 0:d.baseURL)||"",timeout:(d==null?void 0:d.timeout)||6e4,headers:(()=>{let B={},b=Object.prototype.toString.call(d==null?void 0:d.headers);return b==="[object Object]"?B=d.headers:b==="[object Function]"&&(B=d.headers()),B})()};return n=re.create(g),_.bind(this)},_=(d={},g=null)=>{let B=Object.prototype.toString.call(d);if(B==="[object Object]")return x(d);if(B==="[object String]")return d.includes("/")?r(d,g):V(d,g)},x=(d={})=>{let g={};return Object.keys(d).forEach(B=>{var h,w;let b=Object.prototype.toString.call(d[B]);b==="[object String]"?d[B].includes("/")?g[B]=r(d[B]):g[B]=V(d[B]):b==="[object Array]"&&(d[B][0].includes("/")?g[B]=r(d[B][0],(h=d[B])==null?void 0:h[1]):g[B]=V(d[B][0],(w=d[B])==null?void 0:w[1]))}),g},r=(d="",g)=>(B,b={})=>ye(n,o,d,B,P(P({},g||{}),b||{})),V=(d="",g={})=>(B={},b={})=>ye(n,o,"/less/api/auth/common",{apiCode:d,queryParam:B},P(P({},g||{}),b||{}));return l?a(l):{install:t,create:a}}const st=ct({baseURL:"",beforeRequest:(l,n)=>{var a;console.log("[ extendsConfig ] >",n);const{token:o=""}=n;l.headers.Authorization=o,l.headers.appcode="xnsk_admin_ui";const t=(a=n==null?void 0:n["Content-Type"])!=null?a:"application/json;charset=UTF-8";l.headers["Content-Type"]=t},onNetWorkError:(l,n)=>{console.log(" 异常 >",l,n)},onError:(l,n)=>{console.log(" 异常 >",l,n)}}),Ot="",dt={style:{width:"100%"}},it={class:"inline-block uploadBtn"},ft={key:0,style:{"font-size":"40px","line-height":"20px"}},de=Object.freeze(Object.defineProperty({__proto__:null,BlueTitle:se,Dialog:ke,DialogMsg:Te,Drawer:Oe,Form:Ye,FormBtns:Qe,Info:et,ListPage:Xe,LoginAgreement:ot,MarkDown:nt,TreeSync:rt,UploadFileList:q({__name:"index",props:{value:{type:String,default:""},showFileList:{type:Boolean,default:()=>!0},autoUpload:{type:Boolean,default:()=>!0},multipleUpload:{type:Boolean,default:()=>!1},bucket:{type:String,default:"xnsk-base"},path:{type:String,default:"base/permission"},url:{type:String,default:""},params:{type:Object,default:{}},token:{type:String,default:""}},emits:["change","fileChange","update:value","update:fileList"],setup(l,{expose:n,emit:o}){const t=l,a=e.useAttrs(),_=e.ref("ref"+new Date().getTime()+parseInt(Math.random()*1e4));let x=e.ref(!1);const r=e.ref([]);e.watch(()=>t.value,b=>{if([null,void 0].includes(b)){r.value.splice(0);return}b._split(",").forEach(w=>{r.value.find(D=>D.url===w)||r.value.push({url:w,status:"finished"})})},{deep:!0,immediate:!0});const V=M=>oe(this,[M],function*({file:b,onFinish:h,onError:w}){var W,ee;let D=new FormData;D.append("file",b.file),D.append("bucket",t.bucket),D.append("pathPrefix",t.path),Object.keys(t.params).forEach(p=>{D.append(p,t.params[p])});let F=yield st(t.url,{"Content-Type":"multipart/form-data;charset=UTF-8",token:t.token})(D);if((F==null?void 0:F.status)===200){const p=ge(10);b.url=(ee=(W=F==null?void 0:F.data)==null?void 0:W.url)!=null?ee:"",b.name=p,h()}else w()});function d(b){}function g(b){return oe(this,null,function*(){var h;return((h=a==null?void 0:a.accept)==null?void 0:h.indexOf(Ce(b.file.name,".")))===-1?($message.error("格式不正确"),!1):b.file.size/1024>t.maxSize?($message.error("文件大小超出限制"),!1):!0})}function B({file:b,fileList:h}){let w=(h||[]).filter(M=>M.url).map(M=>M.url);o("update:value",w.join(",")),o("update:fileList",h)}return n({submitFile:()=>{var b;(b=_.value)==null||b.submit()}}),(b,h)=>(e.openBlock(),e.createElementBlock("div",dt,[e.createVNode(e.unref(i.NUpload),e.mergeProps({ref:w=>{_.value=w},"file-list":r.value,"onUpdate:fileList":h[0]||(h[0]=w=>r.value=w),onRemove:d,multiple:l.multipleUpload,"default-upload":l.autoUpload,"custom-request":V,onBeforeUpload:g,onChange:B},e.unref(a)),{default:e.withCtx(()=>{var w;return[e.createElementVNode("span",it,[((w=e.unref(a))==null?void 0:w["list-type"])==="image-card"?(e.openBlock(),e.createElementBlock("span",ft,"+")):e.renderSlot(b.$slots,"uploadBtn",{key:1,loading:e.unref(x)},void 0,!0)])]}),_:3},16,["file-list","multiple","default-upload"])]))}},[["__scopeId","data-v-742f8af6"]])},Symbol.toStringTag,{value:"Module"})),zt="";return P({install:function(l,n={}){for(let o in de)o.startsWith("Xnsk")?l.component(o,de[o]):l.component("Xnsk"+o,de[o])}},de)});
//# sourceMappingURL=xnsk-admin-ui.umd.cjs.map
