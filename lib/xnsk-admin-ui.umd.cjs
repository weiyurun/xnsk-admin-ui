(function(e,f){typeof exports=="object"&&typeof module!="undefined"?module.exports=f(require("vue"),require("naive-ui"),require("markdown-it"),require("houriprotocol"),require("axios")):typeof define=="function"&&define.amd?define(["vue","naive-ui","markdown-it","houriprotocol","axios"],f):(e=typeof globalThis!="undefined"?globalThis:e||self,e.XnskAdminUI=f(e.vue,e.naiveUi,e.MarkdownIt,e.hp,e.axios))})(this,function(e,f,L,ue,re){"use strict";var pt=Object.defineProperty,ht=Object.defineProperties;var kt=Object.getOwnPropertyDescriptors;var _e=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var be=(e,f,L)=>f in e?pt(e,f,{enumerable:!0,configurable:!0,writable:!0,value:L}):e[f]=L,P=(e,f)=>{for(var L in f||(f={}))gt.call(f,L)&&be(e,L,f[L]);if(_e)for(var L of _e(f))yt.call(f,L)&&be(e,L,f[L]);return e},fe=(e,f)=>ht(e,kt(f));var oe=(e,f,L)=>new Promise((ue,re)=>{var pe=G=>{try{q(L.next(G))}catch(ce){re(ce)}},he=G=>{try{q(L.throw(G))}catch(ce){re(ce)}},q=G=>G.done?ue(G.value):Promise.resolve(G.value).then(pe,he);q((L=L.apply(e,f)).next())});const pe="",he="",q=(l,n)=>{const o=l.__vccOpts||l;for(const[t,a]of n)o[t]=a;return o},G={key:1,class:"dialog-templete-btns"},ke=q({__name:"index",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:[Number,String],default:"600"},height:{type:[Number,String],default:"auto"},footBtns:{type:Array,default:["确定","取消"]},loading:{type:Boolean,default:!1},callback:{type:Array,default:[]},lock:{type:Boolean,defualt:!1}},emits:["update:show"],setup(l,{emit:n}){const o=l,t=e.useAttrs(),a=e.useSlots();let _=e.computed({get(){return o.show},set(S){S||c()}});function b(){o.callback[0]&&o.callback[0]()}function c(){t.onBeforeClose?n("beforeClose",()=>{o.callback[1]&&(n("update:show",!1),o.callback[1]&&o.callback[1]())}):(n("update:show",!1),o.callback[1]&&o.callback[1]())}return(S,s)=>(e.openBlock(),e.createBlock(e.unref(f.NModal),{show:e.unref(_),"onUpdate:show":s[0]||(s[0]=k=>e.isRef(_)?_.value=k:_=k),"trap-focus":!1,preset:"card","close-on-esc":!l.lock,"mask-closable":!l.lock,class:"dialog-templete",style:e.normalizeStyle({width:l.width+"px",height:l.height+"px"})},{header:e.withCtx(()=>[l.title?(e.openBlock(),e.createBlock(e.unref(se),{key:0,title:l.title},null,8,["title"])):e.createCommentVNode("",!0)]),default:e.withCtx(()=>[e.renderSlot(S.$slots,"default",{},void 0,!0)]),footer:e.withCtx(()=>[e.unref(a).footBtn?e.renderSlot(S.$slots,"footBtn",{key:0},void 0,!0):(e.openBlock(),e.createElementBlock("div",G,[l.footBtns.length>0?(e.openBlock(),e.createBlock(e.unref(f.NButton),{key:0,type:"info",onClick:b},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.footBtns[0]),1)]),_:1})):e.createCommentVNode("",!0),l.footBtns.length>1?(e.openBlock(),e.createBlock(e.unref(f.NButton),{key:1,type:"info",ghost:"",onClick:c},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l.footBtns[1]),1)]),_:1})):e.createCommentVNode("",!0)]))]),_:3},8,["show","close-on-esc","mask-closable","style"]))}},[["__scopeId","data-v-3d1e23e0"]]),xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACPklEQVRYR+2XT4hPURTHP19/M9GMlFK2NlZqkiz8WymKUqRJZJIiTRYWylZKoRBlxcbWikgkRUnIhtmQ8qekjBFFSl+d6b3p9fJ+v3ffm9+Uclav+84953POvffcc0UXsb0LOAgMAnO66Zf+G3gHXAOOS/pcnq9OBm1fAfYkOq1SfwlskPSpqFAJYHs/cGmKnOdmXgDripnoBHAHWN8QIOzOqJh7QdKh/F/HJWjoHNvhfG22d7aX7PwClkl6G+M9ASg6tD0CnC1BnJZ0ZBLA9lzgJLADWNI08mzeG+A2cFTSeIzZvg5sLth9IGnNBECWrrst1ruK9zWwKjac7U3AjYLiN6BfkgPgAHCxZdRV0y9LGrbdD4yVNmafpB8BcK8H0edAEelCSb9tx/f8AukkQFSqpT3KQJhdJGnsP0CTDETBSJGqiyp5CR4CQ3mlqktgewA4D8TtWZRkgJWSntR1XKp6fcBXYFZhPBkgisfjhgBxzL60BYjoh4FXiRCLgTPAtrZLkOi3q3ryEnS1mKjw7wJ8T4w0TsDfuqDkDNwHdkr6mAJgO07AOWBv2004KOlZivNc1/a8rA7MblMHVkt61BBgQVYHZrYBeA7sA6KjiYdFXYk6cArYUmMJRiUtD71oSKa7H/gJbJUUfeO0AsTL6ClwQtJonqXIwC1gY908J+rFUR6IlqxqXgAMAVcTDddVvykpOuJKmXiY2I6uOLrjqZS4FeNIxzuhM0AGsRs4DKxo+WL6AMQ745ik990i+gN2mEgw/3nqggAAAABJRU5ErkJggg==";function Be(l){let n="";return Object.prototype.toString.call(l)==="[object String]"?n=JSON.stringify(l):n=l,new Promise((o,t)=>{if(navigator.clipboard)navigator.clipboard.writeText(n);else{let a=document.createElement("textarea");document.body.appendChild(a),a.style.position="fixed",a.style.clip="rect(0 0 0 0)",a.style.top="10px",a.value=n,a.select(),document.execCommand("copy",!0),document.body.removeChild(a)}o()})}Object.defineProperty(Object.prototype,"xnsk_admin_ui_realType",{get(){let l=Object.prototype.toString.call(this);return l.slice(8,l.length-1).toLowerCase()}}),Object.defineProperty(Object.prototype,"xnsk_admin_ui_realValue",{get(){return Object.prototype.toString.call(this)==="[object Function]"?this():this}});function v(l=20,n=!0){let o="";n&&(o=new Date().getTime()+"");const t=l-o.length;for(let a=0;a<t;a++)o+=ge(1);return o.substr(0,l)}function ge(l=10){let n="";const o="1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<l;t++)n+=o.substr(Math.floor(Math.random()*o.length),1);return n}const Ne=(l=[],n="children")=>{let o=l;function t(a){var _;((_=a==null?void 0:a[n])==null?void 0:_.length)===0?a[n]=null:a!=null&&a[n]&&a[n].forEach(b=>t(b))}return(o||[]).forEach(a=>t(a)),t(o),o},we=(l=[],n="children")=>{let o=l;function t(a){var _;((_=a==null?void 0:a[n])==null?void 0:_.length)===0||(a==null?void 0:a[n])===null?(delete a[n],a.randomId=v()):a!=null&&a[n]&&(a.randomId=v(),a[n].forEach(b=>t(b)))}return(o||[]).forEach(a=>t(a)),t(o),o};function Ce(l){return new Promise((n,o)=>{let t;window.XMLHttpRequest?t=new XMLHttpRequest:t=new ActiveXObject("Microsoft.XMLHttp"),t.onreadystatechange=()=>{t.readyState==4&&t.status==200&&n(t.responseText)},t.onerror=()=>{o(!1)},t.open("GET",l,!0),t.send()})}function Se(l="",n=""){return n+l.slice(l.lastIndexOf(".")+1)}const Ve={class:"break-all"},Ee={class:"text-center"},Te=e.createElementVNode("img",{class:"mt-px",src:xe,style:{width:"16px",height:"16px"}},null,-1),$e={__name:"index",props:{show:{type:Boolean,default:!1},title:{type:String,default:"日志"},data:{type:String,default:""}},emits:["update:show"],setup(l,{emit:n}){const o=l;e.useSlots();let t=e.computed({get(){return o.show},set(_){_||n("update:show",!1)}});function a(){Be(o.data).then(()=>{try{$message.success("复制成功"),n("success")}catch(_){console.log("$message未定义"),n("success")}})}return(_,b)=>(e.openBlock(),e.createBlock(e.unref(ke),{title:l.title,show:e.unref(t),"onUpdate:show":b[0]||(b[0]=c=>e.isRef(t)?t.value=c:t=c),width:"800",callback:[]},{footBtn:e.withCtx(()=>[e.createElementVNode("div",Ee,[e.createVNode(e.unref(f.NButton),{type:"primary",onClick:a},{icon:e.withCtx(()=>[Te]),default:e.withCtx(()=>[e.createTextVNode("复制日志 ")]),_:1})])]),default:e.withCtx(()=>[e.createElementVNode("div",Ve,e.toDisplayString(l.data),1)]),_:1},8,["title","show"]))}},mt="",Ae={class:"flex justify-between items-center"},Oe={class:"flex justify-start items-center gap-3"},Ie={class:"flex justify-center items-center"},se=q({__name:"index",props:{title:String,size:{type:String,default:"small"},showTitleBar:{type:Boolean,default:!0}},setup(l){const n=l,o=e.computed(()=>{switch(n.size){case"small":return"14px";case"big":return"18px";default:return n.size}});return(t,a)=>(e.openBlock(),e.createElementBlock("div",Ae,[e.createElementVNode("div",Oe,[l.showTitleBar?(e.openBlock(),e.createElementBlock("div",{key:0,class:"blue-bar",style:e.normalizeStyle([{width:"3px","border-radius":"2px"},{height:o.value}])},null,4)):e.createCommentVNode("",!0),e.createElementVNode("b",{style:e.normalizeStyle({fontSize:o.value})},e.toDisplayString(l.title),5)]),e.createElementVNode("div",Ie,[e.renderSlot(t.$slots,"default",{},void 0,!0)]),e.createTextVNode("   ")]))}},[["__scopeId","data-v-f4694431"]]),je={__name:"index",props:{outClosable:{type:Boolean,default:()=>!1}},setup(l){const n=e.useAttrs();return e.onMounted(()=>{}),(o,t)=>(e.openBlock(),e.createBlock(e.unref(f.NDrawer),e.mergeProps({"close-on-esc":l.outClosable,"mask-closable":l.outClosable,"auto-focus":!1},e.unref(n)),{default:e.withCtx(()=>[e.createVNode(e.unref(f.NDrawerContent),{title:e.unref(n).title,closable:""},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"default")]),_:3},8,["title"])]),_:3},16,["close-on-esc","mask-closable"]))}},De={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ze=e.createVNode("path",{d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),Le=e.createVNode("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M338.29 338.29L448 448"},null,-1),Re=e.defineComponent({name:"SearchOutline",render:function(n,o){return e.openBlock(),e.createBlock("svg",De,[ze,Le])}}),Fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Pe=e.createVNode("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),qe=e.createVNode("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1),Me=e.defineComponent({name:"ReloadOutline",render:function(n,o){return e.openBlock(),e.createBlock("svg",Fe,[Pe,qe])}}),bt="",He={class:"list-page-content"},Ke={key:0,class:"list-page-search marB20"},We={class:"flex-1 justify-end flex"},Je={key:1,class:"overflow-hidden flex items-center justify-between",style:{"margin-bottom":"24px"}},Ge={style:{display:"flex"}},Xe={class:"list-page-table"},Ue=q({__name:"index",props:{config:{type:[Object,Function],default:()=>{}}},emits:["search","success","finally","rowLoad","rowExpand","onUpdateChecked"],setup(l,{expose:n,emit:o}){const t=l,a=e.ref(!1),_=e.useSlots(),b=e.useAttrs(),c=f.useDialog(),S=e.computed(()=>{var r,h,m,E,T;return((m=(h=(r=t==null?void 0:t.config)==null?void 0:r.params)==null?void 0:h.columns)==null?void 0:m.length)>0?(T=(E=t==null?void 0:t.config)==null?void 0:E.params)==null?void 0:T.columns:[]}),s=e.computed(()=>{var h,m;let r=((m=(h=t==null?void 0:t.config)==null?void 0:h.table)==null?void 0:m.title)||"";return Object.prototype.toString.call(r)==="[object Function]"?r():r}),k=e.ref({}),B=e.ref([]);let x=e.ref(0);const g=e.ref({page:1,pageSize:10,pageSizeOptions:[1,5,10,20,50],itemCount:0,isDel:0});function w(r){g.value.pageSize=r,u()}function M(r){g.value.page=r,u()}function D(r){var h,m,E;(E=(m=(h=t==null?void 0:t.config)==null?void 0:h.params)==null?void 0:m.change)==null||E.call(m,k.value,r)}let j=e.ref([]),F=e.ref({});function W(){S.value.length&&S.value.forEach(r=>{var h,m;r.type==="input"?k.value[r.propName]=((h=r==null?void 0:r.defaultValue)==null?void 0:h.xnsk_admin_ui_realValue)||"":r.type==="select"&&(k.value[r.propName]=r.defaultValue===""||r.defaultValue===void 0?null:(m=r.defaultValue)==null?void 0:m.xnsk_admin_ui_realValue)})}function ee(){var h,m,E,T;let r=((m=(h=t==null?void 0:t.config)==null?void 0:h.table)==null?void 0:m.columns)||[];B.value=r.map(($,A)=>{var H;let R={ellipsis:$.unEllipsis?!1:{tooltip:!0},align:(H=t==null?void 0:t.config)!=null&&H.isTree&&A===0?"left":$.align||"center",titleAlign:"center",resizable:!1};return $.customValue?R.render=O=>$.customValue(O):$.slot?R.render=O=>e.h(_[$.slot],O):R.render=O=>O[$.key]===null||O[$.key]===void 0||O[$.key]===""?"—":O[$.key],$.key==="actions"&&(R.fixed="right",R.render=O=>{var Z,le,ne;let U=[];return((ne=(le=(Z=t==null?void 0:t.config)==null?void 0:Z.table)==null?void 0:le.actions)==null?void 0:ne.length)>0&&t.config.table.actions.forEach(I=>{var N,X,K;let Q,te;((N=I.show)==null?void 0:N.xnsk_admin_ui_realType)==="function"?Q=I.show(O):Q=I.show,((X=I.disabled)==null?void 0:X.xnsk_admin_ui_realType)==="function"?te=I.disabled(O):te=(K=I.disabled)!=null?K:!1;let Y,ae=Object.prototype.toString.call(I.icon);ae==="[object String]"?Y=e.h("img",{src:I.icon},{default:()=>""}):ae==="[object Object]"&&(Y=I.icon),(Q||Q===void 0)&&U.push(e.h(f.NButton,{size:"small",quaternary:!0,type:I.type||"primary",disabled:te,onClick:()=>{I!=null&&I.autoWarn?c.warning({title:`确定${I.label}`,content:"",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{I.click(O)},onNegativeClick:()=>{}}):I.click(O)},style:"--n-opacity-disabled: 0;"},{default:()=>[Y&&e.h(f.NIcon,{component:Y}),e.h("div",{style:`margin-left:${Y?5:0}px;`},{default:()=>I.label})]}))}),e.h("div",{class:"flex"},{default:()=>[...U]})}),P(P({},R),$)}),(E=t==null?void 0:t.config)!=null&&E.expand&&B.value.unshift({type:"expand",align:"right",expandable:$=>!0,renderExpand:(T=t==null?void 0:t.config)==null?void 0:T.expand})}function p(r=[]){let h=Object.prototype.toString.call(r);if(h==="[object Array]")return r;if(h==="[object Object]")return Object.keys(r).map(T=>({label:r[T],value:T}))}function u(r={},h=null){var m,E,T,$;if(k.value=P(P({},k.value),r),((T=(E=(m=t==null?void 0:t.config)==null?void 0:m.data)==null?void 0:E.xnsk_admin_ui_realValue)==null?void 0:T.length)>0){if(($=t==null?void 0:t.config)!=null&&$.isTree){let A=t.config.data.xnsk_admin_ui_realValue.map(R=>fe(P({},R),{randomId:v()}));j.value=we(A)}else j.value=t.config.data.xnsk_admin_ui_realValue;g.value.itemCount=t.config.data.xnsk_admin_ui_realValue.length;return}t.config.apiName&&(a.value=!0,t.config.apiName(fe(P({},k.value),{pageNum:g.value.page,pageSize:g.value.pageSize})).then(A=>{var R,H,O;if(h&&h(A),A.status===200){let U=(A==null?void 0:A.list)||((R=A==null?void 0:A.data)==null?void 0:R.list)||[];(H=t==null?void 0:t.config)!=null&&H.isTree?j.value=U.map(Z=>fe(P({},Z),{getRandomId:v()})):j.value=U,F.value=A||{},g.value.itemCount=A.total||A.data.total,g.value.page=A.pageNum||A.data.pageNum,o("success",F.value)}else(O=t==null?void 0:t.config)!=null&&O.showErrMsg&&$message.error(A.message)}).finally(()=>{a.value=!1,o("finally")}))}function C(r){return new Promise((h,m)=>{o("rowLoad",r,(E=[])=>{r.children=E.map(T=>P({},T)),h()})})}const y=e.computed(()=>{var r,h,m,E,T,$,A,R,H,O;return((r=t==null?void 0:t.config)==null?void 0:r.expandedIndex)!==void 0?(O=(H=($=(m=j.value[(h=t.config)==null?void 0:h.expandedIndex])==null?void 0:m.did)!=null?$:(T=j.value[(E=t.config)==null?void 0:E.expandedIndex])==null?void 0:T.id)!=null?H:(R=j.value[(A=t.config)==null?void 0:A.expandedIndex])==null?void 0:R.randomId)!=null?O:"":null});function i(){g.value.page=1,u(),o("search")}function z(){return oe(this,null,function*(){for(let r in k.value)k.value[r]=null;i(),o("search")})}function d(r){var h;return r!=null&&r.show?((h=r.show)==null?void 0:h.xnsk_admin_ui_realType)==="function"?e.unref(r.show()):e.unref(r.show):!0}function J(r){var h;return r!=null&&r.disabled?((h=r.disabled)==null?void 0:h.xnsk_admin_ui_realType)==="function"?e.unref(r.disabled()):e.unref(r.disabled):!1}function V(r){return(r==null?void 0:r.xnsk_admin_ui_realType)==="function"?e.unref(r()):e.unref(r)}function ie(r){var h,m;((m=(h=t.config)==null?void 0:h.onUpdateChecked)==null?void 0:m.xnsk_admin_ui_realType)==="function"?t.config.onUpdateChecked(r):o("onUpdateChecked",r)}return e.onMounted(()=>{var r;W(),ee(),!((r=t.config)!=null&&r.unLoad)&&u(),x.value=B.value.reduce((h,m)=>h+(m.minWidth||m.width||0),0)}),e.watchEffect(()=>{var r,h,m,E,T;((h=(r=t.config)==null?void 0:r.data)==null?void 0:h.xnsk_admin_ui_realType)==="asyncfunction"?(E=(m=t.config)==null?void 0:m.data)==null||E.call(m).then($=>{j.value=$}):((T=t.config)==null?void 0:T.data)!==void 0&&u()}),n({getTableData:u,refresh:u,pageData:F,loading:a,params:k}),(r,h)=>{var E,T,$,A,R,H,O,U,Z,le,ne,I,Q,te,Y,ae;const m=e.resolveComponent("n-pagination");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["list-page",{noPadding:(E=t==null?void 0:t.config)==null?void 0:E.noPadding}]),style:e.normalizeStyle({height:($=(T=t==null?void 0:t.config)==null?void 0:T.height)!=null?$:"100%"})},[e.createElementVNode("div",He,[e.renderSlot(r.$slots,"top",{dataList:e.unref(j),loading:a.value},void 0,!0),S.value.length>0&&!l.config.params.hidden?(e.openBlock(),e.createElementBlock("div",Ke,[e.createVNode(e.unref(f.NGrid),{"x-gap":"12",cols:"3 s:3 m:4 l:5 xl:6",responsive:"screen"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.value,(N,X)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[N.hidden?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(f.NGi),{key:(N==null?void 0:N.did)||X},{default:e.withCtx(()=>[N.type==="input"?(e.openBlock(),e.createBlock(e.unref(f.NInput),{key:0,value:k.value[N.propName],"onUpdate:value":[K=>k.value[N.propName]=K,K=>D(N)],placeholder:N.placeholder||"请输入"+N.label,clearable:"",disabled:N.disabled===!0||!1,maxlength:N.maxlength||20,onKeyup:e.withKeys(i,["enter"])},null,8,["value","onUpdate:value","placeholder","disabled","maxlength","onKeyup"])):e.createCommentVNode("",!0),N.type==="select"?(e.openBlock(),e.createBlock(e.unref(f.NSelect),{key:1,value:k.value[N.propName],"onUpdate:value":[K=>k.value[N.propName]=K,K=>D(N)],options:p(N.selection),placeholder:N.placeholder||"请选择"+N.label,clearable:"",disabled:N.disabled===!0||!1},null,8,["value","onUpdate:value","options","placeholder","disabled"])):e.createCommentVNode("",!0)]),_:2},1024))],64))),256)),e.createVNode(e.unref(f.NGi),{suffix:!0},{default:e.withCtx(()=>[e.createElementVNode("div",We,[e.createVNode(e.unref(f.NButton),{type:"primary",onClick:i},{icon:e.withCtx(()=>[e.createVNode(e.unref(f.NIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(Re))]),_:1})]),default:e.withCtx(()=>[e.createTextVNode(" 查询")]),_:1}),e.createVNode(e.unref(f.NButton),{class:"ml-3",onClick:z},{icon:e.withCtx(()=>[e.createVNode(e.unref(f.NIcon),null,{default:e.withCtx(()=>[e.createVNode(e.unref(Me))]),_:1})]),default:e.withCtx(()=>[e.createTextVNode("重置")]),_:1})])]),_:1})]),_:1})])):e.createCommentVNode("",!0),e.renderSlot(r.$slots,"center",{dataList:e.unref(j),loading:a.value},void 0,!0),(R=(A=t==null?void 0:t.config)==null?void 0:A.table)!=null&&R.title||(O=(H=t==null?void 0:t.config)==null?void 0:H.table)!=null&&O.headBtns?(e.openBlock(),e.createElementBlock("div",Je,[(Z=(U=t==null?void 0:t.config)==null?void 0:U.table)!=null&&Z.title?(e.openBlock(),e.createBlock(e.unref(se),{key:0,size:"16px",title:s.value},null,8,["title"])):e.createCommentVNode("",!0),e.createElementVNode("p",Ge,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(((ne=(le=t==null?void 0:t.config)==null?void 0:le.table)==null?void 0:ne.headBtns)||[],(N,X)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[d(N)?(e.openBlock(),e.createBlock(e.unref(f.NButton),{type:N.type||"primary",class:"marL15",key:X,loading:V(N.loading),disabled:J(N),onClick:N.click},{default:e.withCtx(()=>[N.icon?(e.openBlock(),e.createBlock(e.unref(f.NIcon),{key:0,component:N.icon,style:{"margin-right":"8px"}},null,8,["component"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(N.label),1)]),_:2},1032,["type","loading","disabled","onClick"])):e.createCommentVNode("",!0)],64))),256))])])):e.createCommentVNode("",!0),e.renderSlot(r.$slots,"tableHeader",{dataList:e.unref(j),loading:a.value},void 0,!0),e.createElementVNode("div",Xe,[e.createVNode(e.unref(f.NDataTable),e.mergeProps({columns:B.value,data:e.unref(j),"scroll-x":e.unref(x),striped:"",loading:a.value,"row-key":N=>{var X,K,me;return(me=(K=(X=N.did)!=null?X:N.id)!=null?K:N.randomId)!=null?me:""},pagination:((I=t==null?void 0:t.config)==null?void 0:I.data)&&!((Q=t==null?void 0:t.config)!=null&&Q.unPagination)&&{page:g.value.page,pageSize:g.value.pageSize,showSizePicker:!0,pageSizes:g.value.pageSizeOptions,itemCount:g.value.itemCount,showQuickJumper:!0},"on-update:page-size":w,"on-update:page":M,"on-update:checked-row-keys":ie,"children-key":(te=t==null?void 0:t.config)!=null&&te.isTree?((Y=t==null?void 0:t.config)==null?void 0:Y.childrenKey)||"children":null,"default-expanded-row-keys":[y.value],onLoad:C},e.unref(b)),null,16,["columns","data","scroll-x","loading","row-key","pagination","children-key","default-expanded-row-keys"])]),e.renderSlot(r.$slots,"footer",{dataList:e.unref(j),loading:a.value},void 0,!0)]),(ae=t==null?void 0:t.config)!=null&&ae.data?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(m,{key:0,class:"list-page-table-pagination",page:g.value.page,"onUpdate:page":h[0]||(h[0]=N=>g.value.page=N),"page-size":g.value.pageSize,"onUpdate:pageSize":h[1]||(h[1]=N=>g.value.pageSize=N),"page-sizes":g.value.pageSizeOptions,"item-count":g.value.itemCount,"on-update:page-size":w,"on-update:page":M,"show-size-picker":"","show-quick-jumper":""},null,8,["page","page-size","page-sizes","item-count"]))],6)}}},[["__scopeId","data-v-99443b43"]]),Bt="",Ye={key:0,class:"form-btns"},Ze=q({__name:"index",props:{config:{type:Object,default:{}},defaultValue:{type:Object,default:{}}},emits:["submit","cancel","change"],setup(l,{expose:n,emit:o}){const t=l,a={input:"请输入",textarea:"请输入",select:"请选择",radio:"请选择",checkbox:"请选择",slot:"缺少"},_=e.ref("from_"+v()),b=e.useSlots();e.useAttrs();const c=e.ref({}),S=e.ref({}),s=e.computed(()=>{var p,u,C;return(u=(p=t.config)==null?void 0:p.submitBtn)!=null&&u.loading?((C=t.config.submitBtn.loading)==null?void 0:C.xnsk_admin_ui_realType)==="function"?e.unref(t.config.submitBtn.loading()):e.unref(t.config.submitBtn.loading):!1}),k=e.computed(()=>{var u,C;let p=[];if(((C=(u=t.config)==null?void 0:u.columns)==null?void 0:C.length)>0)return t.config.columns.forEach(y=>{var J,V,ie,r;let i={};i.label=y.label,i.type=y.type,i.useFormItem=y.useFormItem||!1,i.propName=y.propName,i.required=y.required,i.maxlength=y.maxlength,i.rows=y.rows||9,i.validator=y.validator||null,i.trigger=y.trigger||((J=t.config)==null?void 0:J.trigger)||"blur",i.selection=y.selection||[],i.span=y.span||24,i.offset=y.offset||0,i.onInput=y.onInput||null,i.text=y.text||"",i.style=y.style||"";let z={required:i==null?void 0:i.required,trigger:i.trigger,key:i==null?void 0:i.propName,validator(h,m){var E,T;if(((E=i==null?void 0:i.validator)==null?void 0:E.xnsk_admin_ui_realType)==="function")return i==null?void 0:i.validator(m);if(((T=i==null?void 0:i.validator)==null?void 0:T.xnsk_admin_ui_realType)===void 0)return i!=null&&i.required&&[null,void 0,""].includes(m)?new Error(`${a[i.type]}${i.label}`):(m==null?void 0:m.xnsk_admin_ui_realType)==="array"&&m.length===0?new Error(`${a[i.type]}${i.label}`):!0}};S.value[i.propName]=z,y.disabled!==void 0&&(((V=y.disabled)==null?void 0:V.xnsk_admin_ui_realType)==="function"?y.disabled():y.disabled)&&(i.disabled=!0),y.readonly!==void 0&&(((ie=y.readonly)==null?void 0:ie.xnsk_admin_ui_realType)==="function"?y.readonly():y.readonly)&&(i.readonly=!0),(y.show===void 0||(((r=y.show)==null?void 0:r.xnsk_admin_ui_realType)==="function"?y.show(c.value):y.show))&&p.push(i)}),p});B(),e.watchEffect(()=>{Object.keys(t.defaultValue).forEach(u=>{var y;let C=(y=t.config)==null?void 0:y.columns.find(i=>i.propName===u);C&&(c.value[u]=w(C))})});function B(){var u;(((u=t.config)==null?void 0:u.columns)||[]).forEach(C=>{switch(C.type){case"input":case"textarea":C.propName&&(c.value[C.propName]="");break;case"select":C.propName&&(c.value[C.propName]=null);break}})}function x(p){return p.placeholder?p.placeholder:p.type==="select"?`请选择${p.label}`:`请输入${p.label}`}function g(p){var C;let u=((C=p.selection)==null?void 0:C.xnsk_admin_ui_realType)==="function"?e.unref(p.selection()):e.unref(p.selection);return u.xnsk_admin_ui_realType==="array"?u:Object.keys(u).map(i=>({label:u[i],value:i}))}function w(p){var u,C;return(C=(u=t.defaultValue)==null?void 0:u[p.propName])!=null?C:p.type==="select"?null:""}function M(){var p,u;(u=(p=t==null?void 0:t.config)==null?void 0:p.cancelBtn)!=null&&u.click?t.config.cancelBtn.click():o("cancel")}function D(p,u){var C,y,i,z;if(((C=u==null?void 0:u.onInput)==null?void 0:C.xnsk_admin_ui_realType)==="function"){let d=(y=u==null?void 0:u.onInput)==null?void 0:y.call(u,p);d!==void 0&&(c.value[u.propName]=d)}(i=t.config)!=null&&i.change?(z=t.config)==null||z.change(e.unref(c.value),u,p):o("change",e.unref(c.value),u,p)}function j(){var p;(p=_.value)==null||p.validate(u=>{var C,y;u||((y=(C=t.config)==null?void 0:C.submitBtn)!=null&&y.click?$dialog.warning({title:"确定提交？",content:"",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{var i,z;(z=(i=t.config)==null?void 0:i.submitBtn)==null||z.click(e.unref(c.value))},onNegativeClick:()=>{}}):$dialog.warning({title:"确定提交？",content:"",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{o("submit",e.unref(c.value))},onNegativeClick:()=>{}}))})}function F(p,u){var C,y;if((u==null?void 0:u.xnsk_admin_ui_realType)===void 0)(C=_.value)==null||C.validate(i=>p&&p(i));else{let i=u.xnsk_admin_ui_realType==="string"?[u]:u;(y=_.value)==null||y.validate(z=>{p&&p(z)},z=>i.includes(z==null?void 0:z.key))}}function W(){return c.value}function ee(p={}){Object.keys(p).forEach(C=>{c.value[C]=p[C]})}return n({validate:F,getValue:W,setValue:ee}),(p,u)=>{var i,z;const C=e.resolveComponent("n-space"),y=e.resolveDirective("trim");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(e.unref(f.NForm),{model:c.value,rules:S.value,ref:d=>{_.value=d},"label-placement":"left","label-width":l.config.labelWidth||"auto","require-mark-placement":"right"},{default:e.withCtx(()=>[e.createVNode(e.unref(f.NGrid),{"x-gap":"12",cols:24},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,d=>(e.openBlock(),e.createBlock(e.unref(f.NGi),{class:e.normalizeClass({"is-slot":d.type==="slot"&&!d.useFormItem}),key:d.propName,span:d.span,offset:d.offset},{default:e.withCtx(()=>[e.createVNode(e.unref(f.NFormItem),{label:d.type==="slot"&&!d.useFormItem?null:d.label,path:d.propName},{default:e.withCtx(()=>{var J;return[d.type==="input"?e.withDirectives((e.openBlock(),e.createBlock(e.unref(f.NInput),{key:0,value:c.value[d.propName],"onUpdate:value":[V=>c.value[d.propName]=V,V=>D(V,d)],placeholder:x(d),maxlength:d.maxlength||20,disabled:d.disabled,readonly:d.readonly},null,8,["value","onUpdate:value","placeholder","maxlength","disabled","readonly"])),[[y]]):e.createCommentVNode("",!0),d.type==="textarea"?e.withDirectives((e.openBlock(),e.createBlock(e.unref(f.NInput),{key:1,value:c.value[d.propName],"onUpdate:value":[V=>c.value[d.propName]=V,V=>D(V,d)],type:"textarea",placeholder:x(d),maxlength:d.maxlength||200,rows:d.rows||9,"show-count":"",disabled:d.disabled,readonly:d.readonly},null,8,["value","onUpdate:value","placeholder","maxlength","rows","disabled","readonly"])),[[y]]):e.createCommentVNode("",!0),d.type==="select"?(e.openBlock(),e.createBlock(e.unref(f.NSelect),{key:2,value:c.value[d.propName],"onUpdate:value":[V=>c.value[d.propName]=V,V=>D(V,d)],options:g(d),placeholder:x(d),disabled:d.disabled,readonly:d.readonly},null,8,["value","onUpdate:value","options","placeholder","disabled","readonly"])):e.createCommentVNode("",!0),d.type==="radio"?(e.openBlock(),e.createBlock(e.unref(f.NRadioGroup),{key:3,value:c.value[d.propName],"onUpdate:value":[V=>c.value[d.propName]=V,V=>D(V,d)],name:d.propName,disabled:d.disabled,readonly:d.readonly},{default:e.withCtx(()=>[e.createVNode(C,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g(d),V=>(e.openBlock(),e.createBlock(e.unref(f.NRadio),{key:V.value,value:V.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(V.label),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value","name","disabled","readonly"])):e.createCommentVNode("",!0),d.type==="checkbox"?(e.openBlock(),e.createBlock(e.unref(f.NCheckboxGroup),{key:4,value:c.value[d.propName],"onUpdate:value":V=>c.value[d.propName]=V},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.value[d.propName])+" ",1),e.createVNode(C,{"item-style":"display: flex;"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g(d),V=>(e.openBlock(),e.createBlock(e.unref(f.NCheckbox),{key:V.value,value:V.value,label:V.label},null,8,["value","label"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):e.createCommentVNode("",!0),d.type==="text"?(e.openBlock(),e.createElementBlock("span",{key:5,style:e.normalizeStyle(d.style)},e.toDisplayString(((J=d.text)==null?void 0:J.xnsk_admin_ui_realType)==="function"?d.text():d.text),5)):e.createCommentVNode("",!0),d.type==="slot"?e.renderSlot(p.$slots,d.propName,{key:6,data:c.value,item:d},void 0,!0):e.createCommentVNode("",!0)]}),_:2},1032,["label","path"])]),_:2},1032,["class","span","offset"]))),128))]),_:3})]),_:3},8,["model","rules","label-width"]),e.unref(b).btns?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",Ye,[(i=l.config)!=null&&i.submitBtn?(e.openBlock(),e.createBlock(e.unref(f.NButton),{key:0,class:"btn",type:"primary",loading:s.value,onClick:j},{default:e.withCtx(()=>{var d,J;return[e.createTextVNode(e.toDisplayString(((J=(d=l.config)==null?void 0:d.submitBtn)==null?void 0:J.label)||"确定"),1)]}),_:1},8,["loading"])):e.createCommentVNode("",!0),(z=l.config)!=null&&z.submitBtn?(e.openBlock(),e.createBlock(e.unref(f.NButton),{key:1,onClick:M},{default:e.withCtx(()=>[e.createTextVNode(" 取消 ")]),_:1})):e.createCommentVNode("",!0)])),e.unref(b).btns?e.renderSlot(p.$slots,"btns",{key:1},void 0,!0):e.createCommentVNode("",!0)])}}},[["__scopeId","data-v-517828f9"]]),wt="",Qe={class:"form-btns flex justify-center sticky marB20 relative",style:{bottom:"0",padding:"20px","background-color":"#fff","z-index":"103"}},ve=q({__name:"index",setup(l){return(n,o)=>(e.openBlock(),e.createElementBlock("div",Qe,[e.createVNode(e.unref(f.NSpace),{size:[40,20]},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"default",{},void 0,!0)]),_:3})]))}},[["__scopeId","data-v-d8c9c3a7"]]),St="",et={class:"info-page-value inline-block marL5 padR10 break-all",else:""},tt=q({__name:"index",props:{config:{type:Object,defualt:()=>{}},data:{type:Object,defualt:()=>{}}},setup(l){const n=l;e.useAttrs();function o(t){var a;return typeof t=="string"?n.data?(n==null?void 0:n.data[t])||"-":((a=n.config)==null?void 0:a.data[t])||"-":Object.prototype.toString.call(t)==="[object Function]"?t():""}return(t,a)=>{var _;return e.openBlock(),e.createElementBlock("div",null,[l.config.title?(e.openBlock(),e.createBlock(e.unref(se),{key:0,class:"marT5 marB15",title:l.config.title||""},null,8,["title"])):e.createCommentVNode("",!0),e.createVNode(e.unref(f.NGrid),{class:e.normalizeClass({"has-border":(_=l.config)==null?void 0:_.border})},{default:e.withCtx(()=>{var b;return[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(((b=l.config)==null?void 0:b.column)||[],(c,S)=>{var s;return e.openBlock(),e.createBlock(e.unref(f.NGi),{class:"info-page-item flex items-baseline",key:(c==null?void 0:c.did)||S,span:(s=c.span)!=null?s:8},{default:e.withCtx(()=>{var k,B;return[c.labelSlot?e.renderSlot(t.$slots,c.labelSlot,{key:0},void 0,!0):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"info-page-label inline-block padT10 padB10 padR10",else:"",style:e.normalizeStyle({minWidth:l.config.labelWidth?l.config.labelWidth+"px":"auto","text-align":(k=l.config.labelAlign)!=null?k:"left"})},e.toDisplayString(c.label)+e.toDisplayString((B=l.config)!=null&&B.useColon?":":""),5),c.slot?e.renderSlot(t.$slots,c.slot,{key:1},void 0,!0):e.createCommentVNode("",!0),e.createElementVNode("span",et,e.toDisplayString(o(c.value)),1)]}),_:2},1032,["span"])}),128))]}),_:3},8,["class"])])}}},[["__scopeId","data-v-de364537"]]),Et="",lt={class:"markdown-view overflow-hidden html-default-css"},nt=["innerHTML"],at=q(Object.assign({name:"XnskMdPreview"},{props:{value:{type:String,default:""},type:{type:String,default:"url"}},setup(l){const n=l,o=new L;let t=e.ref(!0),a=e.ref("");function _(){return oe(this,null,function*(){t.value=!1,a.value="";let b=yield Ce(n.value);b&&(a.value=o.render(b)),t.value=!0})}return e.watchEffect(()=>{n.value?n.type==="url"?_():a.value=o.render(n.value):a.value=""}),(b,c)=>(e.openBlock(),e.createElementBlock("div",lt,[e.withDirectives(e.createVNode(e.unref(f.NSpin),{class:"loading",size:"large"},null,512),[[e.vShow,!e.unref(t)]]),l.value?(e.openBlock(),e.createElementBlock("div",{key:0,innerHTML:e.unref(a),style:{padding:"20px","border-radius":"6px"}},null,8,nt)):(e.openBlock(),e.createBlock(e.unref(f.NEmpty),{key:1,description:"无数据",style:{"margin-top":"60px"}}))]))}}),[["__scopeId","data-v-cd3c3a52"]]),ot=["onClick"],rt={__name:"index",props:{checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(l,{emit:n}){const o=e.ref([]);function t(){ue.init({projectId:"20230704143829127",sceneCode:"scdl",debug:!0,authContext:"https://xnsk.mapfarm.com",userId:""}).then(b=>{var c;o.value=(c=b==null?void 0:b.agreementList)!=null?c:[]}).catch(b=>{console.log(b.message||b.msg||"系统异常"),$message.error(b.message||b.msg||"系统异常")})}t();function a(b){b&&window.open(b)}function _(b){n("update:checked",b)}return(b,c)=>(e.openBlock(),e.createElementBlock("div",null,[e.createVNode(e.unref(f.NCheckbox),{"default-checked":l.checked,"onUpdate:checked":_},null,8,["default-checked"]),e.createTextVNode(" 请阅读 "),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(S,s)=>(e.openBlock(),e.createElementBlock("span",{class:"cursor-pointer",style:{color:"#2d8cf0"},key:S.did||s,onClick:k=>a(S.agreementUrl)}," 《"+e.toDisplayString(S.agreementName)+"》 ",9,ot))),128)),e.createTextVNode("，并同意 ")]))}},At="",ct=q({__name:"index",props:{value:{type:Array,default:[]},treeData:{type:Array,default:[]},dataKey:{type:String,default:"did"},label:{type:String,default:"name"},childrenKey:{type:String,default:"children"},checkable:{type:Boolean,default:!1},search:{type:Boolean,default:!1},cancelable:{type:Boolean,default:!1}},emits:["click","update:value","select"],setup(l,{emit:n}){const o=l,t=e.ref("tree_"+v()),a=e.useAttrs(),_=e.ref(""),b=e.computed(()=>Ne(o.treeData,o.childrenKey||"children"));function c(x,g,w){n("update:value",s())}function S(x,g,w){n("update:value",s())}function s(){var D,j,F;let x=(j=(D=t.value.getCheckedData())==null?void 0:D.keys)!=null?j:[],g=(F=t.value.getIndeterminateData().keys)!=null?F:[],w=x.map(W=>[W,1]),M=g.map(W=>[W,0]);return[...w,...M]}function k(x,g,w){n("select",x,g,w)}function B({option:x}){return{onClick(){n("click",x)}}}return(x,g)=>(e.openBlock(),e.createElementBlock("div",null,[l.search?(e.openBlock(),e.createBlock(e.unref(f.NInput),{key:0,class:"marB10",value:_.value,"onUpdate:value":g[0]||(g[0]=w=>_.value=w),placeholder:"搜索",clearable:""},null,8,["value"])):e.createCommentVNode("",!0),e.createVNode(e.unref(f.NTree),e.mergeProps({ref:w=>{t.value=w},"block-line":"",data:b.value,"default-checked-keys":(l.value||[]).filter(w=>w[1]===1).map(w=>w[0]),"indeterminate-keys":(l.value||[]).filter(w=>w[1]===0).map(w=>w[0]),"key-field":l.dataKey,"label-field":l.label,"children-field":l.childrenKey,pattern:_.value,checkable:l.checkable,"node-props":B,cancelable:l.cancelable,cascade:"",selectable:"","show-irrelevant-nodes":!1},e.unref(a),{"onUpdate:checkedKeys":c,"onUpdate:indeterminateKeys":S,"onUpdate:selectedKeys":k}),null,16,["data","default-checked-keys","indeterminate-keys","key-field","label-field","children-field","pattern","checkable","cancelable"])]))}},[["__scopeId","data-v-7cebb098"]]),ye=(l,n,o="",t={},a={})=>(l.interceptors.request.use(_=>(n.beforeRequest&&n.beforeRequest(_,a!=null?a:{}),_)),new Promise((_,b)=>{l.post(o,t).then(c=>{var S,s;((S=c.data)==null?void 0:S.status)!==200&&((s=n==null?void 0:n.onError)==null||s.call(n,c.data,a!=null?a:{})),_(c.data)}).catch(c=>{var S,s,k,B;(s=n==null?void 0:n.onNetWorkError)==null||s.call(n,(S=c==null?void 0:c.response)!=null?S:{data:{status:500,data:null,message:(c==null?void 0:c.message)||"系统异常"}},a!=null?a:{}),_((B=(k=c==null?void 0:c.response)==null?void 0:k.data)!=null?B:{status:500,data:null,message:c.message})}).finally(()=>{})}));function st(l=null){let n=null;const o={beforeRequest:null,onNetWorkError:null,onError:null},t=(s,k)=>{s.config.globalProperties.$miniHttp=a(k)},a=(s={})=>{o.beforeRequest=(s==null?void 0:s.beforeRequest)||null,o.onNetWorkError=(s==null?void 0:s.onNetWorkError)||null,o.onError=(s==null?void 0:s.onError)||null;const k={baseURL:(s==null?void 0:s.baseURL)||"",timeout:(s==null?void 0:s.timeout)||6e4,headers:(()=>{let B={},x=Object.prototype.toString.call(s==null?void 0:s.headers);return x==="[object Object]"?B=s.headers:x==="[object Function]"&&(B=s.headers()),B})()};return n=re.create(k),_.bind(this)},_=(s={},k=null)=>{let B=Object.prototype.toString.call(s);if(B==="[object Object]")return b(s);if(B==="[object String]")return s.includes("/")?c(s,k):S(s,k)},b=(s={})=>{let k={};return Object.keys(s).forEach(B=>{var g,w;let x=Object.prototype.toString.call(s[B]);x==="[object String]"?s[B].includes("/")?k[B]=c(s[B]):k[B]=S(s[B]):x==="[object Array]"&&(s[B][0].includes("/")?k[B]=c(s[B][0],(g=s[B])==null?void 0:g[1]):k[B]=S(s[B][0],(w=s[B])==null?void 0:w[1]))}),k},c=(s="",k)=>(B,x={})=>ye(n,o,s,B,P(P({},k||{}),x||{})),S=(s="",k={})=>(B={},x={})=>ye(n,o,"/less/api/auth/common",{apiCode:s,queryParam:B},P(P({},k||{}),x||{}));return l?a(l):{install:t,create:a}}const dt=st({baseURL:"",beforeRequest:(l,n)=>{var a;console.log("[ extendsConfig ] >",n);const{token:o=""}=n;l.headers.Authorization=o,l.headers.appcode="xnsk_admin_ui";const t=(a=n==null?void 0:n["Content-Type"])!=null?a:"application/json;charset=UTF-8";l.headers["Content-Type"]=t},onNetWorkError:(l,n)=>{console.log(" 异常 >",l,n)},onError:(l,n)=>{console.log(" 异常 >",l,n)}}),jt="",it={style:{width:"100%"}},ft={class:"inline-block uploadBtn"},ut={key:0,style:{"font-size":"40px","line-height":"20px"}},de=Object.freeze(Object.defineProperty({__proto__:null,BlueTitle:se,Dialog:ke,DialogMsg:$e,Drawer:je,Form:Ze,FormBtns:ve,Info:tt,ListPage:Ue,LoginAgreement:rt,MarkDown:at,TreeSync:ct,UploadFileList:q({__name:"index",props:{value:{type:String,default:""},showFileList:{type:Boolean,default:()=>!0},autoUpload:{type:Boolean,default:()=>!0},multipleUpload:{type:Boolean,default:()=>!1},bucket:{type:String,default:"xnsk-base"},path:{type:String,default:"base/permission"},url:{type:String,default:""},params:{type:Object,default:{}},token:{type:String,default:""}},emits:["change","fileChange","update:value","update:fileList"],setup(l,{expose:n,emit:o}){const t=l,a=e.useAttrs(),_=e.ref("ref"+new Date().getTime()+parseInt(Math.random()*1e4));let b=e.ref(!1);const c=e.ref([]);e.watch(()=>t.value,x=>{if([null,void 0].includes(x)){c.value.splice(0);return}x._split(",").forEach(w=>{c.value.find(D=>D.url===w)||c.value.push({url:w,status:"finished"})})},{deep:!0,immediate:!0});const S=M=>oe(this,[M],function*({file:x,onFinish:g,onError:w}){var W,ee;let D=new FormData;D.append("file",x.file),D.append("bucket",t.bucket),D.append("pathPrefix",t.path),Object.keys(t.params).forEach(p=>{D.append(p,t.params[p])});let F=yield dt(t.url,{"Content-Type":"multipart/form-data;charset=UTF-8",token:t.token})(D);if((F==null?void 0:F.status)===200){const p=ge(10);x.url=(ee=(W=F==null?void 0:F.data)==null?void 0:W.url)!=null?ee:"",x.name=p,g()}else w()});function s(x){}function k(x){return oe(this,null,function*(){var g;return((g=a==null?void 0:a.accept)==null?void 0:g.indexOf(Se(x.file.name,".")))===-1?($message.error("格式不正确"),!1):x.file.size/1024>t.maxSize?($message.error("文件大小超出限制"),!1):!0})}function B({file:x,fileList:g}){let w=(g||[]).filter(M=>M.url).map(M=>M.url);o("update:value",w.join(",")),o("update:fileList",g)}return n({submitFile:()=>{var x;(x=_.value)==null||x.submit()}}),(x,g)=>(e.openBlock(),e.createElementBlock("div",it,[e.createVNode(e.unref(f.NUpload),e.mergeProps({ref:w=>{_.value=w},"file-list":c.value,"onUpdate:fileList":g[0]||(g[0]=w=>c.value=w),onRemove:s,multiple:l.multipleUpload,"default-upload":l.autoUpload,"custom-request":S,onBeforeUpload:k,onChange:B},e.unref(a)),{default:e.withCtx(()=>{var w;return[e.createElementVNode("span",ft,[((w=e.unref(a))==null?void 0:w["list-type"])==="image-card"?(e.openBlock(),e.createElementBlock("span",ut,"+")):e.renderSlot(x.$slots,"uploadBtn",{key:1,loading:e.unref(b)},void 0,!0)])]}),_:3},16,["file-list","multiple","default-upload"])]))}},[["__scopeId","data-v-742f8af6"]])},Symbol.toStringTag,{value:"Module"})),Lt="";return P({install:function(l,n={}){for(let o in de)o.startsWith("Xnsk")?l.component(o,de[o]):l.component("Xnsk"+o,de[o])}},de)});
//# sourceMappingURL=xnsk-admin-ui.umd.cjs.map
