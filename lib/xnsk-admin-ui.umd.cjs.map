{"version":3,"file":"xnsk-admin-ui.umd.cjs","sources":["../src/components/Dialog/index.vue","../src/assets/img/copy.png","../src/utils/index.js","../src/components/DialogMsg/index.vue","../src/components/BlueTitle/index.vue","../src/components/Drawer/index.vue","../src/icon/SearchOutline.js","../src/icon/ReloadOutline.js","../src/components/ListPage/index.vue","../src/components/Form/index.vue","../src/components/Info/index.vue","../src/components/MarkDown/index.vue","../src/components/LoginAgreement/index.vue","../src/components/TreeSync/index.vue","../src/http/js/index.js","../src/http/index.js","../src/components/UploadFileList/index.vue","../index.js"],"sourcesContent":["<!--\n  弹窗模板 \n  v-model:show 是否显示\n  title 标题（如果不传，头部左侧蓝色竖条也不显示）\n  width 宽\n  height 高 （默认auto，如果内容太多需要需要滚动条，请设置具体高度）\n  footBtns 底部按钮（默认确定+取消，不需要按钮时传空数组），默认第一个按钮实心，第二个空心。特殊情况直接使用#footBtn的slot自定义\n  callback 按钮点击事件（参数function,和footBtns顺序一一对应） \n  loading 提交按钮的loading\n  @beforeClose 关闭拦截 参数：function，执行该function即执行关闭。不监听则点击取消或叉号直接关闭\n  lock 是否锁定？默认为true，不支持点击蒙层和ESC关闭\n  其他参数参考n-modal（部分参数已固定，不支持定制，如：preset、close-on-esc、mask-closable、trap-focus）\n\n  ……其他参数/功能持续维护\n\n  样例：\n  <xn-dialog\n    title=\"标题\"\n    v-model:show=\"true\"\n    width=\"600\"\n    height=\"auto\"\n    :footBtns=\"['确定', '取消']\"\n    :callback=\"[submitHandler,cancelHandler]\"\n    @beforeClose=\"beforeClose\"\n  >\n    /* 弹窗主体内容 */\n  </xn-dialog>\n<script setup>\n  import { useDialog } from 'naive-ui'\n  const dialog = useDialog()\n  /* 关闭拦截 */\n  function beforeClose(done){\n      dialog.warning({\n          title: '警告',\n          content: '确定关闭？',\n          positiveText: '确定',\n          negativeText: '取消',\n          onPositiveClick: () => {\n            done()\n          },\n          onNegativeClick: () => {\n          }\n        })\n  }\n</script>\n \n-->\n<template>\n  <n-modal\n    v-model:show=\"isShow\"\n    :trap-focus=\"false\"\n    preset=\"card\"\n    :close-on-esc=\"!lock\"\n    :mask-closable=\"!lock\"\n    class=\"dialog-templete\"\n    :style=\"{\n      width: width + 'px',\n      height: height + 'px',\n    }\"\n  >\n    <template #header>\n      <BlueTitle v-if=\"title\" :title=\"title\" />\n    </template>\n    <template #default>\n      <slot></slot>\n    </template>\n    <template #footer>\n      <slot v-if=\"slot.footBtn\" name=\"footBtn\"></slot>\n      <div v-else class=\"dialog-templete-btns\">\n        <n-button v-if=\"footBtns.length > 0\" type=\"info\" @click=\"submitClick\">\n          {{ footBtns[0] }}\n        </n-button>\n        <n-button\n          v-if=\"footBtns.length > 1\"\n          type=\"info\"\n          ghost\n          @click=\"cancelClick\"\n        >\n          {{ footBtns[1] }}\n        </n-button>\n      </div>\n    </template>\n  </n-modal>\n</template>\n<script>\n/* import { defineComponent } from \"vue\";\nexport default defineComponent({\n  name: \"XnDialog\",\n}); */\n</script>\n<script setup>\nimport { useDialog, NModal, NButton } from \"naive-ui\";\nimport { watch, ref, computed, reactive, useSlots, useAttrs } from \"vue\";\nimport { BlueTitle } from \"../index\";\n\nconst emit = defineEmits([\"update:show\"]);\nconst attrs = useAttrs();\nconst slot = useSlots();\n\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false,\n  },\n  title: {\n    type: String,\n    default: \"\",\n  },\n  width: {\n    type: [Number, String],\n    default: \"600\",\n  },\n  height: {\n    type: [Number, String],\n    default: \"auto\",\n  },\n  footBtns: {\n    type: Array,\n    default: [\"确定\", \"取消\"],\n  },\n  loading: {\n    type: Boolean,\n    default: false,\n  },\n  callback: {\n    type: Array,\n    default: [],\n  },\n  //是否锁定\n  lock: {\n    type: Boolean,\n    defualt: false,\n  },\n});\n/* 是否显示弹窗 */\nlet isShow = computed({\n  get() {\n    return props.show;\n  },\n  set(val) {\n    if (!val) {\n      cancelClick();\n    }\n  },\n});\n\n/* 提交 */\nfunction submitClick() {\n  props.callback[0] && props.callback[0]();\n}\n/* 取消 */\nfunction cancelClick() {\n  if (attrs.onBeforeClose) {\n    emit(\"beforeClose\", () => {\n      if (props.callback[1]) {\n        emit(\"update:show\", false);\n        props.callback[1] && props.callback[1]();\n      }\n    });\n  } else {\n    emit(\"update:show\", false);\n    props.callback[1] && props.callback[1]();\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dialog-templete-btns {\n  text-align: center;\n  .n-button {\n    margin: 10px 10px 0 10px;\n  }\n}\n</style>\n<style lang=\"scss\">\n.n-modal.dialog-templete {\n  border-radius: 10px;\n  box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.11);\n  max-height: 95vh;\n  max-width: 95vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  .n-card__content {\n    flex: 1;\n    overflow: auto;\n  }\n}\n</style>\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACPklEQVRYR+2XT4hPURTHP19/M9GMlFK2NlZqkiz8WymKUqRJZJIiTRYWylZKoRBlxcbWikgkRUnIhtmQ8qekjBFFSl+d6b3p9fJ+v3ffm9+Uclav+84953POvffcc0UXsb0LOAgMAnO66Zf+G3gHXAOOS/pcnq9OBm1fAfYkOq1SfwlskPSpqFAJYHs/cGmKnOdmXgDripnoBHAHWN8QIOzOqJh7QdKh/F/HJWjoHNvhfG22d7aX7PwClkl6G+M9ASg6tD0CnC1BnJZ0ZBLA9lzgJLADWNI08mzeG+A2cFTSeIzZvg5sLth9IGnNBECWrrst1ruK9zWwKjac7U3AjYLiN6BfkgPgAHCxZdRV0y9LGrbdD4yVNmafpB8BcK8H0edAEelCSb9tx/f8AukkQFSqpT3KQJhdJGnsP0CTDETBSJGqiyp5CR4CQ3mlqktgewA4D8TtWZRkgJWSntR1XKp6fcBXYFZhPBkgisfjhgBxzL60BYjoh4FXiRCLgTPAtrZLkOi3q3ryEnS1mKjw7wJ8T4w0TsDfuqDkDNwHdkr6mAJgO07AOWBv2004KOlZivNc1/a8rA7MblMHVkt61BBgQVYHZrYBeA7sA6KjiYdFXYk6cArYUmMJRiUtD71oSKa7H/gJbJUUfeO0AsTL6ClwQtJonqXIwC1gY908J+rFUR6IlqxqXgAMAVcTDddVvykpOuJKmXiY2I6uOLrjqZS4FeNIxzuhM0AGsRs4DKxo+WL6AMQ745ik990i+gN2mEgw/3nqggAAAABJRU5ErkJggg==\"","//写入内容到剪切板中\nexport function writeToClipBoard (content) {\n  let writeStr = \"\"\n  if (Object.prototype.toString.call(content) === \"[object String]\") {\n    writeStr = JSON.stringify(content)\n  } else {\n    writeStr = content\n  }\n  return new Promise((resolve, reject) => {\n    if (navigator.clipboard) {\n      // clipboard api 复制\n      navigator.clipboard.writeText(writeStr)\n    } else {\n      let textarea = document.createElement(\"textarea\")\n      document.body.appendChild(textarea)\n      textarea.style.position = \"fixed\"\n      textarea.style.clip = \"rect(0 0 0 0)\"\n      textarea.style.top = \"10px\"\n      textarea.value = writeStr\n      textarea.select()\n      document.execCommand(\"copy\", true)\n      document.body.removeChild(textarea)\n    }\n    resolve()\n  })\n}\n\n//获取真实类型\nexport function realType (val) {\n  let _type = Object.prototype.toString.call(val)\n  return _type.slice(8, _type.length - 1).toLowerCase()\n}\n\n//获取真实值\nexport function realValue (val) {\n  return Object.prototype.toString.call(val) === \"[object Function]\"\n    ? val()\n    : val\n}\n//原型加方法 \nObject.defineProperty(Object.prototype, \"xnsk_admin_ui_realType\", {\n  get () {\n    let _type = Object.prototype.toString.call(this)\n    return _type.slice(8, _type.length - 1).toLowerCase()\n  },\n})\nObject.defineProperty(Object.prototype, \"xnsk_admin_ui_realValue\", {\n  get () {\n    return Object.prototype.toString.call(this) === \"[object Function]\"\n      ? this()\n      : this\n  },\n})\n\n//随机数\nexport function getRandomId (len = 20, bTime = true) {\n  let strId = \"\"\n  if (bTime) strId = new Date().getTime() + \"\"\n  const iLen = len - strId.length\n  for (let i = 0; i < iLen; i++) {\n    strId += getRandomKeys(1)\n  }\n  return strId.substr(0, len)\n}\nexport function getRandomKeys (iLen = 10) {\n  let strRandomKeys = \"\"\n  const str = \"1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n  for (let i = 0; i < iLen; i++) {\n    strRandomKeys += str.substr(Math.floor(Math.random() * str.length), 1)\n  }\n  return strRandomKeys\n}\nexport const childrenEmptyToNull = (arr = [], childrenKey = \"children\") => {\n  let data = arr\n  function setNullForEmptyChildren (node) {\n    if (node?.[childrenKey]?.length === 0) {\n      node[childrenKey] = null\n    } else if (node?.[childrenKey]) {\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child))\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i))\n  setNullForEmptyChildren(data)\n  return data\n}\n\nexport const deleteEmptyChildren = (arr = [], childrenKey = \"children\") => {\n  let data = arr\n  function setNullForEmptyChildren (node) {\n    if (node?.[childrenKey]?.length === 0 || node?.[childrenKey] === null) {\n      delete node[childrenKey]\n      node.isLeaf = true\n    } else if (node?.[childrenKey]) {\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child))\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i))\n  setNullForEmptyChildren(data)\n  return data\n}\n//给数据添加一个随机ID\nexport const addRandomID = (arr = [], childrenKey = \"children\") => {\n  let data = arr\n  function setNullForEmptyChildren (node) {\n    if (node?.[childrenKey]?.length === 0 || node?.[childrenKey] === null) {\n      delete node[childrenKey]\n      node.randomId = getRandomId()\n    } else if (node?.[childrenKey]) {\n      node.randomId = getRandomId()\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child))\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i))\n  setNullForEmptyChildren(data)\n  return data\n}\n\n/**\n * 根据文件地址获取文件内容\n * @param {String} url 文件地址\n */\nexport function getFileContentByUrl (url) {\n  return new Promise((resolve, reject) => {\n    let xmlhttp\n    if (window.XMLHttpRequest) {\n      xmlhttp = new XMLHttpRequest()\n    } else {\n      xmlhttp = new ActiveXObject(\"Microsoft.XMLHttp\")\n    }\n    xmlhttp.onreadystatechange = () => {\n      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n        resolve(xmlhttp.responseText)\n      }\n    }\n    xmlhttp.onerror = () => {\n      reject(false)\n    }\n    // 向服务器发送请求\n    xmlhttp.open(\"GET\", url, true)\n    xmlhttp.send()\n  })\n}\n\n/* 根据地址获取文件名 */\nexport function getFileNameByUrl (_url = \"\") {\n  return decodeURIComponent(_url).substring(\n    decodeURIComponent(_url).lastIndexOf(\"/\") + 1\n  )\n}\n/**\n * 根据name获取文件后缀名\n * @param {*} _name\n * @param {*} _mark 标记  默认返回不带.，如果需要，第二个参数可以传入点\n * @returns\n */\nexport function getSuffixName (_name = \"\", _mark = \"\") {\n  return _mark + _name.slice(_name.lastIndexOf(\".\") + 1)\n}","<!--\n  案例：\n  <xn-dialog-msg\n      v-model:show=\"\"\n      data=\"我是日志的内容\"\n    />\n-->\n<template>\n  <Dialog\n    :title=\"title\"\n    v-model:show=\"isShow\"\n    width=\"800\"\n    :callback=\"[]\"\n  >\n    <div class=\"break-all\">\n      {{ data }}\n    </div>\n    <template #footBtn>\n      <div class=\"text-center\">\n        <n-button type=\"primary\" @click=\"copyLog\">\n          <template #icon>\n            <img\n              class=\"mt-px\"\n              src=\"../../assets/img/copy.png\"\n              style=\"width: 16px; height: 16px\"\n            /> </template\n          >复制日志\n        </n-button>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport { Dialog } from \"../index\";\nimport { computed, useSlots } from \"vue\";\nimport { writeToClipBoard } from \"../../utils\";\nimport { NButton } from \"naive-ui\";\nconst emit = defineEmits([\"update:show\"]);\n\nconst slot = useSlots();\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false,\n  },\n  title: {\n    type: String,\n    default: \"日志\",\n  },\n  data: {\n    type: String,\n    default: \"\",\n  },\n});\n/* 是否显示弹窗 */\nlet isShow = computed({\n  get() {\n    return props.show;\n  },\n  set(val) {\n    if (!val) {\n      emit(\"update:show\", false);\n    }\n  },\n});\n/* 点击复制 */\nfunction copyLog() {\n  writeToClipBoard(props.data).then(() => {\n    try {\n      $message.success(\"复制成功\");\n      emit(\"success\");\n    } catch (err) {\n      console.log(\"$message未定义\");\n      emit(\"success\");\n    }\n  });\n}\n</script>\n\n<style lang=\"scss\" scoped></style>\n","<!--\n  左侧带蓝条的title bar\n-->\n<template>\n  <div class=\"flex justify-between items-center\">\n    <div class=\"flex justify-start items-center gap-3\">\n      <div\n        class=\"blue-bar\"\n        v-if=\"showTitleBar\"\n        style=\"width: 3px; border-radius: 2px\"\n        :style=\"{ height: fontSize }\"\n      ></div>\n      <b :style=\"{ fontSize: fontSize }\">{{ title }}</b>\n    </div>\n    <div class=\"flex justify-center items-center\">\n      <slot></slot>\n    </div>\n     \n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  title: String,\n  size: {\n    type: String,\n    default: 'small',\n  },\n  showTitleBar: {\n    type: Boolean,\n    default: true,\n  },\n})\nconst fontSize = computed(() => {\n  switch (props.size) {\n    case 'small':\n      return '14px'\n    case 'big':\n      return '18px'\n    default:\n      return props.size\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.blue-bar {\n  background-color: rgba(37, 127, 247, 1);\n}\n</style>\n","<template>\n  <n-drawer\n    :close-on-esc=\"outClosable\"\n    :mask-closable=\"outClosable\"\n    :auto-focus=\"false\"\n    v-bind=\"attrs\"\n  >\n    <n-drawer-content :title=\"attrs.title\" closable>\n      <slot></slot>\n    </n-drawer-content>\n  </n-drawer>\n</template>\n\n<script setup>\nimport { onMounted, useAttrs } from 'vue'\nimport { NDrawer, NDrawerContent } from 'naive-ui'\n\nconst attrs = useAttrs()\nconst props = defineProps({\n  outClosable: {\n    type: Boolean,\n    default: () => false,\n  },\n})\nonMounted(() => {})\n</script>\n\n<style lang=\"scss\" scoped></style>\n","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    d: 'M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32',\n    d: 'M338.29 338.29L448 448'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nexport default defineComponent({\n  name: 'SearchOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createBlock('svg', _hoisted_1, [_hoisted_2, _hoisted_3])\n  }\n})\n","import { createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    d: 'M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128',\n    fill: 'none',\n    stroke: 'currentColor',\n    'stroke-linecap': 'round',\n    'stroke-miterlimit': '10',\n    'stroke-width': '32'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = /*#__PURE__*/ _createVNode(\n  'path',\n  {\n    d: 'M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nexport default defineComponent({\n  name: 'ReloadOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createBlock('svg', _hoisted_1, [_hoisted_2, _hoisted_3])\n  }\n})\n","<!--\n    列表页组件\n    <ListPage :config=\"config\" />\n    参数说明：\n    config：\n      expand [Function]: 行展开事件，不写就是不可展开\n      isTree [Boolean]: 是否树形\n      apiName [Function]: 接口方法\n      data [Array]: 本地数据，如果使用本地数据，将忽略apiName\n      params [Object]: 搜索参数\n        columns [Array]: 搜索项\n          说明：\n            label [String]: 文案\n            type [String]: 类型，目前支持input、select，持续开发中\n            propName [String]: 参数名\n            defaultValue [] : 默认值\n            width [Number]:  自定义宽度（开发中……）\n        change [Function]: 搜索项发生变化时回调\n            返回params: 1. 完整搜索结果 2. 发生变化的那一项\n        hidden 是否显示 页面不需要筛选项但接口需要默认参数时使用\n      table [Object]: 表格内容\n        title [String]: 标题\n        headBtns [Array]: 头部按钮\n          说明：\n            label [String] 按钮名\n            click: [Function] 按钮回调\n            icon: [Component] 按钮图标\n            loading: [Proxy(Boolean) | Function] 是否显示loading\n              案例：\n                const _loading = ref(false)\n              支持的写法：\n                1. loading : _loading\n                2. loading : () => _loading\n                3. loading : () => _loading.value\n              不支持将原始值直接赋值，原因都懂的~\n        actions [Array]: 右侧操作按钮\n          说明：\n              label: [String] 按钮名\n              click: [Function] 按钮回调\n              icon: [Component] 按钮图标\n              show: [Function | Boolean] 是否显示\n              disabled: [Function | Boolean] 是否禁用\n        columns [Array] 表格列\n          说明：\n            title [String] 标题\n            key [String] 参数名\n            width [Number] 列宽\n            slot [String] 自定义显示内容，以slot形式\n            unEllipsis:不适用溢出省略号（默认溢出显示省略号，鼠标滑过显示内容）\n            customValue [Function] 自定义显示内容\n              例如：customValue: (row) => moment(row.updateTime).format(\"yyyy-MM-DD hh:mm:ss\")\n          注意：操作栏key统一为actions \n    组件slot\n      top 搜索栏上面部分\n      center 搜索栏和表格中间部分\n      footer 底部\n\n    事件：\n      search 搜索或重置时触发，已使用场景：列表页的统计需要单独获取\n    实例方法：\n      getTableData 主动更新列表数据，用于右侧操作区更改数据后的刷新\n    实例属性：\n      pageData 页面数据\n      loading table上的loading，右侧操作区异步操作时可以设为true防止频繁点击\n      params 当前筛选项值，用本页面的筛选项查其他接口时使用\n\n-->\n<template>\n  <div\n    class=\"list-page\"\n    :class=\"{ noPadding: props?.config?.noPadding }\"\n    :style=\"{ height: props?.config?.height ?? '100%' }\"\n  >\n    <div class=\"list-page-content\">\n      <!-- 顶部插槽 -->\n      <slot name=\"top\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n      <!-- 搜索部分 -->\n      <div\n        class=\"list-page-search marB20\"\n        v-if=\"searchItems.length > 0 && !config.params.hidden\"\n      >\n        <n-grid x-gap=\"12\" cols=\"3 s:3 m:4 l:5 xl:6\" responsive=\"screen\">\n          <template v-for=\"(item, index) in searchItems\">\n            <n-gi v-if=\"!item.hidden\" :key=\"item?.did || index\">\n              <!-- 输入框 -->\n              <n-input\n                v-if=\"item.type === 'input'\"\n                v-model:value=\"params[item.propName]\"\n                :placeholder=\"item.placeholder || '请输入' + item.label\"\n                clearable\n                :disabled=\"item.disabled === true || false\"\n                :maxlength=\"item.maxlength || 20\"\n                @update:value=\"paramsChange(item)\"\n                @keyup.enter=\"searchClick\"\n              >\n              </n-input>\n              <!-- 下拉框 -->\n              <n-select\n                v-if=\"item.type === 'select'\"\n                v-model:value=\"params[item.propName]\"\n                :options=\"getSelection(item.selection)\"\n                :placeholder=\"item.placeholder || '请选择' + item.label\"\n                clearable\n                :disabled=\"item.disabled === true || false\"\n                @update:value=\"paramsChange(item)\"\n              >\n              </n-select>\n            </n-gi>\n          </template>\n\n          <n-gi :suffix=\"true\">\n            <div class=\"flex-1 justify-end flex\">\n              <n-button type=\"primary\" @click=\"searchClick\">\n                <template #icon>\n                  <n-icon>\n                    <SearchOutline />\n                  </n-icon>\n                </template>\n                查询</n-button\n              >\n              <n-button class=\"ml-3\" @click=\"searchReset\">\n                <template #icon>\n                  <n-icon>\n                    <ReloadOutline />\n                  </n-icon> </template\n                >重置</n-button\n              >\n            </div>\n          </n-gi>\n        </n-grid>\n      </div>\n      <!-- 中间插槽 -->\n      <slot name=\"center\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n      <!-- 标题 + 按钮  -->\n      <div\n        v-if=\"props?.config?.table?.title || props?.config?.table?.headBtns\"\n        class=\"overflow-hidden flex items-center justify-between\"\n        style=\"margin-bottom: 24px\"\n      >\n        <blue-title\n          size=\"16px\"\n          v-if=\"props?.config?.table?.title\"\n          :title=\"getTitle\"\n        />\n        <p style=\"display: flex\">\n          <template\n            v-for=\"(item, index) in props?.config?.table?.headBtns || []\"\n          >\n            <n-button\n              :type=\"item.type || 'primary'\"\n              class=\"marL15\"\n              v-if=\"getHeadBtnShow(item)\"\n              :key=\"index\"\n              :loading=\"getButtonLoading(item.loading)\"\n              :disabled=\"getHeadBtnDisabled(item)\"\n              @click=\"item.click\"\n            >\n              <n-icon\n                v-if=\"item.icon\"\n                :component=\"item.icon\"\n                style=\"margin-right: 8px\"\n              />\n              <span> {{ item.label }}</span>\n            </n-button>\n          </template>\n        </p>\n      </div>\n      <slot name=\"tableHeader\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n      <!-- table部分 -->\n      <div class=\"list-page-table\">\n        <n-data-table\n          :columns=\"tableColumns\"\n          :data=\"dataList\"\n          :scroll-x=\"tableWidth\"\n          striped\n          :loading=\"loading\"\n          :row-key=\"(row) => row.did ?? row.id ?? row.randomId ?? ''\"\n          :pagination=\"\n            props?.config?.data &&\n            !props?.config?.unPagination && {\n              page: pagination.page,\n              pageSize: pagination.pageSize,\n              showSizePicker: true,\n              pageSizes: pagination.pageSizeOptions,\n              itemCount: pagination.itemCount,\n              showQuickJumper: true,\n            }\n          \"\n          :on-update:page-size=\"handleSizeChange\"\n          :on-update:page=\"pageChange\"\n          :on-update:checked-row-keys=\"handleCheckedRowKeys\"\n          :children-key=\"\n            props?.config?.isTree\n              ? props?.config?.childrenKey || 'children'\n              : null\n          \"\n          :default-expanded-row-keys=\"[getExpandedRow]\"\n          @load=\"onLoad\"\n          v-bind=\"attrs\"\n        />\n      </div>\n      <!-- 底部插槽 -->\n      <slot name=\"footer\" :dataList=\"dataList\" :loading=\"loading\"></slot>\n    </div>\n    <n-pagination\n      v-if=\"!props?.config?.data\"\n      class=\"list-page-table-pagination\"\n      v-model:page=\"pagination.page\"\n      v-model:page-size=\"pagination.pageSize\"\n      :page-sizes=\"pagination.pageSizeOptions\"\n      :item-count=\"pagination.itemCount\"\n      :on-update:page-size=\"handleSizeChange\"\n      :on-update:page=\"pageChange\"\n      show-size-picker\n      show-quick-jumper\n    />\n  </div>\n</template>\n\n<script setup>\nimport { getRandomId, addRandomID } from \"../../utils\";\nimport { BlueTitle, Dialog } from \"../index\";\nimport {\n  NButton,\n  NIcon,\n  NDataTable,\n  NInput,\n  NSelect,\n  NCheckbox,\n  NGrid,\n  NGi,\n  useDialog,\n} from \"naive-ui\";\nimport {\n  computed,\n  onMounted,\n  ref,\n  useAttrs,\n  useSlots,\n  h,\n  unref,\n  watchEffect,\n  watch,\n} from \"vue\";\nimport { SearchOutline, ReloadOutline } from \"../../icon\";\nconst loading = ref(false);\nconst slots = useSlots();\nconst attrs = useAttrs();\nconst dialog = useDialog();\nconst emit = defineEmits([\n  \"search\",\n  \"success\",\n  \"finally\",\n  \"rowLoad\",\n  \"rowExpand\",\n  \"onUpdateChecked\",\n]);\nconst props = defineProps({\n  config: {\n    type: [Object, Function],\n    default: () => {},\n  },\n});\n/* 搜索项 */\nconst searchItems = computed(() => {\n  return props?.config?.params?.columns?.length > 0\n    ? props?.config?.params?.columns\n    : [];\n});\n/* 标题 */\nconst getTitle = computed(() => {\n  let titleValue = props?.config?.table?.title || \"\";\n  if (Object.prototype.toString.call(titleValue) === \"[object Function]\") {\n    return titleValue();\n  } else {\n    return titleValue;\n  }\n});\n/* 请求参数 */\nconst params = ref({});\n/* 表格列 */\nconst tableColumns = ref([]);\n/* 计算表格宽度 */\nlet tableWidth = ref(0);\n/* 页码 */\nconst pagination = ref({\n  page: 1,\n  pageSize: 10,\n  pageSizeOptions: [1, 5, 10, 20, 50],\n  itemCount: 0,\n  isDel: 0,\n});\n/* pageSize改变 */\nfunction handleSizeChange(val) {\n  pagination.value.pageSize = val;\n  getTableData();\n}\n/* page发生变化 */\nfunction pageChange(n) {\n  pagination.value.page = n;\n  getTableData();\n}\n/* 搜索内容发生变化 */\nfunction paramsChange(item) {\n  props?.config?.params?.change?.(params.value, item);\n}\n\nlet dataList = ref([]);\nlet pageData = ref({});\n\n/* 初始化参数 */\nfunction initParams() {\n  if (searchItems.value.length) {\n    searchItems.value.forEach((item) => {\n      if (item.type === \"input\") {\n        params.value[item.propName] = item?.defaultValue?.xnsk_admin_ui_realValue || \"\";\n      } else if (item.type === \"select\") {\n        params.value[item.propName] =\n          item.defaultValue === \"\" || item.defaultValue === undefined\n            ? null\n            : item.defaultValue?.xnsk_admin_ui_realValue;\n      }\n    });\n  }\n}\n/* 初始化列 */\nfunction initTableColumns() {\n  let _columns = props?.config?.table?.columns || [];\n  tableColumns.value = _columns.map((item, index) => {\n    let obj = {\n      ellipsis: !item.unEllipsis\n        ? {\n            tooltip: true,\n          }\n        : false,\n      align:\n        props?.config?.isTree && index === 0 ? \"left\" : item.align || \"center\",\n      titleAlign: \"center\",\n      resizable: false,\n      /* ...item, */\n    };\n    /* 自定义内容，支持String和slot */\n    if (item.customValue) {\n      obj.render = (row) => {\n        return item.customValue(row);\n      };\n    } else if (item.slot) {\n      obj.render = (row) => {\n        return h(slots[item.slot], row);\n      };\n    } else {\n      obj.render = (row) => {\n        return row[item.key] === null ||\n          row[item.key] === undefined ||\n          row[item.key] === \"\"\n          ? \"—\"\n          : row[item.key];\n      };\n    }\n    /* 操作栏统一固定右侧 */\n    if (item.key === \"actions\") {\n      obj.fixed = \"right\";\n      obj.render = (row) => {\n        let btns = [];\n        if (props?.config?.table?.actions?.length > 0) {\n          props.config.table.actions.forEach((item) => {\n            /* 判断是否显示、禁用 */\n            let _show, _disabled;\n            if (item.show?.xnsk_admin_ui_realType === \"function\") {\n              _show = item.show(row);\n            } else {\n              _show = item.show;\n            }\n            if (item.disabled?.xnsk_admin_ui_realType === \"function\") {\n              _disabled = item.disabled(row);\n            } else {\n              _disabled = item.disabled ?? false;\n            }\n\n            /* 生成按钮 */\n            let _icon;\n            let _iconType = Object.prototype.toString.call(item.icon);\n            if (_iconType === \"[object String]\") {\n              //图片icon\n              _icon = h(\n                \"img\",\n                {\n                  src: item.icon,\n                },\n                { default: () => \"\" },\n              );\n            } else if (_iconType === \"[object Object]\") {\n              //组件icon\n              _icon = item.icon;\n            }\n            /* 判断loading */\n            /*  let _loading;\n            if (\n              Object.prototype.toString.call(item.loading) ===\n              \"[object Function]\"\n            ) {\n              _loading = unref(item.loading());\n            } else {\n              _loading = unref(item.loading);\n            } */\n            (_show || _show === undefined) &&\n              btns.push(\n                h(\n                  NButton,\n                  {\n                    size: \"small\",\n                    /* loading: _loading, */\n                    quaternary: true,\n                    type: item.type || \"primary\",\n                    disabled: _disabled,\n                    onClick: () => {\n                      if (item?.autoWarn) {\n                        dialog.warning({\n                          title: `确定${item.label}`,\n                          content: \"\",\n                          positiveText: \"确定\",\n                          negativeText: \"取消\",\n                          onPositiveClick: () => {\n                            item.click(row) || null;\n                          },\n                          onNegativeClick: () => {},\n                        });\n                      }else{\n                        item.click(row) || null;\n                      }\n                    },\n                    style: \"--n-opacity-disabled: 0;\",\n                  },\n                  {\n                    default: () => [\n                      _icon &&\n                        h(NIcon, {\n                          component: _icon,\n                        }),\n                      h(\n                        \"div\",\n                        {\n                          style: `margin-left:${_icon ? 5 : 0}px;`,\n                        },\n                        {\n                          default: () => item.label,\n                        },\n                      ),\n                    ],\n                  },\n                ),\n              );\n          });\n        }\n        return h(\n          \"div\",\n          {\n            class: \"flex\",\n          },\n          {\n            default: () => [...btns],\n          },\n        );\n      };\n    }\n    return { ...obj, ...item };\n  });\n  /* 行是否可展开 */\n  if (props?.config?.expand) {\n    tableColumns.value.unshift({\n      type: \"expand\",\n      align: \"right\",\n      expandable: (rowData) => true,\n      renderExpand: props?.config?.expand,\n    });\n  }\n}\n/* 获取下拉项 */\nfunction getSelection(_arr = []) {\n  let _type = Object.prototype.toString.call(_arr);\n  if (_type === \"[object Array]\") {\n    return _arr;\n  } else if (_type === \"[object Object]\") {\n    let _keys = Object.keys(_arr);\n    let res = _keys.map((key) => {\n      return {\n        label: _arr[key],\n        value: key,\n      };\n    });\n    return res;\n  }\n}\n\n/* 获取页面数据 */\nfunction getTableData(newParams = {}, callback = null) {\n  /* newParams合并到当前搜索条件中 */\n  params.value = { ...params.value, ...newParams };\n\n  if (props?.config?.data?.xnsk_admin_ui_realValue?.length > 0) {\n    if (props?.config?.isTree) {\n      let data_ = props.config.data.xnsk_admin_ui_realValue.map((i) => {\n        return { ...i, randomId: getRandomId() };\n      });\n      dataList.value = addRandomID(data_);\n    } else {\n      dataList.value = props.config.data.xnsk_admin_ui_realValue;\n    }\n    pagination.value.itemCount = props.config.data.xnsk_admin_ui_realValue.length;\n    return;\n  }\n  if (!props.config.apiName) return;\n  loading.value = true;\n  props.config\n    .apiName({\n      ...params.value,\n      pageNum: pagination.value.page,\n      pageSize: pagination.value.pageSize,\n    })\n    .then((res) => {\n      callback && callback(res);\n      if (res.status === 200) {\n        let list_ = res?.list || res?.data?.list || [];\n        if (props?.config?.isTree) {\n          dataList.value = list_.map((i) => {\n            return { ...i, getRandomId: getRandomId() };\n          });\n        } else {\n          dataList.value = list_;\n        }\n        pageData.value = res || {};\n        pagination.value.itemCount = res.total || res.data.total;\n        pagination.value.page = res.pageNum || res.data.pageNum;\n        emit(\"success\", pageData.value);\n      } else {\n        props?.config?.showErrMsg && $message.error(res.message);\n      }\n    })\n    /*    .catch((err) => {\n      err.message && $message.error(err.message);\n    }) */\n    .finally(() => {\n      loading.value = false;\n      emit(\"finally\");\n    });\n}\n/* onload事件 */\nfunction onLoad(row) {\n  return new Promise((resolve, reject) => {\n    emit(\"rowLoad\", row, (data = []) => {\n      row.children = data.map((i) => {\n        return { ...i };\n      });\n      resolve();\n    });\n  });\n}\n/* 树形，默认展开的行 */\nconst getExpandedRow = computed(() => {\n  if (props?.config?.expandedIndex !== undefined) {\n    return (\n      dataList.value[props.config?.expandedIndex]?.did ??\n      dataList.value[props.config?.expandedIndex]?.id ??\n      dataList.value[props.config?.expandedIndex]?.randomId ??\n      \"\"\n    );\n  } else {\n    return null;\n  }\n});\n/* function getExpandedRow() {\n  if (props?.config?.expandedIndex !== undefined) {\n    return dataList.value[props.config?.expandedIndex]?.getRandomId;\n  }\n} */\n\n/* 搜索 */\nfunction searchClick() {\n  pagination.value.page = 1;\n  getTableData();\n  emit(\"search\");\n}\n/* 重置查询条件 */\nasync function searchReset() {\n  for (let p in params.value) {\n    params.value[p] = null;\n  }\n  searchClick();\n  emit(\"search\");\n}\n\n/* 表格头部按钮是否显示 */\nfunction getHeadBtnShow(item) {\n  if (!item?.show) {\n    return true;\n  } else {\n    if (item.show?.xnsk_admin_ui_realType === \"function\") {\n      return unref(item.show());\n    } else {\n      return unref(item.show);\n    }\n  }\n}\n\n/* 表格头部按钮是否禁用 */\nfunction getHeadBtnDisabled(item) {\n  if (!item?.disabled) {\n    return false;\n  } else {\n    if (item.disabled?.xnsk_admin_ui_realType === \"function\") {\n      return unref(item.disabled());\n    } else {\n      return unref(item.disabled);\n    }\n  }\n}\n\n/* 获取按钮loading */\nfunction getButtonLoading(_value) {\n  if (_value?.xnsk_admin_ui_realType === \"function\") {\n    return unref(_value());\n  } else {\n    return unref(_value);\n  }\n}\n\n/* 可勾选时，勾选更新 */\nfunction handleCheckedRowKeys(keys) {\n  if (props.config?.onUpdateChecked?.xnsk_admin_ui_realType === \"function\") {\n    props.config.onUpdateChecked(keys);\n  } else {\n    emit(\"onUpdateChecked\", keys);\n  }\n}\n\nonMounted(() => {\n  initParams();\n  initTableColumns();\n  !props.config?.unLoad && getTableData();\n  tableWidth.value = tableColumns.value.reduce((a, b) => {\n    return a + (b.minWidth || b.width || 0);\n  }, 0);\n});\nwatchEffect(() => {\n  if (props.config?.data?.xnsk_admin_ui_realType === \"asyncfunction\") {\n    props.config?.data?.().then((res) => {\n      dataList.value = res;\n    });\n  } else if (props.config?.data !== undefined) {\n    getTableData();\n  }\n});\ndefineExpose({\n  getTableData,\n  refresh: getTableData,\n  pageData,\n  loading,\n  params,\n});\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.text-left) {\n  text-align: left !important;\n}\n:deep(.text-right) {\n  text-align: right !important;\n}\n\n:deep(.text-red) {\n  color: #d03050;\n}\n:deep(.text-blue) {\n  color: #257ff7;\n}\n:deep(.text-green) {\n  color: #18a058;\n}\n:deep(.text-grey) {\n  color: #999999;\n}\n:deep(.n-data-table__pagination) {\n  position: sticky;\n  bottom: -20px;\n  padding: 20px 20px;\n  background-color: #fff;\n  z-index: 99;\n}\n.list-page {\n  position: relative;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  &.noPadding {\n    .list-page-content {\n      padding: 0;\n    }\n  }\n  .list-page-content {\n    flex: 1;\n    overflow: auto;\n    padding: 20px 24px;\n  }\n\n  .list-page-table-pagination {\n    padding: 20px 20px;\n    justify-content: flex-end;\n    position: sticky;\n    bottom: 0;\n    z-index: 1;\n    background-color: #fff;\n  }\n}\n</style>\n","<!--\n  form表单组件\n\n <xnsk-form :config=\"formConfig\" :defaultValue=\"defaultValue\" />\n\ndefaultValue [Object] 默认值 \n\n config说明\n\n  labelWidth [Number]  文案宽度（px)\n  trigger [String] 校验触发方式\n  submitBtn [Ojbect] 提交按钮\n    {\n      label [String] 按钮文案\n      loading [Proxy(Boolean)] 按钮loading ，响应式Boolean\n      click [Function] 表单校验成功后的回调\n    }\n  columns [Array] 表单项\n    {\n      label [String] 文案\n      type [String] 类型（input,textarea,select,radio,checkBox）\n      propName [String] 属性名\n      required [Boolean] 是否必填\n      maxlength [Number] 最大长度\n      //defaultValue 默认值 \n      show [Function | Boolean] 是否显示\n      disabled [Function | Boolean] 是否禁用\n      readonly [Function | Boolean] 是否只读\n      rows [Number] textarea默认行数\n      selection [Array] select,radio,checkBox的备选项\n      validator 自定义校验规则\n    }\n\n  slot:\n    btns  自定义底部按钮\n\n-->\n<template>\n  <div>\n    <n-form\n      :model=\"formResult\"\n      :rules=\"rules\"\n      :ref=\"\n        (el) => {\n          formId = el;\n        }\n      \"\n      label-placement=\"left\"\n      :label-width=\"config.labelWidth || 'auto'\"\n      require-mark-placement=\"right\"\n    >\n      <n-grid x-gap=\"12\" :cols=\"24\">\n        <n-gi\n          v-for=\"item in getItems\"\n          :class=\"{ 'is-slot': item.type === 'slot' && !item.useFormItem }\"\n          :key=\"item.propName\"\n          :span=\"item.span\"\n          :offset=\"item.offset\"\n        >\n          <n-form-item\n            :label=\"\n              item.type === 'slot' && !item.useFormItem ? null : item.label\n            \"\n            :path=\"item.propName\"\n          >\n            <!-- 单行输入框 -->\n            <n-input\n              v-trim\n              v-if=\"item.type === 'input'\"\n              v-model:value=\"formResult[item.propName]\"\n              :placeholder=\"getPlaceholder(item)\"\n              :maxlength=\"item.maxlength || 20\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              @update:value=\"(e) => changePropName(e, item)\"\n            />\n            <!-- 多行输入 -->\n            <n-input\n              v-trim\n              v-if=\"item.type === 'textarea'\"\n              v-model:value=\"formResult[item.propName]\"\n              type=\"textarea\"\n              :placeholder=\"getPlaceholder(item)\"\n              :maxlength=\"item.maxlength || 200\"\n              :rows=\"item.rows || 9\"\n              show-count\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              @update:value=\"(e) => changePropName(e, item)\"\n            />\n            <!-- 选择框 -->\n            <n-select\n              v-if=\"item.type === 'select'\"\n              v-model:value=\"formResult[item.propName]\"\n              :options=\"getSelection(item)\"\n              :placeholder=\"getPlaceholder(item)\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n              @update:value=\"(e) => changePropName(e, item)\"\n            />\n            <!-- 单选框 -->\n            <n-radio-group\n              v-if=\"item.type === 'radio'\"\n              v-model:value=\"formResult[item.propName]\"\n              @update:value=\"(e) => changePropName(e, item)\"\n              :name=\"item.propName\"\n              :disabled=\"item.disabled\"\n              :readonly=\"item.readonly\"\n            >\n              <n-space>\n                <n-radio\n                  v-for=\"selectionItem in getSelection(item)\"\n                  :key=\"selectionItem.value\"\n                  :value=\"selectionItem.value\"\n                >\n                  {{ selectionItem.label }}\n                </n-radio>\n              </n-space>\n            </n-radio-group>\n            <!-- 复选框 -->\n            <n-checkbox-group\n              v-if=\"item.type === 'checkbox'\"\n              v-model:value=\"formResult[item.propName]\"\n            >\n              {{ formResult[item.propName] }}\n              <n-space item-style=\"display: flex;\">\n                <n-checkbox\n                  v-for=\"item in getSelection(item)\"\n                  :key=\"item.value\"\n                  :value=\"item.value\"\n                  :label=\"item.label\"\n                />\n              </n-space>\n            </n-checkbox-group>\n            <!-- 提示文字 -->\n            <span v-if=\"item.type === 'text'\" :style=\"item.style\">\n              {{\n                item.text?.xnsk_admin_ui_realType === \"function\"\n                  ? item.text()\n                  : item.text\n              }}\n            </span>\n            <slot\n              v-if=\"item.type === 'slot'\"\n              :name=\"item.propName\"\n              :data=\"formResult\"\n              :item=\"item\"\n            ></slot>\n          </n-form-item>\n        </n-gi>\n      </n-grid>\n    </n-form>\n    <div v-if=\"!slot.btns\" class=\"form-btns\">\n      <n-button\n        v-if=\"config?.submitBtn\"\n        class=\"btn\"\n        type=\"primary\"\n        :loading=\"submitLoading\"\n        @click=\"submitClick\"\n      >\n        {{ config?.submitBtn?.label || \"确定\" }}\n      </n-button>\n      <n-button v-if=\"config?.submitBtn\" @click=\"cancelClick\"> 取消 </n-button>\n    </div>\n    <slot v-if=\"slot.btns\" name=\"btns\"></slot>\n  </div>\n</template>\n\n<script setup>\nimport {\n  NForm,\n  NFormItem,\n  NGrid,\n  NGi,\n  NCheckboxGroup,\n  NCheckbox,\n  NRadioGroup,\n  NRadio,\n  NButton,\n  NSelect,\n  NInput,\n} from \"naive-ui\";\nimport {\n  computed,\n  onMounted,\n  ref,\n  unref,\n  useAttrs,\n  useSlots,\n  watchEffect,\n  watch,\n} from \"vue\";\nimport { getRandomId } from \"../../utils\";\n\nconst errMsgPrefix = {\n  input: \"请输入\",\n  textarea: \"请输入\",\n  select: \"请选择\",\n  radio: \"请选择\",\n  checkbox: \"请选择\",\n  slot: \"缺少\",\n};\nconst formId = ref(\"from_\" + getRandomId());\n\nconst slot = useSlots();\nconst emit = defineEmits([\"submit\", \"cancel\", \"change\"]);\nconst attrs = useAttrs();\nconst props = defineProps({\n  config: {\n    type: Object,\n    default: {},\n  },\n  defaultValue: {\n    type: Object,\n    default: {},\n  },\n});\n/* form结果 */\nconst formResult = ref({});\n/* 校验 */\nconst rules = ref({});\n/* loading */\nconst submitLoading = computed(() => {\n  if (props.config?.submitBtn?.loading) {\n    return props.config.submitBtn.loading?.xnsk_admin_ui_realType === \"function\"\n      ? unref(props.config.submitBtn.loading())\n      : unref(props.config.submitBtn.loading);\n  } else {\n    return false;\n  }\n});\n/* 表单项 */\nconst getItems = computed(() => {\n  let arr = [];\n  if (props.config?.columns?.length > 0) {\n    props.config.columns.forEach((item) => {\n      let obj = {};\n      obj.label = item.label;\n      obj.type = item.type;\n      obj.useFormItem = item.useFormItem || false;\n      obj.propName = item.propName;\n      obj.required = item.required;\n      obj.maxlength = item.maxlength;\n      obj.rows = item.rows || 9;\n      obj.validator = item.validator || null;\n      obj.trigger = item.trigger || props.config?.trigger || \"blur\";\n      obj.selection = item.selection || [];\n      obj.span = item.span || 24;\n      obj.offset = item.offset || 0;\n      obj.onInput = item.onInput || null;\n\n      obj.text = item.text || \"\";\n      obj.style = item.style || \"\";\n\n      /* 备选项 */\n      //注释掉，不能在这里写，如果备选项是异步获取并且网速极慢，会在填写表单时重置表单，因为计算属性重新执行了\n      /* if (item.type === \"select\") {\n        obj.selection =\n          item.selection.xnsk_admin_ui_realType === \"function\"\n            ? unref(item.selection())\n            : unref(item.selection);\n      } */\n\n      /* 如果必填，加入校验 */\n      let ruleObject = {\n        required: obj?.required,\n        trigger: obj.trigger,\n        key: obj?.propName,\n        validator(rule, value) {\n          if (obj?.validator?.xnsk_admin_ui_realType === \"function\") {\n            //如果传函数\n            return obj?.validator(value);\n          } else if (obj?.validator?.xnsk_admin_ui_realType === undefined) {\n            //如果不传\n            if (obj?.required && [null, undefined, \"\"].includes(value)) {\n              //不传校验规则，但设置了必填，则只判断空值\n              return new Error(`${errMsgPrefix[obj.type]}${obj.label}`);\n            } else if (\n              value?.xnsk_admin_ui_realType === \"array\" &&\n              value.length === 0\n            ) {\n              //如果是数组，长度为0也报异常\n              return new Error(`${errMsgPrefix[obj.type]}${obj.label}`);\n            } else {\n              //不传校验规则，没有设置必填，或当前有值，则为true\n              return true;\n            }\n          }\n        },\n      };\n      rules.value[obj.propName] = ruleObject;\n\n      /* 是否禁用 */\n      if (item.disabled !== undefined) {\n        let isDisabled =\n          item.disabled?.xnsk_admin_ui_realType === \"function\"\n            ? item.disabled()\n            : item.disabled;\n        isDisabled && (obj.disabled = true);\n      }\n      /* 是否只读 */\n      if (item.readonly !== undefined) {\n        let isReadonly =\n          item.readonly?.xnsk_admin_ui_realType === \"function\"\n            ? item.readonly()\n            : item.readonly;\n        isReadonly && (obj.readonly = true);\n      }\n\n      /* 是否显示 */\n      let isShow =\n        item.show === undefined ||\n        (item.show?.xnsk_admin_ui_realType === \"function\"\n          ? item.show(formResult.value)\n          : item.show);\n      isShow && arr.push(obj);\n    });\n    return arr;\n  }\n});\n\n/* 初始化字段 */\ninitForm();\nwatchEffect(() => {\n  let keys = Object.keys(props.defaultValue);\n  keys.forEach((key) => {\n    let findItem = props.config?.columns.find((item) => item.propName === key);\n    findItem && (formResult.value[key] = getDefaultValue(findItem));\n  });\n});\n/* watch(\n  () => JSON.stringify(props.defaultValue),\n  () => {\n    let keys = Object.keys(props.defaultValue);\n    keys.forEach((key) => {\n      let findItem = props.config?.columns.find(\n        (item) => item.propName === key\n      );\n      findItem && (formResult.value[key] = getDefaultValue(findItem));\n    });\n  },\n  {\n    deep: true,\n  }\n); */\nfunction initForm() {\n  let items = props.config?.columns || [];\n  items.forEach((item) => {\n    switch (item.type) {\n      case \"input\":\n      case \"textarea\":\n        item.propName && (formResult.value[item.propName] = \"\");\n        break;\n      case \"select\":\n        item.propName && (formResult.value[item.propName] = null);\n        break;\n    }\n  });\n}\n/* 处理提示语 */\nfunction getPlaceholder(item) {\n  /* 如果未传入placeholder */\n  if (!item.placeholder) {\n    if (item.type === \"select\") {\n      return `请选择${item.label}`;\n    } else {\n      return `请输入${item.label}`;\n    }\n  } else {\n    return item.placeholder;\n  }\n}\n/* 处理备选项 */\nfunction getSelection(item) {\n  let res =\n    item.selection?.xnsk_admin_ui_realType === \"function\"\n      ? unref(item.selection())\n      : unref(item.selection);\n  if (res.xnsk_admin_ui_realType === \"array\") {\n    return res;\n  } else {\n    let keys = Object.keys(res);\n    return keys.map((key) => {\n      return {\n        label: res[key],\n        value: key,\n      };\n    });\n  }\n}\n/* 获取默认值 */\nfunction getDefaultValue(item) {\n  return (\n    props.defaultValue?.[item.propName] ?? (item.type === \"select\" ? null : \"\")\n  );\n}\n\n/* 点击取消 */\nfunction cancelClick() {\n  if (props?.config?.cancelBtn?.click) {\n    props.config.cancelBtn.click();\n  } else {\n    emit(\"cancel\");\n  }\n}\n\n//监听change\nfunction changePropName(val, item) {\n  if (item?.onInput?.xnsk_admin_ui_realType === \"function\") {\n    let res = item?.onInput?.(val);\n    if (res !== undefined) {\n      formResult.value[item.propName] = res;\n    }\n  }\n  //通知更新，返回最终结果\n  if (props.config?.change) {\n    props.config?.change(unref(formResult.value), item, val);\n  } else {\n    emit(\"change\", unref(formResult.value), item, val);\n  }\n  //通知更新，返回修改项\n}\n/* 点击提交 */\nfunction submitClick() {\n  formId.value?.validate((errors) => {\n    if (!errors) {\n      if (props.config?.submitBtn?.click) {\n        $dialog.warning({\n          title: \"确定提交？\",\n          content: \"\",\n          positiveText: \"确定\",\n          negativeText: \"取消\",\n          onPositiveClick: () => {\n            props.config?.submitBtn?.click(unref(formResult.value));\n          },\n          onNegativeClick: () => {},\n        });\n      } else {\n        $dialog.warning({\n          title: \"确定提交？\",\n          content: \"\",\n          positiveText: \"确定\",\n          negativeText: \"取消\",\n          onPositiveClick: () => {\n            emit(\"submit\", unref(formResult.value));\n          },\n          onNegativeClick: () => {},\n        });\n      }\n    } else {\n      /* 不通过 */\n    }\n  });\n}\n/* 外部使用，校验方法 */\nfunction validate(fn, key) {\n  if (key?.xnsk_admin_ui_realType === undefined) {\n    formId.value?.validate((errors) => fn && fn(errors));\n  } else {\n    let keys = key.xnsk_admin_ui_realType === \"string\" ? [key] : key;\n    formId.value?.validate(\n      (errors) => {\n        fn && fn(errors);\n      },\n      (rule) => {\n        return keys.includes(rule?.key);\n      },\n    );\n  }\n}\n/* 外部使用，获取表单数据*/\nfunction getValue() {\n  return formResult.value;\n}\n/* 外部使用，手动改变组件内部值 */\nfunction setValue(val = {}) {\n  let keys = Object.keys(val);\n  keys.forEach((key) => {\n    formResult.value[key] = val[key];\n  });\n}\ndefineExpose({\n  validate,\n  getValue,\n  setValue,\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.form-btns {\n  display: flex;\n  justify-content: center;\n  position: sticky;\n  bottom: -20px;\n  background-color: #fff;\n  z-index: 100;\n  padding: 20px;\n  .btn {\n    margin: 0 30px;\n  }\n}\n\n.is-slot {\n  :deep(.n-form-item-feedback-wrapper) {\n    display: none;\n  }\n}\n</style>\n","<!--\n    详情页组件\n    //使用24宫格布局，默认3列，每列8格\n      config\n        title [String]: 标题\n        data [Object]: 数据\n        labelWidth [Number]://label宽度px（如果需要label右对齐，该值必传）\n        labelAlign [String]: //label对齐方式，left | center | right,\n        border [Boolean]: 是否有border\n        column [Array]: 展示的字段\n          label [String]:文案\n          value [String | Function]:字段名\n          span [Number]:所占的单元格数\n          slot [Component]:插槽\n          注意：value只支持String和Function类型。String表示data中的字段名，Function表示自定义值\n        \n\n-->\n<template>\n  <div>\n    <BlueTitle\n      class=\"marT5 marB15\"\n      v-if=\"config.title\"\n      :title=\"config.title || ''\"\n    />\n    <n-grid :class=\"{ 'has-border': config?.border }\">\n      <n-gi\n        class=\"info-page-item flex items-baseline\"\n        v-for=\"(item, index) in config?.column || []\"\n        :key=\"item?.did || index\"\n        :span=\"item.span ?? 8\"\n      >\n        <!-- laben -->\n        <template v-if=\"item.labelSlot\">\n          <slot :name=\"item.labelSlot\"></slot>\n        </template>\n        <span\n          class=\"info-page-label inline-block padT10 padB10 padR10\"\n          else\n          :style=\"{\n            minWidth: config.labelWidth ? config.labelWidth + 'px' : 'auto',\n            'text-align': config.labelAlign ?? 'left',\n          }\"\n        >\n          {{ item.label }}{{ config?.useColon ? \":\" : \"\" }}\n        </span>\n        <!-- 值 -->\n        <template v-if=\"item.slot\">\n          <slot :name=\"item.slot\"></slot>\n        </template>\n        <span class=\"info-page-value inline-block marL5 padR10 break-all\" else>\n          {{ getItemValue(item.value) }}\n        </span>\n      </n-gi>\n    </n-grid>\n  </div>\n</template>\n\n<script setup>\nimport { useAttrs } from \"vue\";\nimport { BlueTitle } from \"../index\";\nimport { NGrid, NGi } from \"naive-ui\";\nconst attrs = useAttrs();\nconst props = defineProps({\n  config: {\n    type: Object,\n    defualt: () => {},\n  },\n  data: {\n    type: Object,\n    defualt: () => {},\n  },\n});\n/* 处理值 */\nfunction getItemValue(_value) {\n  if (typeof _value === \"string\") {\n    if (props.data) {\n      return props?.data[_value] || \"-\";\n    } else {\n      return props.config?.data[_value] || \"-\";\n    }\n  } else if (Object.prototype.toString.call(_value) === \"[object Function]\") {\n    return _value();\n  } else {\n    return \"\";\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.has-border) {\n  border-top: 1px solid #efeff5;\n  border-right: 1px solid #efeff5;\n  .info-page-item {\n    border-bottom: 1px solid #efeff5;\n    .info-page-label {\n      background-color: #f9f9f9;\n    }\n  }\n}\n</style>\n","<!--\n  .md文件解析\n  value 值\n  type 解析类型。url: 地址解析，组件加载资源并解析。value: 内容解析，组件只解析内容\n-->\n<template>\n  <div class=\"markdown-view overflow-hidden html-default-css\">\n    <n-spin class=\"loading\" v-show=\"!done\" size=\"large\" />\n    <div\n      v-if=\"value\"\n      v-html=\"valueResult\"\n      style=\"padding: 20px; border-radius: 6px\"\n    ></div>\n    <n-empty v-else description=\"无数据\" style=\"margin-top: 60px\"></n-empty>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"XnskMdPreview\",\n};\n</script>\n<script setup>\nimport { getFileContentByUrl } from \"../../utils\";\nimport { ref, watchEffect } from \"vue\";\nimport { NSpin, NEmpty } from \"naive-ui\";\n/* md解析器 */\n// const MarkdownIt = require(\"markdown-it\");\nimport MarkdownIt from \"markdown-it\";\nconst md = new MarkdownIt();\n/* 参数 */\nconst props = defineProps({\n  value: {\n    type: String,\n    default: \"\",\n  },\n  type: {\n    type: String,\n    default: \"url\",\n  },\n});\n/* 是否解析完 */\nlet done = ref(true);\n/* md文档解析结果 */\nlet valueResult = ref(\"\");\n/* 根据地址获取md文档内容，并解析 */\nasync function getFilel() {\n  done.value = false;\n  valueResult.value = \"\";\n  let data = await getFileContentByUrl(props.value);\n  data && (valueResult.value = md.render(data));\n  done.value = true;\n}\n\n/* 判断type是否为url */\nwatchEffect(() => {\n  if (props.value) {\n    if (props.type === \"url\") {\n      getFilel();\n    } else {\n      valueResult.value = md.render(props.value);\n    }\n  } else {\n    valueResult.value = \"\";\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../css/htmlDefault.scss\";\n\n.markdown-view {\n  min-height: 200px;\n  background: #fafafa;\n  border-radius: 6px;\n  position: relative;\n  word-break: break-all;\n\n  .loading {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n  }\n\n  :deep(*) {\n    white-space: pre-wrap !important;\n  }\n}\n</style>\n","<template>\n  <div>\n    <n-checkbox\n      :default-checked=\"checked\"\n      @update:checked=\"updateCheck\"\n    ></n-checkbox>\n    请阅读\n    <span\n      class=\"cursor-pointer\"\n      style=\"color: #2d8cf0\"\n      v-for=\"(item, index) in agreementList\"\n      :key=\"item.did || index\"\n      @click=\"openAgreementUrl(item.agreementUrl)\"\n    >\n      《{{ item.agreementName }}》 </span\n    >，并同意\n  </div>\n</template>\n<script setup>\nimport { ref } from \"vue\";\nimport { NCheckbox } from \"naive-ui\";\nimport hp from \"houriprotocol\";\nconst emit = defineEmits([\"update:checked\"]);\nconst props = defineProps({\n  checked: {\n    type: Boolean,\n    default: false,\n  },\n});\n\n// 协议数据\nconst agreementList = ref([]);\nfunction getAgreementData() {\n  hp.init({\n    projectId: \"20230704143829127\",\n    sceneCode: \"scdl\",\n    debug: true,\n    authContext: \"https://xnsk.mapfarm.com\",\n    userId: \"\",\n  })\n    .then((res) => {\n      agreementList.value = res?.agreementList ?? [];\n    })\n    .catch((err) => {\n      console.log(err.message || err.msg || \"系统异常\");\n      $message.error(err.message || err.msg || \"系统异常\");\n    });\n}\ngetAgreementData();\n\n//打开协议\nfunction openAgreementUrl(url) {\n  url && window.open(url);\n}\n\n//更新\nfunction updateCheck(v) {\n  emit(\"update:checked\", v);\n}\n</script>\n","<!--\n    案例：\n    <XnskTreeSync\n        v-model:value=\"treeSelect\"\n        :treeData=\"treeData\"\n        search\n        checkable\n      />\n    说明：\n    v-model:value: 双向绑定选择结果\n    treeData: 树形数据\n    search: 可搜索\n    checkable: 可选\n    key: 指定唯一标识，默认did\n    label: 指定显示文案，默认name\n    childrenKey: 指定children字段，默认children\n\n    @click: 点击树事件\n-->\n<template>\n  <div>\n    <n-input\n      class=\"marB10\"\n      v-model:value=\"pattern\"\n      placeholder=\"搜索\"\n      clearable\n      v-if=\"search\"\n    />\n    <n-tree\n      :ref=\"\n        (el) => {\n          formId = el;\n        }\n      \"\n      block-line\n      :data=\"localTreeData\"\n      :default-checked-keys=\"\n        (value || []).filter((i) => i[1] === 1).map((i) => i[0])\n      \"\n      :indeterminate-keys=\"\n        (value || []).filter((i) => i[1] === 0).map((i) => i[0])\n      \"\n      :key-field=\"dataKey\"\n      :label-field=\"label\"\n      :children-field=\"childrenKey\"\n      :pattern=\"pattern\"\n      :checkable=\"checkable\"\n      :node-props=\"nodeProps\"\n      :cancelable=\"cancelable\"\n      cascade\n      selectable\n      :show-irrelevant-nodes=\"false\"\n      v-bind=\"attrs\"\n      @update:checked-keys=\"upDateChecked\"\n      @update:indeterminate-keys=\"upDateHalfChecked\"\n      @update:selected-keys=\"upDateSelected\"\n    />\n  </div>\n</template>\n<script setup>\nimport { computed, ref, unref, useAttrs } from \"vue\";\nimport { childrenEmptyToNull, getRandomId } from \"../../utils\";\nimport { NInput, NTree } from \"naive-ui\";\nconst formId = ref(\"tree_\" + getRandomId());\nconst props = defineProps({\n  value: {\n    type: Array,\n    default: [],\n  },\n  treeData: {\n    type: Array,\n    default: [],\n  },\n  dataKey: {\n    type: String,\n    default: \"did\",\n  },\n  label: {\n    type: String,\n    default: \"name\",\n  },\n  childrenKey: {\n    type: String,\n    default: \"children\",\n  },\n  checkable: {\n    type: Boolean,\n    default: false,\n  },\n  search: {\n    type: Boolean,\n    default: false,\n  },\n  cancelable: {\n    type: Boolean,\n    default: false,\n  },\n});\n\nconst emit = defineEmits([\"click\", \"update:value\", \"select\"]);\nconst attrs = useAttrs();\nconst pattern = ref(\"\"); //筛选\n\n//转为本地数据，处理children为[]的情况\nconst localTreeData = computed(() =>\n  childrenEmptyToNull(props.treeData, props.childrenKey || \"children\"),\n);\n\n/* const localTreeData = computed(() => {\n  let childrenKey = props.childrenKey || \"children\";\n  let data = unref(props.treeData);\n  function setNullForEmptyChildren(node) {\n    if (node?.[childrenKey]?.length === 0) {\n      node[childrenKey] = null;\n    } else if (node?.[childrenKey]) {\n      node[childrenKey].forEach((child) => setNullForEmptyChildren(child));\n    }\n  }\n  (data || []).forEach((i) => setNullForEmptyChildren(i));\n  setNullForEmptyChildren(data);\n  return data;\n}); */\n\n//更新全选数据\nfunction upDateChecked(keys, options, meta) {\n  emit(\"update:value\", mergeValue());\n}\n//更新半选数据\nfunction upDateHalfChecked(keys, options, meta) {\n  emit(\"update:value\", mergeValue());\n}\n//合并全选、半选数据\nfunction mergeValue() {\n  let arr1 = formId.value.getCheckedData()?.keys ?? [];\n  let arr2 = formId.value.getIndeterminateData().keys ?? [];\n  let res1 = arr1.map((i) => {\n    return [i, 1];\n  });\n  let res2 = arr2.map((i) => {\n    return [i, 0];\n  });\n  return [...res1, ...res2];\n}\n//更新选中\nfunction upDateSelected(keys, options, meta) {\n  emit(\"select\", keys, options, meta);\n}\n\n/* 自定义标签属性 */\nfunction nodeProps({ option }) {\n  return {\n    onClick() {\n      emit(\"click\", option);\n    },\n  };\n}\n</script>\n<style lang=\"scss\" scoped>\n:deep(.n-tree-node-switcher__icon) {\n  svg {\n    transform: scale(1.5);\n  }\n}\n</style>\n","import axios from \"axios\";\nconst post = (axios_, config_, url = \"\", data = {}, extendsConfig = {}) => {\n  axios_.interceptors.request.use((request) => {\n    if (config_.beforeRequest) {\n      config_.beforeRequest(request, extendsConfig ?? {});\n    }\n    return request;\n  });\n  return new Promise((resolve, reject) => {\n    axios_\n      .post(url, data)\n      .then((request) => {\n        if (request.data?.status !== 200) {\n          config_?.onError?.(request.data, extendsConfig ?? {});\n        }\n        resolve(request.data);\n      })\n      .catch((err) => {\n        config_?.onNetWorkError?.(\n          err?.response ?? {\n            data: {\n              status: 500,\n              data: null,\n              message: err?.message || \"系统异常\",\n            },\n          },\n          extendsConfig ?? {}\n        );\n        resolve(\n          err?.response?.data ?? {\n            status: 500,\n            data: null,\n            message: err.message,\n          }\n        );\n      })\n      .finally(() => {});\n  });\n};\nfunction useMiniHttp(args = null) {\n  let instance = null;\n  //配置项\n  const config = {\n    beforeRequest: null,\n    onNetWorkError: null,\n    onError: null,\n  };\n  const install = (app, config) => {\n    app.config.globalProperties.$miniHttp = create(config);\n  };\n  const create = (args = {}) => {\n    config.beforeRequest = args?.beforeRequest || null;\n    config.onNetWorkError = args?.onNetWorkError || null;\n    config.onError = args?.onError || null;\n    const config_ = {\n      baseURL: args?.baseURL || \"\",\n      timeout: args?.timeout || 60000,\n      headers: (() => {\n        let res = {};\n        let type_ = Object.prototype.toString.call(args?.headers);\n        if (type_ === \"[object Object]\") {\n          res = args.headers;\n        } else if (type_ === \"[object Function]\") {\n          res = args.headers();\n        }\n        return res;\n      })(),\n    };\n    instance = axios.create(config_);\n    /* 去掉统一配置，改为单个处理 */\n    /*  instance.interceptors.request.use((request) => {\n      if (config.beforeRequest) {\n        config.beforeRequest(request);\n      }\n      return request;\n    }); */\n    return miniHttp.bind(this);\n  };\n  // 核心部分\n  const miniHttp = (args = {}, extendsConfig = null) => {\n    let type = Object.prototype.toString.call(args);\n    if (type === \"[object Object]\") {\n      return useObject(args);\n    } else if (type === \"[object String]\") {\n      if (args.includes(\"/\")) {\n        return useString(args, extendsConfig);\n      } else {\n        return useApiCode(args, extendsConfig);\n      }\n    }\n  };\n  /* 传入对象，多个接口配置 */\n  const useObject = (args = {}) => {\n    let res = {};\n    Object.keys(args).forEach((key) => {\n      let type_ = Object.prototype.toString.call(args[key]);\n      if (type_ === \"[object String]\") {\n        if (args[key].includes(\"/\")) {\n          res[key] = useString(args[key]);\n        } else {\n          res[key] = useApiCode(args[key]);\n        }\n      } else if (type_ === \"[object Array]\") {\n        if (args[key][0].includes(\"/\")) {\n          res[key] = useString(args[key][0], args[key]?.[1]);\n        } else {\n          res[key] = useApiCode(args[key][0], args[key]?.[1]);\n        }\n      }\n    });\n    return res;\n  };\n\n  /* 处理单个URL请求 */\n  const useString = (url = \"\", extendsConfig) => {\n    return (data, EC = {}) => {\n      return post(instance, config, url, data, {\n        ...(extendsConfig || {}),\n        ...(EC || {}),\n      });\n    };\n  };\n\n  /* 新版请求方式 */\n  const useApiCode = (code = \"\", extendsConfig = {}) => {\n    return (data = {}, EC = {}) => {\n      return post(\n        instance,\n        config,\n        \"/less/api/auth/common\",\n        {\n          apiCode: code,\n          queryParam: data,\n        },\n        {\n          ...(extendsConfig || {}),\n          ...(EC || {}),\n        }\n      );\n    };\n  };\n\n  const createApiCode = () => {};\n  if (args) {\n    return create(args);\n  } else {\n    return { install, create };\n  }\n}\nexport default useMiniHttp;\n","import useMiniHttp from \"./js/index\"\nconst config = {\n  baseURL: \"\",\n  beforeRequest: (request, extendsConfig) => {\n    console.log('[ extendsConfig ] >', extendsConfig)\n    const { token = \"\" } = extendsConfig\n    request.headers.Authorization = token\n    request.headers.appcode = \"xnsk_admin_ui\"\n    const ct =\n      extendsConfig?.[\"Content-Type\"] ?? \"application/json;charset=UTF-8\"\n    request.headers[\"Content-Type\"] = ct\n  },\n  /* 网络异常 */\n  onNetWorkError: (response, extendsConfig) => {\n    console.log(' 异常 >', response, extendsConfig)\n  },\n  /* 业务异常  */\n  onError: (res, extendsConfig) => {\n    console.log(' 异常 >', res, extendsConfig)\n  },\n}\nconst http = useMiniHttp(config)\nexport default http\n","<!--\n    文件上传\n\n    案例：\n    <XnskUploadFile>\n        <template #uploadBtn>\n            <n-button type=\"primary\">点击上传</n-button>\n        </template>\n    </XnskUploadFile>\n\n    参数：\n      autoUpload: 选择完成后是否自动上传\n\n    事件：\n      change: 文件上传完成回调\n      fileChange: 文件选择回调\n-->\n<template>\n  <div style=\"width: 100%\">\n    <n-upload\n      :ref=\"\n        (el) => {\n          refId = el;\n        }\n      \"\n      v-model:file-list=\"localFileList\"\n      @remove=\"handleRemove\"\n      :multiple=\"multipleUpload\"\n      :default-upload=\"autoUpload\"\n      :custom-request=\"customRequest\"\n      @before-upload=\"beforeUpload\"\n      @change=\"upLoadFileChange\"\n      v-bind=\"attrs\"\n    >\n      <span class=\"inline-block uploadBtn\">\n        <template v-if=\"attrs?.['list-type'] === 'image-card'\">\n          <span style=\"font-size: 40px; line-height: 20px\">+</span>\n        </template>\n        <slot v-else name=\"uploadBtn\" :loading=\"loading\"></slot>\n      </span>\n    </n-upload>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, reactive, ref, useAttrs, watch, computed } from \"vue\";\nimport { getFileNameByUrl, getSuffixName, getRandomKeys } from \"../../utils\";\nimport http from \"../../http\";\nimport { NUpload } from \"naive-ui\";\nconst attrs = useAttrs();\n/* 上传地址 */\n/* 随机数ID，为同时加载多个上传组件准备 , 后期换成 uuid*/\nconst refId = ref(\n  \"ref\" + new Date().getTime() + parseInt(Math.random() * 10000),\n);\n/* loading */\nlet loading = ref(false);\n/* 定义参数 */\nconst props = defineProps({\n  value: {\n    type: String,\n    default: \"\",\n  },\n  /* 是否显示文件列表 */\n  showFileList: {\n    type: Boolean,\n    default: () => true,\n  },\n  /* 选中文件是否直接上传 */\n  autoUpload: {\n    type: Boolean,\n    default: () => true,\n  },\n  // 是否上传多个\n  multipleUpload: {\n    type: Boolean,\n    default: () => false,\n  },\n  // obs 桶\n  bucket: {\n    type: String,\n    default: \"xnsk-base\",\n  },\n  // 存储路径\n  path: {\n    type: String,\n    default: \"base/permission\",\n  },\n  url: {\n    type: String,\n    default: \"\",\n  },\n  params: {\n    type: Object,\n    default: {},\n  },\n  token: {\n    type: String,\n    default: \"\",\n  },\n});\n/* 定义事件 */\nconst emit = defineEmits([\n  \"change\",\n  \"fileChange\",\n  \"update:value\",\n  \"update:fileList\",\n]);\n\n//组件内的文件列表\nconst localFileList = ref([]);\nwatch(\n  () => props.value,\n  (newData) => {\n    if ([null, undefined].includes(newData)) {\n      localFileList.value.splice(0);\n      return;\n    }\n    if (newData) {\n    }\n    let list = newData._split(\",\");\n    list.forEach((url) => {\n      let find_ = localFileList.value.find((file) => {\n        return file.url === url;\n      });\n      if (!find_) {\n        localFileList.value.push({\n          url: url,\n          status: \"finished\",\n        });\n      }\n    });\n  },\n  { deep: true, immediate: true },\n);\n\n/* 自定义上传 */\nconst customRequest = async ({ file, onFinish, onError }) => {\n  let formData = new FormData();\n  formData.append(\"file\", file.file);\n  formData.append(\"bucket\", props.bucket);\n  formData.append(\"pathPrefix\", props.path);\n  //扩展参数\n  let keys = Object.keys(props.params);\n  keys.forEach((key) => {\n    formData.append(key, props.params[key]);\n  });\n  let res = await http(props.url, {\n    \"Content-Type\": \"multipart/form-data;charset=UTF-8\",\n    token: props.token,\n  })(formData);\n  if (res?.status === 200) {\n    const strId = getRandomKeys(10);\n    file.url = res?.data?.url ?? \"\";\n    file.name = strId;\n    onFinish();\n  } else {\n    onError();\n  }\n};\n\n/* 文件移除 */\nfunction handleRemove(data) {}\n\nasync function beforeUpload(file) {\n  //判断格式\n  if (attrs?.accept?.indexOf(getSuffixName(file.file.name, \".\")) === -1) {\n    $message.error(\"格式不正确\");\n    return false;\n  }\n  //判断大小\n  if (file.file.size / 1024 > props.maxSize) {\n    $message.error(\"文件大小超出限制\");\n    return false;\n  }\n  return true;\n}\nfunction upLoadFileChange({ file, fileList }) {\n  let list_ = (fileList || [])\n    .filter((file) => {\n      return file.url;\n    })\n    .map((file) => {\n      return file.url;\n    });\n  emit(\"update:value\", list_.join(\",\"));\n  emit(\"update:fileList\", fileList);\n}\n\ndefineExpose({\n  submitFile: () => {\n    refId.value?.submit();\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.showFileName {\n  display: flex;\n  justify-content: space-between;\n\n  * {\n    display: inline-block;\n  }\n\n  span:first-child {\n    width: 80%;\n    padding: 5px 0;\n  }\n}\n</style>\n","//import * as inherit from \"./inherit.js\"\nimport * as extend from \"./src/components\"\nimport \"./src/css/main.css\"\n\nconst install = function (Vue, opts = {}) {\n  /* 转发naive部分 */\n  // for (let key in inherit) {\n  //   const name = \"Xnsk\" + inherit[key].name\n  //   Vue.component(name, inherit[key])\n  // }\n  /* 自定义部分 */\n  for (let key in extend) {\n    if (key.startsWith('Xnsk')) {\n      Vue.component(key, extend[key])\n    } else {\n      Vue.component('Xnsk' + key, extend[key])\n    }\n  }\n}\nexport default { install, ...extend }\n"],"names":["attrs","useAttrs","slot","useSlots","isShow","computed","props","val","cancelClick","submitClick","emit","_imports_0","writeToClipBoard","content","writeStr","resolve","reject","textarea","_type","getRandomId","len","bTime","strId","iLen","i","getRandomKeys","strRandomKeys","str","childrenEmptyToNull","arr","childrenKey","data","setNullForEmptyChildren","node","_a","child","addRandomID","getFileContentByUrl","url","xmlhttp","getSuffixName","_name","_mark","copyLog","err","fontSize","vue","_hoisted_1","_hoisted_2","_createVNode","_hoisted_3","SearchOutline","defineComponent","_ctx","_cache","_openBlock","_createBlock","ReloadOutline","loading","ref","slots","dialog","useDialog","searchItems","_c","_b","_e","_d","getTitle","titleValue","params","tableColumns","tableWidth","pagination","handleSizeChange","getTableData","pageChange","n","paramsChange","item","dataList","pageData","initParams","initTableColumns","_columns","index","obj","row","h","btns","_show","_disabled","_icon","_iconType","NButton","NIcon","__spreadValues","rowData","getSelection","_arr","key","newParams","callback","data_","__spreadProps","res","list_","onLoad","getExpandedRow","_j","_i","_f","_h","_g","searchClick","searchReset","__async","p","getHeadBtnShow","unref","getHeadBtnDisabled","getButtonLoading","_value","handleCheckedRowKeys","keys","onMounted","a","b","watchEffect","__expose","errMsgPrefix","formId","formResult","rules","submitLoading","getItems","ruleObject","rule","value","initForm","findItem","getDefaultValue","getPlaceholder","changePropName","errors","validate","fn","getValue","setValue","getItemValue","md","MarkdownIt","done","valueResult","getFilel","agreementList","getAgreementData","hp","openAgreementUrl","updateCheck","v","pattern","localTreeData","upDateChecked","options","meta","mergeValue","upDateHalfChecked","arr1","arr2","res1","res2","upDateSelected","nodeProps","option","post","axios_","config_","extendsConfig","request","useMiniHttp","args","instance","config","install","app","create","type_","axios","miniHttp","type","useObject","useString","useApiCode","EC","code","http","token","ct","response","refId","localFileList","newData","file","customRequest","_0","onFinish","onError","formData","handleRemove","beforeUpload","upLoadFileChange","fileList","Vue","opts","extend"],"mappings":"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"}